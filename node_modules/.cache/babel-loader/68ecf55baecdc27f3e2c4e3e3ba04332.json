{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopDefault(ex) {\n  return ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\n\nvar React = _interopDefault(require('react'));\n\nvar ReactDOM = _interopDefault(require('react-dom'));\n\nvar PdfJs = require('pdfjs-dist');\n\nvar ThemeContext = React.createContext({\n  prefixClass: 'viewer'\n});\n\nvar classNames = function (classes) {\n  var result = [];\n  Object.keys(classes).forEach(function (clazz) {\n    if (clazz && classes[clazz]) {\n      result.push(clazz);\n    }\n  });\n  return result.join(' ');\n};\n\nvar Button = function (_a) {\n  var _b;\n\n  var children = _a.children,\n      _c = _a.isSelected,\n      isSelected = _c === void 0 ? false : _c,\n      onClick = _a.onClick;\n  var theme = React.useContext(ThemeContext);\n  return React.createElement(\"button\", {\n    className: classNames((_b = {}, _b[theme.prefixClass + \"-button\"] = true, _b[theme.prefixClass + \"-button-selected\"] = isSelected, _b)),\n    onClick: onClick\n  }, children);\n};\n\nvar MenuDivider = function () {\n  var theme = React.useContext(ThemeContext);\n  return React.createElement(\"li\", {\n    className: theme.prefixClass + \"-menu-divider\"\n  });\n};\n\nvar Icon = function (_a) {\n  var children = _a.children,\n      _b = _a.size,\n      size = _b === void 0 ? 24 : _b;\n  var theme = React.useContext(ThemeContext);\n  var width = (size || 24) + \"px\";\n  return React.createElement(\"svg\", {\n    className: theme.prefixClass + \"-icon\",\n    height: width,\n    viewBox: \"0 0 24 24\",\n    width: width\n  }, children);\n};\n\nvar CheckIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M23.5,0.499l-16.5,23l-6.5-6.5\"\n  }));\n};\n\nvar MenuItem = function (_a) {\n  var _b = _a.checked,\n      checked = _b === void 0 ? false : _b,\n      children = _a.children,\n      _c = _a.icon,\n      icon = _c === void 0 ? null : _c,\n      onClick = _a.onClick;\n  var theme = React.useContext(ThemeContext);\n  return React.createElement(\"li\", {\n    className: theme.prefixClass + \"-menu-item\",\n    onClick: onClick\n  }, React.createElement(\"div\", {\n    className: theme.prefixClass + \"-menu-item-icon\"\n  }, icon), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-menu-item-label\"\n  }, children), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-menu-item-check\"\n  }, checked && React.createElement(CheckIcon, null)));\n};\n\nvar PrimaryButton = function (_a) {\n  var children = _a.children,\n      onClick = _a.onClick;\n  var theme = React.useContext(ThemeContext);\n  return React.createElement(\"button\", {\n    className: theme.prefixClass + \"-primary-button\",\n    onClick: onClick\n  }, children);\n};\n\nvar ProgressBar = function (_a) {\n  var progress = _a.progress;\n  var theme = React.useContext(ThemeContext);\n  return React.createElement(\"div\", {\n    className: theme.prefixClass + \"-progress-bar\"\n  }, React.createElement(\"div\", {\n    className: theme.prefixClass + \"-progress-bar-inner\",\n    style: {\n      width: progress + \"%\"\n    }\n  }, progress, \"%\"));\n};\n\nvar Separator = function () {\n  var theme = React.useContext(ThemeContext);\n  return React.createElement(\"div\", {\n    className: theme.prefixClass + \"-separator\"\n  });\n};\n\nvar Spinner = function () {\n  var theme = React.useContext(ThemeContext);\n  return React.createElement(\"svg\", {\n    className: theme.prefixClass + \"-spinner\",\n    width: \"64px\",\n    height: \"64px\",\n    viewBox: \"0 0 32 32\"\n  }, React.createElement(\"circle\", {\n    className: theme.prefixClass + \"-spinner-circle\",\n    cx: \"16\",\n    cy: \"16\",\n    r: \"12\",\n    strokeDasharray: Math.PI * 2 * 9\n  }));\n};\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar defaultLayout = function (isSidebarOpened, container, main, toolbar, sidebar) {\n  var _a;\n\n  var theme = React.useContext(ThemeContext);\n  return React.createElement(\"div\", __assign({}, container.attrs, {\n    className: classNames((_a = {}, _a[theme.prefixClass + \"-layout-container\"] = true, _a[theme.prefixClass + \"-layout-with-sidebar\"] = isSidebarOpened, _a)),\n    style: container.attrs.style\n  }), container.children, React.createElement(\"div\", {\n    className: theme.prefixClass + \"-layout-toolbar\"\n  }, toolbar), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-layout-sidebar\"\n  }, sidebar.children), React.createElement(\"div\", __assign({}, main.attrs, {\n    className: theme.prefixClass + \"-layout-main\",\n    style: main.attrs.style\n  }), main.children));\n};\n\nvar defaultToolbar = function (toolbarSlot) {\n  var theme = React.useContext(ThemeContext);\n  return React.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar\"\n  }, React.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-left\"\n  }, React.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.toggleSidebarButton), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.searchPopover), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.previousPageButton), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.currentPageInput, \" / \", toolbarSlot.numPages), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.nextPageButton)), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-center\"\n  }, React.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.zoomOutButton), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.zoomPopover), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.zoomInButton)), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-right\"\n  }, React.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.fullScreenButton), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.openFileButton), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.downloadButton), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.printButton), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-toolbar-item\"\n  }, toolbarSlot.moreActionsPopover)));\n};\n\nvar useKeyUp = function (targetKeyCode, handler) {\n  var keyUpHandler = function (e) {\n    e.keyCode === targetKeyCode && handler();\n  };\n\n  React.useEffect(function () {\n    document.addEventListener('keyup', keyUpHandler);\n    return function () {\n      return document.removeEventListener('keyup', keyUpHandler);\n    };\n  }, []);\n};\n\nvar useLockScroll = function () {\n  React.useEffect(function () {\n    var originalStyle = window.getComputedStyle(document.body).overflow;\n    document.body.style.overflow = 'hidden';\n    return function () {\n      document.body.style.overflow = originalStyle;\n    };\n  }, []);\n};\n\nvar ModalBody = function (_a) {\n  var children = _a.children,\n      closeOnEscape = _a.closeOnEscape,\n      onToggle = _a.onToggle;\n  var theme = React.useContext(ThemeContext);\n  var contentRef = React.createRef();\n  useLockScroll();\n  useKeyUp(27, function () {\n    return closeOnEscape && onToggle();\n  });\n  return React.createElement(\"div\", {\n    className: theme.prefixClass + \"-modal-body\",\n    ref: contentRef\n  }, children);\n};\n\nvar ModalOverlay = function (_a) {\n  var children = _a.children,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      onClose = _a.onClose;\n  var theme = React.useContext(ThemeContext);\n\n  var onClick = function (e) {\n    if (e.target === e.currentTarget && closeOnClickOutside) {\n      onClose();\n    }\n  };\n\n  return React.createElement(\"div\", {\n    className: theme.prefixClass + \"-modal-overlay\",\n    onClick: onClick\n  }, children);\n};\n\nvar ToggleStatus;\n\n(function (ToggleStatus) {\n  ToggleStatus[\"Close\"] = \"Close\";\n  ToggleStatus[\"Open\"] = \"Open\";\n  ToggleStatus[\"Toggle\"] = \"Toggle\";\n})(ToggleStatus || (ToggleStatus = {}));\n\nvar useToggle = function () {\n  var _a = React.useState(false),\n      opened = _a[0],\n      setOpened = _a[1];\n\n  var toggle = function (status) {\n    switch (status) {\n      case ToggleStatus.Close:\n        setOpened(false);\n        break;\n\n      case ToggleStatus.Open:\n        setOpened(true);\n        break;\n\n      case ToggleStatus.Toggle:\n      default:\n        setOpened(function (isOpened) {\n          return !isOpened;\n        });\n        break;\n    }\n  };\n\n  return {\n    opened: opened,\n    toggle: toggle\n  };\n};\n\nvar Portal = function (_a) {\n  var content = _a.content,\n      target = _a.target;\n\n  var _b = useToggle(),\n      opened = _b.opened,\n      toggle = _b.toggle;\n\n  return React.createElement(React.Fragment, null, target(toggle, opened), opened && ReactDOM.createPortal(content(toggle), document.body));\n};\n\nvar Modal = function (_a) {\n  var closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      content = _a.content,\n      target = _a.target;\n\n  var renderContent = function (toggle) {\n    return React.createElement(ModalOverlay, {\n      closeOnClickOutside: closeOnClickOutside,\n      onClose: toggle\n    }, React.createElement(ModalBody, {\n      closeOnEscape: closeOnEscape,\n      onToggle: toggle\n    }, content(toggle)));\n  };\n\n  return React.createElement(Portal, {\n    target: target,\n    content: renderContent\n  });\n};\n\nvar Position;\n\n(function (Position) {\n  Position[\"TopLeft\"] = \"TOP_LEFT\";\n  Position[\"TopCenter\"] = \"TOP_CENTER\";\n  Position[\"TopRight\"] = \"TOP_RIGHT\";\n  Position[\"RightTop\"] = \"RIGHT_TOP\";\n  Position[\"RightCenter\"] = \"RIGHT_CENTER\";\n  Position[\"RightBottom\"] = \"RIGHT_BOTTOM\";\n  Position[\"BottomLeft\"] = \"BOTTOM_LEFT\";\n  Position[\"BottomCenter\"] = \"BOTTOM_CENTER\";\n  Position[\"BottomRight\"] = \"BOTTOM_RIGHT\";\n  Position[\"LeftTop\"] = \"LEFT_TOP\";\n  Position[\"LeftCenter\"] = \"LEFT_CENTER\";\n  Position[\"LeftBottom\"] = \"LEFT_BOTTOM\";\n})(Position || (Position = {}));\n\nvar Position$1 = Position;\n\nvar calculatePosition = function (content, target, position, offset) {\n  var targetRect = target.getBoundingClientRect();\n  var contentRect = content.getBoundingClientRect();\n  var height = contentRect.height,\n      width = contentRect.width;\n  var top = 0;\n  var left = 0;\n\n  switch (position) {\n    case Position$1.TopLeft:\n      top = targetRect.top - height;\n      left = targetRect.left;\n      break;\n\n    case Position$1.TopCenter:\n      top = targetRect.top - height;\n      left = targetRect.left + targetRect.width / 2 - width / 2;\n      break;\n\n    case Position$1.TopRight:\n      top = targetRect.top - height;\n      left = targetRect.left + targetRect.width - width;\n      break;\n\n    case Position$1.RightTop:\n      top = targetRect.top;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case Position$1.RightCenter:\n      top = targetRect.top + targetRect.height / 2 - height / 2;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case Position$1.RightBottom:\n      top = targetRect.top + targetRect.height - height;\n      left = targetRect.left + targetRect.width;\n      break;\n\n    case Position$1.BottomLeft:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left;\n      break;\n\n    case Position$1.BottomCenter:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left + targetRect.width / 2 - width / 2;\n      break;\n\n    case Position$1.BottomRight:\n      top = targetRect.top + targetRect.height;\n      left = targetRect.left + targetRect.width - width;\n      break;\n\n    case Position$1.LeftTop:\n      top = targetRect.top;\n      left = targetRect.left - width;\n      break;\n\n    case Position$1.LeftCenter:\n      top = targetRect.top + targetRect.height / 2 - height / 2;\n      left = targetRect.left - width;\n      break;\n\n    case Position$1.LeftBottom:\n      top = targetRect.top + targetRect.height - height;\n      left = targetRect.left - width;\n      break;\n  }\n\n  return {\n    left: left + document.body.scrollLeft + (offset.left || 0),\n    top: top + document.body.scrollTop + (offset.top || 0)\n  };\n};\n\nvar usePosition = function (contentRef, targetRef, position, offset) {\n  React.useEffect(function () {\n    var targetEle = targetRef.current;\n    var contentEle = contentRef.current;\n\n    if (!contentEle || !targetEle) {\n      return;\n    }\n\n    var _a = calculatePosition(contentEle, targetEle, position, offset),\n        top = _a.top,\n        left = _a.left;\n\n    contentEle.style.top = top + \"px\";\n    contentEle.style.left = left + \"px\";\n  }, []);\n};\n\nvar Arrow = function (_a) {\n  var _b;\n\n  var customClassName = _a.customClassName,\n      position = _a.position;\n  var theme = React.useContext(ThemeContext);\n  return React.createElement(\"div\", {\n    className: classNames((_b = {}, _b[theme.prefixClass + \"-arrow\"] = true, _b[theme.prefixClass + \"-arrow-tl\"] = position === Position$1.TopLeft, _b[theme.prefixClass + \"-arrow-tc\"] = position === Position$1.TopCenter, _b[theme.prefixClass + \"-arrow-tr\"] = position === Position$1.TopRight, _b[theme.prefixClass + \"-arrow-rt\"] = position === Position$1.RightTop, _b[theme.prefixClass + \"-arrow-rc\"] = position === Position$1.RightCenter, _b[theme.prefixClass + \"-arrow-rb\"] = position === Position$1.RightBottom, _b[theme.prefixClass + \"-arrow-bl\"] = position === Position$1.BottomLeft, _b[theme.prefixClass + \"-arrow-bc\"] = position === Position$1.BottomCenter, _b[theme.prefixClass + \"-arrow-br\"] = position === Position$1.BottomRight, _b[theme.prefixClass + \"-arrow-lt\"] = position === Position$1.LeftTop, _b[theme.prefixClass + \"-arrow-lc\"] = position === Position$1.LeftCenter, _b[theme.prefixClass + \"-arrow-lb\"] = position === Position$1.LeftBottom, _b[\"\" + customClassName] = customClassName !== '', _b))\n  });\n};\n\nvar PopoverBody = function (_a) {\n  var children = _a.children,\n      closeOnEscape = _a.closeOnEscape,\n      offset = _a.offset,\n      position = _a.position,\n      targetRef = _a.targetRef,\n      onToggle = _a.onToggle;\n  var theme = React.useContext(ThemeContext);\n  var contentRef = React.createRef();\n  useKeyUp(27, function () {\n    return closeOnEscape && onToggle();\n  });\n  usePosition(contentRef, targetRef, position, offset);\n  return React.createElement(\"div\", {\n    className: theme.prefixClass + \"-popover-body\",\n    ref: contentRef\n  }, React.createElement(Arrow, {\n    customClassName: theme.prefixClass + \"-popover-body-arrow\",\n    position: position\n  }), children);\n};\n\nvar PopoverOverlay = function (_a) {\n  var children = _a.children,\n      closeOnClickOutside = _a.closeOnClickOutside,\n      onClose = _a.onClose;\n  var theme = React.useContext(ThemeContext);\n\n  var onClick = function (e) {\n    if (e.target === e.currentTarget && closeOnClickOutside) {\n      onClose();\n    }\n  };\n\n  React.useEffect(function () {\n    var originalStyle = window.getComputedStyle(document.body).position;\n\n    if (closeOnClickOutside) {\n      document.body.style.position = 'relative';\n    }\n\n    return function () {\n      document.body.style.setProperty('overflow', originalStyle);\n    };\n  }, [closeOnClickOutside]);\n  return closeOnClickOutside ? React.createElement(\"div\", {\n    className: theme.prefixClass + \"-popover-overlay\",\n    onClick: onClick\n  }, children) : React.createElement(React.Fragment, null, children);\n};\n\nvar Popover = function (_a) {\n  var closeOnClickOutside = _a.closeOnClickOutside,\n      closeOnEscape = _a.closeOnEscape,\n      content = _a.content,\n      offset = _a.offset,\n      position = _a.position,\n      target = _a.target;\n  var targetRef = React.createRef();\n\n  var renderTarget = function (toggle, opened) {\n    return React.createElement(\"div\", {\n      ref: targetRef\n    }, target(toggle, opened));\n  };\n\n  var renderContent = function (toggle) {\n    return React.createElement(PopoverOverlay, {\n      closeOnClickOutside: closeOnClickOutside,\n      onClose: toggle\n    }, React.createElement(PopoverBody, {\n      closeOnEscape: closeOnEscape,\n      offset: offset,\n      position: position,\n      targetRef: targetRef,\n      onToggle: toggle\n    }, content(toggle)));\n  };\n\n  return React.createElement(Portal, {\n    content: renderContent,\n    target: renderTarget\n  });\n};\n\nvar TooltipBody = function (_a) {\n  var children = _a.children,\n      offset = _a.offset,\n      position = _a.position,\n      targetRef = _a.targetRef;\n  var theme = React.useContext(ThemeContext);\n  var contentRef = React.createRef();\n  usePosition(contentRef, targetRef, position, offset);\n  return React.createElement(\"div\", {\n    className: theme.prefixClass + \"-tooltip-body\",\n    ref: contentRef\n  }, React.createElement(Arrow, {\n    customClassName: theme.prefixClass + \"-tooltip-body-arrow\",\n    position: position\n  }), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-tooltip-body-content\"\n  }, children));\n};\n\nvar Tooltip = function (_a) {\n  var content = _a.content,\n      offset = _a.offset,\n      position = _a.position,\n      target = _a.target;\n  var targetRef = React.createRef();\n\n  var renderTarget = function (toggle) {\n    var show = function () {\n      toggle(ToggleStatus.Open);\n    };\n\n    var hide = function () {\n      toggle(ToggleStatus.Close);\n    };\n\n    return React.createElement(\"div\", {\n      ref: targetRef,\n      onMouseEnter: show,\n      onMouseLeave: hide\n    }, target);\n  };\n\n  var renderContent = function () {\n    return React.createElement(TooltipBody, {\n      offset: offset,\n      position: position,\n      targetRef: targetRef\n    }, content());\n  };\n\n  return React.createElement(Portal, {\n    target: renderTarget,\n    content: renderContent\n  });\n};\n\nvar ScrollMode;\n\n(function (ScrollMode) {\n  ScrollMode[\"Horizontal\"] = \"Horizontal\";\n  ScrollMode[\"Vertical\"] = \"Vertical\";\n  ScrollMode[\"Wrapped\"] = \"Wrapped\";\n})(ScrollMode || (ScrollMode = {}));\n\nvar ScrollMode$1 = ScrollMode;\nvar SelectionMode;\n\n(function (SelectionMode) {\n  SelectionMode[SelectionMode[\"Hand\"] = 0] = \"Hand\";\n  SelectionMode[SelectionMode[\"Text\"] = 1] = \"Text\";\n})(SelectionMode || (SelectionMode = {}));\n\nvar SelectionMode$1 = SelectionMode;\nvar SpecialZoomLevel;\n\n(function (SpecialZoomLevel) {\n  SpecialZoomLevel[\"ActualSize\"] = \"ActualSize\";\n  SpecialZoomLevel[\"PageFit\"] = \"PageFit\";\n  SpecialZoomLevel[\"PageWidth\"] = \"PageWidth\";\n})(SpecialZoomLevel || (SpecialZoomLevel = {}));\n\nvar SpecialZoomLevel$1 = SpecialZoomLevel;\n\nvar useDragScroll = function (ref) {\n  var theme = React.useContext(ThemeContext);\n\n  var _a = React.useState(false),\n      enabled = _a[0],\n      setEnabled = _a[1];\n\n  var pos = React.useRef({\n    top: 0,\n    left: 0,\n    x: 0,\n    y: 0\n  });\n\n  var onMouseMoveHandler = function (e) {\n    var ele = ref.current;\n\n    if (!ele) {\n      return;\n    }\n\n    ele.scrollTop = pos.current.top - (e.clientY - pos.current.y);\n    ele.scrollLeft = pos.current.left - (e.clientX - pos.current.x);\n  };\n\n  var onMouseUpHandler = function () {\n    var ele = ref.current;\n\n    if (!ele) {\n      return;\n    }\n\n    ele.classList.add(theme.prefixClass + \"-grab\");\n    ele.classList.remove(theme.prefixClass + \"-grabbing\");\n    document.removeEventListener('mousemove', onMouseMoveHandler);\n    document.removeEventListener('mouseup', onMouseUpHandler);\n  };\n\n  var onMouseDownHandler = function (e) {\n    var ele = ref.current;\n\n    if (!enabled || !ele) {\n      return;\n    }\n\n    ele.classList.remove(theme.prefixClass + \"-grab\");\n    ele.classList.add(theme.prefixClass + \"-grabbing\");\n    e.preventDefault();\n    e.stopPropagation();\n    pos.current = {\n      left: ele.scrollLeft,\n      top: ele.scrollTop,\n      x: e.clientX,\n      y: e.clientY\n    };\n    document.addEventListener('mousemove', onMouseMoveHandler);\n    document.addEventListener('mouseup', onMouseUpHandler);\n  };\n\n  React.useEffect(function () {\n    var ele = ref.current;\n\n    if (!ele) {\n      return;\n    }\n\n    enabled ? ele.classList.add(theme.prefixClass + \"-grab\") : ele.classList.remove(theme.prefixClass + \"-grab\");\n    ele.addEventListener('mousedown', onMouseDownHandler);\n    return function () {\n      ele.removeEventListener('mousedown', onMouseDownHandler);\n    };\n  }, [enabled]);\n  return {\n    toggleDragScroll: setEnabled\n  };\n};\n\nvar useDrop = function (ref, onDrop) {\n  var dragCount = React.useRef(0);\n\n  var _a = React.useState(false),\n      isDragging = _a[0],\n      setDragging = _a[1];\n\n  var onDropHandler = function (e) {\n    e.preventDefault();\n    setDragging(false);\n    dragCount.current = 0;\n\n    if (e.dataTransfer) {\n      onDrop(e.dataTransfer.files);\n    }\n  };\n\n  var onDragOverHandler = function (e) {\n    e.preventDefault();\n  };\n\n  var onDragEnterHandler = function (e) {\n    e.preventDefault();\n    dragCount.current += 1;\n\n    if (dragCount.current <= 1) {\n      setDragging(true);\n    }\n  };\n\n  var onDragLeaveHandler = function (e) {\n    e.preventDefault();\n    dragCount.current -= 1;\n\n    if (dragCount.current <= 0) {\n      setDragging(false);\n    }\n  };\n\n  React.useEffect(function () {\n    var ele = ref.current;\n\n    if (!ele) {\n      return;\n    }\n\n    ele.addEventListener('drop', onDropHandler);\n    ele.addEventListener('dragover', onDragOverHandler);\n    ele.addEventListener('dragenter', onDragEnterHandler);\n    ele.addEventListener('dragleave', onDragLeaveHandler);\n    return function () {\n      ele.removeEventListener('drop', onDropHandler);\n      ele.removeEventListener('dragover', onDragOverHandler);\n      ele.removeEventListener('dragenter', onDragEnterHandler);\n      ele.removeEventListener('dragleave', onDragLeaveHandler);\n    };\n  }, [ref.current]);\n  return {\n    isDragging: isDragging\n  };\n};\n\nvar Api;\n\n(function (Api) {\n  Api[Api[\"ExitFullScreen\"] = 0] = \"ExitFullScreen\";\n  Api[Api[\"FullScreenChange\"] = 1] = \"FullScreenChange\";\n  Api[Api[\"FullScreenElement\"] = 2] = \"FullScreenElement\";\n  Api[Api[\"FullScreenEnabled\"] = 3] = \"FullScreenEnabled\";\n  Api[Api[\"RequestFullScreen\"] = 4] = \"RequestFullScreen\";\n})(Api || (Api = {}));\n\nvar defaultVendor = {\n  ExitFullScreen: 'exitFullscreen',\n  FullScreenChange: 'fullscreenchange',\n  FullScreenElement: 'fullscreenElement',\n  FullScreenEnabled: 'fullscreenEnabled',\n  RequestFullScreen: 'requestFullscreen'\n};\nvar webkitVendor = {\n  ExitFullScreen: 'webkitExitFullscreen',\n  FullScreenChange: 'webkitfullscreenchange',\n  FullScreenElement: 'webkitFullscreenElement',\n  FullScreenEnabled: 'webkitFullscreenEnabled',\n  RequestFullScreen: 'webkitRequestFullscreen'\n};\nvar msVendor = {\n  ExitFullScreen: 'msExitFullscreen',\n  FullScreenChange: 'MSFullscreenChange',\n  FullScreenElement: 'msFullscreenElement',\n  FullScreenEnabled: 'msFullscreenEnabled',\n  RequestFullScreen: 'msRequestFullscreen'\n};\nvar isBrowser = typeof window !== 'undefined';\nvar vendor = isBrowser ? Api.FullScreenEnabled in document && defaultVendor || webkitVendor.FullScreenEnabled in document && webkitVendor || msVendor.FullScreenEnabled in document && msVendor || defaultVendor : defaultVendor;\n\nvar addFullScreenChangeListener = function (handler) {\n  if (isBrowser) {\n    document.addEventListener(vendor.FullScreenChange, handler);\n  }\n};\n\nvar removeFullScreenChangeListener = function (handler) {\n  if (isBrowser) {\n    document.removeEventListener(vendor.FullScreenChange, handler);\n  }\n};\n\nvar exitFullScreen = function (element) {\n  return isBrowser ? element[vendor.ExitFullScreen]() : Promise.resolve({});\n};\n\nvar getFullScreenElement = function () {\n  return isBrowser ? document[vendor.FullScreenElement] : null;\n};\n\nvar requestFullScreen = function (element) {\n  if (isBrowser) {\n    element[vendor.RequestFullScreen]();\n  }\n};\n\nvar useFullScreen = function (ref) {\n  var _a = React.useState(false),\n      isFullScreen = _a[0],\n      setIsFullScreen = _a[1];\n\n  var closeOtherFullScreen = function () {\n    var ele = getFullScreenElement();\n    return ele && ele !== ref.current ? exitFullScreen(ele) : Promise.resolve();\n  };\n\n  var openFullScreen = function () {\n    closeOtherFullScreen().then(function () {\n      if (ref.current) {\n        requestFullScreen(ref.current);\n      }\n    });\n  };\n\n  var closeFullScreen = function () {\n    var ele = getFullScreenElement();\n\n    if (isFullScreen && ele && ele === ref.current) {\n      exitFullScreen(document);\n    }\n  };\n\n  var onFullScreenChange = function () {\n    var ele = getFullScreenElement();\n    setIsFullScreen(ele === ref.current);\n  };\n\n  React.useEffect(function () {\n    addFullScreenChangeListener(onFullScreenChange);\n    return function () {\n      removeFullScreenChangeListener(onFullScreenChange);\n    };\n  }, [ref.current]);\n  return {\n    closeFullScreen: closeFullScreen,\n    isFullScreen: isFullScreen,\n    openFullScreen: openFullScreen\n  };\n};\n\nvar Observer = function (_a) {\n  var children = _a.children,\n      threshold = _a.threshold,\n      onVisibilityChanged = _a.onVisibilityChanged;\n  var containerRef = React.useRef(null);\n  React.useEffect(function () {\n    var io = new IntersectionObserver(function (entries) {\n      entries.forEach(function (entry) {\n        var isVisible = entry.isIntersecting;\n        var ratio = entry.intersectionRatio;\n        onVisibilityChanged({\n          isVisible: isVisible,\n          ratio: ratio\n        });\n      });\n    }, {\n      threshold: threshold || 0\n    });\n    var container = containerRef.current;\n\n    if (!container) {\n      return;\n    }\n\n    io.observe(container);\n    return function () {\n      io.unobserve(container);\n    };\n  }, []);\n  return React.createElement(\"div\", {\n    ref: containerRef\n  }, children);\n};\n\nvar parse = function (pageIndex, destArray) {\n  var bottomOffset;\n  var scale;\n\n  switch (destArray[1].name) {\n    case 'XYZ':\n      bottomOffset = destArray[3];\n      scale = destArray[4];\n      return {\n        bottomOffset: bottomOffset,\n        pageIndex: pageIndex - 1,\n        scaleTo: scale\n      };\n\n    case 'Fit':\n      return {\n        bottomOffset: 0,\n        pageIndex: pageIndex - 1,\n        scaleTo: SpecialZoomLevel$1.PageFit\n      };\n\n    default:\n      return {\n        bottomOffset: 0,\n        pageIndex: pageIndex - 1,\n        scaleTo: 1\n      };\n  }\n};\n\nvar getDestination = function (doc, dest) {\n  return new Promise(function (res) {\n    new Promise(function (resolve) {\n      if (typeof dest === 'string') {\n        doc.getDestination(dest).then(function (destArray) {\n          resolve(destArray);\n        });\n      } else {\n        resolve(dest);\n      }\n    }).then(function (destArray) {\n      doc.getPageIndex(destArray[0]).then(function (pageIndex) {\n        var target = parse(pageIndex, destArray);\n        res(target);\n      });\n    });\n  });\n};\n\nvar WithScale = function (_a) {\n  var callback = _a.callback,\n      children = _a.children,\n      rotation = _a.rotation,\n      scale = _a.scale;\n  React.useEffect(function () {\n    callback();\n  }, [rotation, scale]);\n  return React.createElement(React.Fragment, null, children);\n};\n\nvar AnnotationLayer = function (_a) {\n  var doc = _a.doc,\n      page = _a.page,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      onJumpToDest = _a.onJumpToDest;\n  var containerRef = React.createRef();\n  var theme = React.useContext(ThemeContext);\n\n  var renderAnnotation = function () {\n    var container = containerRef.current;\n\n    if (container) {\n      container.innerHTML = '';\n    }\n\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    page.getAnnotations({\n      intent: 'display'\n    }).then(function (annotations) {\n      if (annotations.length === 0) {\n        return;\n      }\n\n      var linkService = {\n        getDestinationHash: function (dest) {\n          return typeof dest === 'string' ? \"#\" + escape(dest) : \"#\" + escape(JSON.stringify(dest));\n        },\n        navigateTo: function (dest) {\n          getDestination(doc, dest).then(function (target) {\n            var pageIndex = target.pageIndex,\n                bottomOffset = target.bottomOffset,\n                scaleTo = target.scaleTo;\n            onJumpToDest(pageIndex + 1, bottomOffset, scaleTo);\n          });\n        }\n      };\n      var clonedViewPort = viewport.clone({\n        dontFlip: true\n      });\n      PdfJs.AnnotationLayer.render({\n        annotations: annotations,\n        div: container,\n        linkService: linkService,\n        page: page,\n        viewport: clonedViewPort\n      });\n    });\n  };\n\n  return React.createElement(WithScale, {\n    callback: renderAnnotation,\n    rotation: rotation,\n    scale: scale\n  }, React.createElement(\"div\", {\n    className: theme.prefixClass + \"-annotation-layer\",\n    ref: containerRef\n  }));\n};\n\nvar CanvasLayer = function (_a) {\n  var height = _a.height,\n      page = _a.page,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      width = _a.width;\n  var theme = React.useContext(ThemeContext);\n  var canvasRef = React.createRef();\n  var renderTask = React.useRef();\n\n  var renderCanvas = function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var canvasEle = canvasRef.current;\n    var canvasContext = canvasEle.getContext('2d');\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    renderTask.current = page.render({\n      canvasContext: canvasContext,\n      viewport: viewport\n    });\n    renderTask.current.promise.then(function () {}, function () {});\n  };\n\n  return React.createElement(WithScale, {\n    callback: renderCanvas,\n    rotation: rotation,\n    scale: scale\n  }, React.createElement(\"canvas\", {\n    className: theme.prefixClass + \"-canvas-layer\",\n    height: height,\n    ref: canvasRef,\n    width: width\n  }));\n};\n\nvar calculateOffset = function (children, parent) {\n  var top = children.offsetTop;\n  var left = children.offsetLeft;\n  var p = children.parentElement;\n\n  while (p && p !== parent) {\n    top += p.offsetTop;\n    left += p.offsetLeft;\n    p = p.parentElement;\n  }\n\n  return {\n    left: left,\n    top: top\n  };\n};\n\nvar removeNode = function (ele) {\n  var parent = ele.parentNode;\n\n  if (parent) {\n    parent.removeChild(ele);\n  }\n};\n\nvar replaceNode = function (replacementNode, node) {\n  removeNode(replacementNode);\n  var parent = node.parentNode;\n\n  if (parent) {\n    parent.insertBefore(replacementNode, node);\n  }\n\n  removeNode(node);\n};\n\nvar unwrap = function (ele) {\n  var parent = ele.parentNode;\n\n  if (!parent) {\n    return;\n  }\n\n  var range = document.createRange();\n  range.selectNodeContents(ele);\n  replaceNode(range.extractContents(), ele);\n  parent.normalize();\n};\n\nvar wrap = function (ele, startOffset, endOffset) {\n  var range = new Range();\n  range.setStart(ele, startOffset);\n  range.setEnd(ele, endOffset);\n  var wrapper = document.createElement('span');\n  range.surroundContents(wrapper);\n  return wrapper;\n};\n\nvar TextLayer = function (_a) {\n  var keywordRegexp = _a.keywordRegexp,\n      match = _a.match,\n      page = _a.page,\n      pageIndex = _a.pageIndex,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      onJumpToMatch = _a.onJumpToMatch;\n  var theme = React.useContext(ThemeContext);\n  var containerRef = React.createRef();\n  var renderTask = React.useRef();\n  var isRendered = React.useRef(false);\n\n  var empty = function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    var spans = containerEle.querySelectorAll(\"span.\" + theme.prefixClass + \"-text\");\n    var numSpans = spans.length;\n\n    for (var i = 0; i < numSpans; i++) {\n      var span = spans[i];\n      containerEle.removeChild(span);\n    }\n  };\n\n  var highlight = function (span) {\n    var text = span.textContent;\n\n    if (!keywordRegexp.source.trim() || !text) {\n      return;\n    }\n\n    var startOffset = text.search(keywordRegexp);\n    var firstChild = span.firstChild;\n\n    if (startOffset === -1 || !firstChild) {\n      return;\n    }\n\n    var endOffset = startOffset + keywordRegexp.source.length;\n    var wrapper = wrap(firstChild, startOffset, endOffset);\n    wrapper.classList.add(theme.prefixClass + \"-text-highlight\");\n  };\n\n  var unhighlightAll = function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    var highlightNodes = containerEle.querySelectorAll(\"span.\" + theme.prefixClass + \"-text-highlight\");\n    var total = highlightNodes.length;\n\n    for (var i = 0; i < total; i++) {\n      unwrap(highlightNodes[i]);\n    }\n  };\n\n  var scrollToMatch = function () {\n    var containerEle = containerRef.current;\n\n    if (match.pageIndex !== pageIndex || !containerEle) {\n      return;\n    }\n\n    var spans = containerEle.querySelectorAll(\"span.\" + theme.prefixClass + \"-text-highlight\");\n\n    if (match.matchIndex < spans.length) {\n      var span = spans[match.matchIndex];\n\n      var _a = calculateOffset(span, containerEle),\n          top_1 = _a.top,\n          left = _a.left;\n\n      onJumpToMatch(pageIndex, top_1 / scale, left / scale);\n    }\n  };\n\n  var renderText = function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    isRendered.current = false;\n    page.getTextContent().then(function (textContent) {\n      empty();\n      renderTask.current = PdfJs.renderTextLayer({\n        container: containerEle,\n        textContent: textContent,\n        viewport: viewport\n      });\n      renderTask.current.promise.then(function () {\n        isRendered.current = true;\n        var spans = containerEle.childNodes;\n        var numSpans = spans.length;\n\n        if (keywordRegexp) {\n          unhighlightAll();\n        }\n\n        for (var i = 0; i < numSpans; i++) {\n          var span = spans[i];\n          span.classList.add(theme.prefixClass + \"-text\");\n\n          if (keywordRegexp) {\n            highlight(span);\n          }\n        }\n\n        scrollToMatch();\n      }, function () {});\n    });\n  };\n\n  React.useEffect(function () {\n    var containerEle = containerRef.current;\n\n    if (!keywordRegexp || !isRendered.current || !containerEle) {\n      return;\n    }\n\n    unhighlightAll();\n\n    if (keywordRegexp.source.trim()) {\n      var spans = containerEle.querySelectorAll(\"span.\" + theme.prefixClass + \"-text\");\n      var numSpans = spans.length;\n\n      for (var i = 0; i < numSpans; i++) {\n        highlight(spans[i]);\n      }\n    }\n  }, [keywordRegexp, isRendered.current]);\n  React.useEffect(function () {\n    if (isRendered.current) {\n      scrollToMatch();\n    }\n  }, [match]);\n  return React.createElement(WithScale, {\n    callback: renderText,\n    rotation: rotation,\n    scale: scale\n  }, React.createElement(\"div\", {\n    className: theme.prefixClass + \"-text-layer\",\n    ref: containerRef\n  }));\n};\n\nvar PageLayer = function (_a) {\n  var doc = _a.doc,\n      height = _a.height,\n      keywordRegexp = _a.keywordRegexp,\n      match = _a.match,\n      pageIndex = _a.pageIndex,\n      rotation = _a.rotation,\n      scale = _a.scale,\n      width = _a.width,\n      onJumpToDest = _a.onJumpToDest,\n      onPageVisibilityChanged = _a.onPageVisibilityChanged;\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState({\n    isCalculated: false,\n    page: null,\n    pageHeight: height,\n    pageWidth: width\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  var isCalculated = pageSize.isCalculated,\n      page = pageSize.page,\n      pageHeight = pageSize.pageHeight,\n      pageWidth = pageSize.pageWidth;\n  var intersectionThreshold = Array(10).fill(null).map(function (_, i) {\n    return i / 10;\n  });\n  var scaledWidth = pageWidth * scale;\n  var scaledHeight = pageHeight * scale;\n  var isVertical = Math.abs(rotation) % 180 === 0;\n  var w = isVertical ? scaledWidth : scaledHeight;\n  var h = isVertical ? scaledHeight : scaledWidth;\n\n  var visibilityChanged = function (params) {\n    var ratio = params.isVisible ? params.ratio : 0;\n    onPageVisibilityChanged(pageIndex, ratio);\n\n    if (params.isVisible && !isCalculated) {\n      doc.getPage(pageIndex + 1).then(function (pdfPage) {\n        var viewport = pdfPage.getViewport({\n          scale: 1\n        });\n        setPageSize({\n          isCalculated: true,\n          page: pdfPage,\n          pageHeight: viewport.height,\n          pageWidth: viewport.width\n        });\n      });\n    }\n  };\n\n  var jumpToMatch = function (indexOfPage, top, left) {\n    onJumpToDest(indexOfPage, pageHeight - top, scale);\n  };\n\n  return React.createElement(Observer, {\n    onVisibilityChanged: visibilityChanged,\n    threshold: intersectionThreshold\n  }, React.createElement(\"div\", {\n    className: theme.prefixClass + \"-page-layer\",\n    style: {\n      height: h + \"px\",\n      width: w + \"px\"\n    }\n  }, !page ? React.createElement(Spinner, null) : React.createElement(React.Fragment, null, React.createElement(CanvasLayer, {\n    height: h,\n    page: page,\n    rotation: rotation,\n    scale: scale,\n    width: w\n  }), React.createElement(TextLayer, {\n    keywordRegexp: keywordRegexp,\n    match: match,\n    page: page,\n    pageIndex: pageIndex,\n    rotation: rotation,\n    scale: scale,\n    onJumpToMatch: jumpToMatch\n  }), React.createElement(AnnotationLayer, {\n    doc: doc,\n    page: page,\n    rotation: rotation,\n    scale: scale,\n    onJumpToDest: onJumpToDest\n  }))));\n};\n\nvar LocalizationContext = React.createContext({});\n\nvar DropArea = function () {\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n  return React.createElement(\"div\", {\n    className: theme.prefixClass + \"-drop-area\"\n  }, l10n.main.dragDropFile);\n};\n\nvar PrintProgress = function (_a) {\n  var numLoadedPages = _a.numLoadedPages,\n      numPages = _a.numPages,\n      onCancel = _a.onCancel,\n      onStartPrinting = _a.onStartPrinting;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n  var progress = Math.floor(numLoadedPages * 100 / numPages);\n  React.useEffect(function () {\n    if (numLoadedPages === numPages) {\n      onStartPrinting();\n    }\n  }, [numLoadedPages]);\n  return React.createElement(\"div\", {\n    className: theme.prefixClass + \"-print-progress\"\n  }, React.createElement(\"div\", {\n    className: theme.prefixClass + \"-print-progress-inner\"\n  }, React.createElement(\"div\", {\n    className: theme.prefixClass + \"-print-progress-message\"\n  }, l10n.printProgress.preparingDocument), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-print-progress-bar\"\n  }, React.createElement(ProgressBar, {\n    progress: progress\n  })), React.createElement(PrimaryButton, {\n    onClick: onCancel\n  }, l10n.printProgress.cancel)));\n};\n\nvar PrintStatus;\n\n(function (PrintStatus) {\n  PrintStatus[\"Inactive\"] = \"Inactive\";\n  PrintStatus[\"Preparing\"] = \"Preparing\";\n  PrintStatus[\"Cancelled\"] = \"Cancelled\";\n  PrintStatus[\"Ready\"] = \"Ready\";\n})(PrintStatus || (PrintStatus = {}));\n\nvar PrintStatus$1 = PrintStatus;\n\nvar PageThumbnail = function (_a) {\n  var page = _a.page,\n      pageHeight = _a.pageHeight,\n      pageWidth = _a.pageWidth,\n      rotation = _a.rotation,\n      onLoad = _a.onLoad;\n  var theme = React.useContext(ThemeContext);\n  var renderTask = React.useRef();\n\n  var _b = React.useState(''),\n      src = _b[0],\n      setSrc = _b[1];\n\n  React.useEffect(function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var canvas = document.createElement('canvas');\n    var printUnit = 150 / 72;\n    canvas.height = Math.floor(pageHeight * printUnit);\n    canvas.width = Math.floor(pageWidth * printUnit);\n    var canvasContext = canvas.getContext('2d');\n    canvasContext.save();\n    canvasContext.fillStyle = 'rgb(255, 255, 255)';\n    canvasContext.fillRect(0, 0, canvas.width, canvas.height);\n    canvasContext.restore();\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: 1\n    });\n    renderTask.current = page.render({\n      canvasContext: canvasContext,\n      intent: 'print',\n      transform: [printUnit, 0, 0, printUnit, 0, 0],\n      viewport: viewport\n    });\n    renderTask.current.promise.then(function () {\n      'toBlob' in canvas ? canvas.toBlob(function (blob) {\n        setSrc(URL.createObjectURL(blob));\n      }) : setSrc(canvas.toDataURL());\n    }, function () {});\n  }, []);\n  return !src ? React.createElement(Spinner, null) : React.createElement(\"div\", {\n    className: theme.prefixClass + \"-print-page-thumbnail\",\n    style: {\n      height: Math.floor(pageHeight * 96 / 72) + \"px\",\n      width: Math.floor(pageWidth * 96 / 72) + \"px\"\n    }\n  }, React.createElement(\"img\", {\n    src: src,\n    style: {\n      height: Math.floor(pageHeight * 96 / 72) + \"px\",\n      width: Math.floor(pageWidth * 96 / 72) + \"px\"\n    },\n    onLoad: onLoad\n  }));\n};\n\nvar PageThumbnailContainer = function (_a) {\n  var doc = _a.doc,\n      pageHeight = _a.pageHeight,\n      pageIndex = _a.pageIndex,\n      pageWidth = _a.pageWidth,\n      rotation = _a.rotation,\n      onLoad = _a.onLoad;\n\n  var _b = React.useState({\n    height: pageHeight,\n    page: null,\n    width: pageWidth\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  var page = pageSize.page,\n      height = pageSize.height,\n      width = pageSize.width;\n  var isVertical = Math.abs(rotation) % 180 === 0;\n  React.useEffect(function () {\n    doc.getPage(pageIndex + 1).then(function (pdfPage) {\n      var viewport = pdfPage.getViewport({\n        scale: 1\n      });\n      setPageSize({\n        height: viewport.height,\n        page: pdfPage,\n        width: viewport.width\n      });\n    });\n  }, []);\n  return !page ? React.createElement(Spinner, null) : React.createElement(PageThumbnail, {\n    page: page,\n    pageHeight: isVertical ? height : width,\n    pageWidth: isVertical ? width : height,\n    rotation: rotation,\n    onLoad: onLoad\n  });\n};\n\nvar PrintZone = function (_a) {\n  var doc = _a.doc,\n      pageHeight = _a.pageHeight,\n      pageWidth = _a.pageWidth,\n      printStatus = _a.printStatus,\n      rotation = _a.rotation,\n      onCancel = _a.onCancel,\n      onLoad = _a.onLoad;\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState(0),\n      numLoadedPages = _b[0],\n      setNumLoadedPages = _b[1];\n\n  React.useEffect(function () {\n    if (printStatus === PrintStatus$1.Ready) {\n      document.body.classList.add(theme.prefixClass + \"-body-printing\");\n      window.print();\n    }\n\n    var handler = function () {\n      if (printStatus === PrintStatus$1.Ready) {\n        document.body.classList.remove(theme.prefixClass + \"-body-printing\");\n        onCancel();\n      }\n    };\n\n    document.addEventListener('mousemove', handler);\n    return function () {\n      return document.removeEventListener('mousemove', handler);\n    };\n  }, [printStatus]);\n  var numPages = doc.numPages;\n\n  var loadPage = function () {\n    var total = numLoadedPages + 1;\n    setNumLoadedPages(total);\n    onLoad(total);\n  };\n\n  return ReactDOM.createPortal(React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: theme.prefixClass + \"-print-zone\"\n  }, Array(numPages).fill(0).map(function (_, index) {\n    return React.createElement(PageThumbnailContainer, {\n      key: index,\n      doc: doc,\n      pageHeight: pageHeight,\n      pageIndex: index,\n      pageWidth: pageWidth,\n      rotation: rotation,\n      onLoad: loadPage\n    });\n  })), React.createElement(\"style\", {\n    dangerouslySetInnerHTML: {\n      __html: \"\\n                            @supports ((size:A4) and (size:1pt 1pt)) {\\n                                @page { size: \" + pageWidth + \"pt \" + pageHeight + \"pt }\\n                            }\\n                        \"\n    }\n  })), document.body);\n};\n\nvar PrintContainer = function (_a) {\n  var doc = _a.doc,\n      pageHeight = _a.pageHeight,\n      pageWidth = _a.pageWidth,\n      printStatus = _a.printStatus,\n      rotation = _a.rotation,\n      onCancel = _a.onCancel,\n      onStartPrinting = _a.onStartPrinting;\n\n  var _b = React.useState(0),\n      numLoadedPagesForPrint = _b[0],\n      setNumLoadedPagesForPrint = _b[1];\n\n  var cancelPrinting = function () {\n    setNumLoadedPagesForPrint(0);\n    onCancel();\n  };\n\n  var startPrinting = function () {\n    setNumLoadedPagesForPrint(0);\n    onStartPrinting();\n  };\n\n  return React.createElement(React.Fragment, null, printStatus === PrintStatus$1.Preparing && React.createElement(PrintProgress, {\n    numLoadedPages: numLoadedPagesForPrint,\n    numPages: doc.numPages,\n    onCancel: cancelPrinting,\n    onStartPrinting: startPrinting\n  }), (printStatus === PrintStatus$1.Preparing || printStatus === PrintStatus$1.Ready) && React.createElement(PrintZone, {\n    doc: doc,\n    pageHeight: pageHeight,\n    pageWidth: pageWidth,\n    printStatus: printStatus,\n    rotation: rotation,\n    onCancel: cancelPrinting,\n    onLoad: setNumLoadedPagesForPrint\n  }));\n};\n\nvar fileName = function (url) {\n  var str = url.split('/').pop();\n  return str ? str.split('#')[0].split('?')[0] : url;\n};\n\nvar downloadFile = function (url, data) {\n  var blobUrl = typeof data === 'string' ? '' : URL.createObjectURL(new Blob([data], {\n    type: ''\n  }));\n  var link = document.createElement('a');\n  link.style.display = 'none';\n  link.href = blobUrl || url;\n  link.setAttribute('download', fileName(url));\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n\n  if (blobUrl) {\n    URL.revokeObjectURL(blobUrl);\n  }\n};\n\nvar getFileExt = function (url) {\n  var str = url.split(/\\./).pop();\n  return str ? str.toLowerCase() : '';\n};\n\nvar ExitFullScreenIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M10.515,9.514h3c0.552,0,1,0.448,1,1v3c0,0.552-0.448,1-1,1h-3c-0.552,0-1-0.448-1-1v-3\\n                C9.515,9.962,9.963,9.514,10.515,9.514z\\n                M0.531,23.499l6.984-6.985\\n                M16.515,7.514L23.5,0.529\\n                M21.515,7.514h-5v-5\\n                M7.515,21.514v-5 h-5\\n                M0.523,0.521l6.992,6.993\\n                M16.515,16.514l6.985,6.985\\n                M16.515,21.514v-5h5\\n                M2.515,7.514h5v-5\"\n  }));\n};\n\nvar ExitFullScreen = function (_a) {\n  var onClick = _a.onClick;\n  var theme = React.useContext(ThemeContext);\n  return React.createElement(\"div\", {\n    className: theme.prefixClass + \"-exit-fullscreen\"\n  }, React.createElement(\"div\", {\n    className: theme.prefixClass + \"-exit-fullscreen-inner\"\n  }, React.createElement(Button, {\n    onClick: onClick\n  }, React.createElement(ExitFullScreenIcon, null))));\n};\n\nvar AttachmentList = function (_a) {\n  var files = _a.files;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n\n  var renderItem = function (file) {\n    var onClick = function () {\n      return downloadFile(file.fileName, file.data);\n    };\n\n    return React.createElement(\"li\", {\n      className: theme.prefixClass + \"-attachment-item\",\n      key: \"attachment-\" + file.fileName,\n      title: \"\" + l10n.attachment.clickToDownload,\n      onClick: onClick\n    }, file.fileName);\n  };\n\n  return files.length === 0 ? React.createElement(\"div\", {\n    className: theme.prefixClass + \"-attachment-list-empty\"\n  }, l10n.attachment.noAttachment) : React.createElement(\"ul\", {\n    className: theme.prefixClass + \"-attachment-list\"\n  }, files.map(renderItem));\n};\n\nvar AttachmentLoader = function (_a) {\n  var doc = _a.doc;\n\n  var _b = React.useState({\n    files: [],\n    isLoaded: false\n  }),\n      attachments = _b[0],\n      setAttachments = _b[1];\n\n  React.useEffect(function () {\n    doc.getAttachments().then(function (response) {\n      var files = response ? Object.keys(response).map(function (file) {\n        return {\n          data: response[file].content,\n          fileName: response[file].filename\n        };\n      }) : [];\n      setAttachments({\n        files: files,\n        isLoaded: true\n      });\n    });\n  }, []);\n  return !attachments.isLoaded ? React.createElement(Spinner, null) : React.createElement(AttachmentList, {\n    files: attachments.files\n  });\n};\n\nvar BookmarkItem = function (_a) {\n  var bookmark = _a.bookmark,\n      depth = _a.depth,\n      doc = _a.doc,\n      onClick = _a.onClick,\n      onJumpToDest = _a.onJumpToDest;\n  var theme = React.useContext(ThemeContext);\n  var toggleRef = React.createRef();\n  var subItemRef = React.createRef();\n  var subItemsDisplayed = React.useRef(true);\n  var hasSubItems = bookmark.items && bookmark.items.length > 0;\n\n  var toggleSubItems = function () {\n    subItemsDisplayed.current = !subItemsDisplayed.current;\n    var subItemsEle = subItemRef.current;\n    var toggleEle = toggleRef.current;\n\n    if (!subItemsEle || !toggleEle) {\n      return;\n    }\n\n    subItemsEle.style.display = subItemsDisplayed.current ? 'block' : 'none';\n    toggleEle.classList.toggle(theme.prefixClass + \"-bookmark-toggle-expanded\");\n  };\n\n  var clickBookmak = function () {\n    if (hasSubItems) {\n      onClick(bookmark.dest);\n    }\n  };\n\n  var clickItem = function () {\n    if (!hasSubItems) {\n      onClick(bookmark.dest);\n    }\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: theme.prefixClass + \"-bookmark-item\",\n    style: {\n      paddingLeft: depth * 20 + 4 + \"px\"\n    },\n    onClick: clickItem\n  }, hasSubItems && React.createElement(\"span\", {\n    ref: toggleRef,\n    className: theme.prefixClass + \"-bookmark-toggle\",\n    onClick: toggleSubItems\n  }, \"\\u25BA\"), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-bookmark-title\",\n    onClick: clickBookmak\n  }, bookmark.title)), hasSubItems && React.createElement(\"div\", {\n    ref: subItemRef\n  }, React.createElement(BookmarkList, {\n    bookmarks: bookmark.items,\n    depth: depth + 1,\n    doc: doc,\n    onJumpToDest: onJumpToDest\n  })));\n};\n\nvar BookmarkList = function (_a) {\n  var bookmarks = _a.bookmarks,\n      _b = _a.depth,\n      depth = _b === void 0 ? 0 : _b,\n      doc = _a.doc,\n      onJumpToDest = _a.onJumpToDest;\n  var theme = React.useContext(ThemeContext);\n\n  var jumpToDest = function (dest) {\n    getDestination(doc, dest).then(function (target) {\n      var pageIndex = target.pageIndex,\n          bottomOffset = target.bottomOffset,\n          scaleTo = target.scaleTo;\n      onJumpToDest(pageIndex + 1, bottomOffset, scaleTo);\n    });\n  };\n\n  return React.createElement(\"ul\", {\n    className: theme.prefixClass + \"-bookmark-list\"\n  }, bookmarks.map(function (bookmark, index) {\n    return React.createElement(\"li\", {\n      key: index\n    }, React.createElement(BookmarkItem, {\n      bookmark: bookmark,\n      depth: depth,\n      doc: doc,\n      onClick: jumpToDest,\n      onJumpToDest: onJumpToDest\n    }));\n  }));\n};\n\nvar BookmarkLoader = function (_a) {\n  var doc = _a.doc,\n      onJumpToDest = _a.onJumpToDest;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState({\n    isLoaded: false,\n    items: []\n  }),\n      bookmarks = _b[0],\n      setBookmarks = _b[1];\n\n  React.useEffect(function () {\n    doc.getOutline().then(function (outline) {\n      setBookmarks({\n        isLoaded: true,\n        items: outline || []\n      });\n    });\n  }, []);\n  return !bookmarks.isLoaded ? React.createElement(Spinner, null) : bookmarks.items.length === 0 ? React.createElement(\"div\", {\n    className: theme.prefixClass + \"-bookmark-empty\"\n  }, l10n.bookmark.noBookmark) : React.createElement(BookmarkList, {\n    bookmarks: bookmarks.items,\n    depth: 0,\n    doc: doc,\n    onJumpToDest: onJumpToDest\n  });\n};\n\nvar BookmarkIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M11.5,1.5h11c0.552,0,1,0.448,1,1v20c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h3\\n                M11.5,10.5c0,0.55-0.3,0.661-0.659,0.248L8,7.5l-2.844,3.246c-0.363,0.414-0.659,0.3-0.659-0.247v-9c0-0.552,0.448-1,1-1h5\\n                c0.552,0,1,0.448,1,1L11.5,10.5z\\n                M14.5,6.499h6\\n                M14.5,10.499h6\\n                M3.5,14.499h17\\n                M3.5,18.499h16.497\"\n  }));\n};\n\nvar FileIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M7.618,15.345l8.666-8.666c0.78-0.812,2.071-0.838,2.883-0.058s0.838,2.071,0.058,2.883\\n                c-0.019,0.02-0.038,0.039-0.058,0.058L7.461,21.305c-1.593,1.593-4.175,1.592-5.767,0s-1.592-4.175,0-5.767c0,0,0,0,0,0\\n                L13.928,3.305c2.189-2.19,5.739-2.19,7.929-0.001s2.19,5.739,0,7.929l0,0L13.192,19.9\"\n  }));\n};\n\nvar WrappedScrollingIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\\n                M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\\n                M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z\\n                M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z\"\n  }));\n};\n\nvar ThumbnailItem = function (_a) {\n  var page = _a.page,\n      pageHeight = _a.pageHeight,\n      pageWidth = _a.pageWidth,\n      rotation = _a.rotation,\n      thumbnailHeight = _a.thumbnailHeight,\n      thumbnailWidth = _a.thumbnailWidth;\n  var renderTask = React.useRef();\n\n  var _b = React.useState(''),\n      src = _b[0],\n      setSrc = _b[1];\n\n  React.useEffect(function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var canvas = document.createElement('canvas');\n    var canvasContext = canvas.getContext('2d', {\n      alpha: false\n    });\n    var w = thumbnailWidth;\n    var h = w / (pageWidth / pageHeight);\n    var scale = w / pageWidth;\n    canvas.height = h;\n    canvas.width = w;\n    canvas.style.height = h + \"px\";\n    canvas.style.width = w + \"px\";\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: scale\n    });\n    renderTask.current = page.render({\n      canvasContext: canvasContext,\n      viewport: viewport\n    });\n    renderTask.current.promise.then(function () {\n      return setSrc(canvas.toDataURL());\n    }, function () {});\n  }, [rotation]);\n  return !src ? React.createElement(Spinner, null) : React.createElement(\"img\", {\n    src: src,\n    height: thumbnailHeight + \"px\",\n    width: thumbnailWidth + \"px\"\n  });\n};\n\nvar THUMBNAIL_WIDTH = 100;\n\nvar ThumbnailContainer = function (_a) {\n  var doc = _a.doc,\n      pageHeight = _a.pageHeight,\n      pageIndex = _a.pageIndex,\n      pageWidth = _a.pageWidth,\n      rotation = _a.rotation;\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState({\n    height: pageHeight,\n    isCalculated: false,\n    page: null,\n    width: pageWidth\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  var isCalculated = pageSize.isCalculated,\n      page = pageSize.page,\n      height = pageSize.height,\n      width = pageSize.width;\n  var scale = width / height;\n  var isVertical = Math.abs(rotation) % 180 === 0;\n  var w = isVertical ? THUMBNAIL_WIDTH : THUMBNAIL_WIDTH / scale;\n  var h = isVertical ? THUMBNAIL_WIDTH / scale : THUMBNAIL_WIDTH;\n\n  var onVisibilityChanged = function (params) {\n    if (params.isVisible && !isCalculated) {\n      doc.getPage(pageIndex + 1).then(function (pdfPage) {\n        var viewport = pdfPage.getViewport({\n          scale: 1\n        });\n        setPageSize({\n          height: viewport.height,\n          isCalculated: true,\n          page: pdfPage,\n          width: viewport.width\n        });\n      });\n    }\n  };\n\n  return React.createElement(Observer, {\n    onVisibilityChanged: onVisibilityChanged\n  }, React.createElement(\"div\", {\n    className: theme.prefixClass + \"-thumbnail-container\",\n    style: {\n      height: h + \"px\",\n      width: w + \"px\"\n    }\n  }, !page ? React.createElement(Spinner, null) : React.createElement(ThumbnailItem, {\n    page: page,\n    pageHeight: isVertical ? height : width,\n    pageWidth: isVertical ? width : height,\n    rotation: rotation,\n    thumbnailHeight: h,\n    thumbnailWidth: w\n  })));\n};\n\nvar ThumbnailList = function (_a) {\n  var currentPage = _a.currentPage,\n      doc = _a.doc,\n      pageHeight = _a.pageHeight,\n      pageWidth = _a.pageWidth,\n      rotation = _a.rotation,\n      onJumpToPage = _a.onJumpToPage;\n  var theme = React.useContext(ThemeContext);\n  var numPages = doc.numPages;\n  return React.createElement(React.Fragment, null, Array(numPages).fill(0).map(function (_, index) {\n    var _a;\n\n    var onClick = function () {\n      return onJumpToPage(index);\n    };\n\n    return React.createElement(\"div\", {\n      key: \"thumbnail-\" + index\n    }, React.createElement(\"div\", {\n      className: classNames((_a = {}, _a[theme.prefixClass + \"-thumbnail\"] = true, _a[theme.prefixClass + \"-thumbnail-selected\"] = currentPage === index, _a)),\n      onClick: onClick\n    }, React.createElement(ThumbnailContainer, {\n      doc: doc,\n      pageHeight: pageHeight,\n      pageIndex: index,\n      pageWidth: pageWidth,\n      rotation: rotation\n    })));\n  }));\n};\n\nvar Tab;\n\n(function (Tab) {\n  Tab[\"Attachment\"] = \"Attachment\";\n  Tab[\"Bookmark\"] = \"Bookmark\";\n  Tab[\"Thumbnail\"] = \"Thumbnail\";\n})(Tab || (Tab = {}));\n\nvar TOOLTIP_OFFSET = {\n  left: 0,\n  top: 8\n};\n\nvar Sidebar = function (_a) {\n  var _b;\n\n  var currentPage = _a.currentPage,\n      doc = _a.doc,\n      height = _a.height,\n      rotation = _a.rotation,\n      width = _a.width,\n      onJumpToDest = _a.onJumpToDest,\n      onJumpToPage = _a.onJumpToPage;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n\n  var _c = React.useState(Tab.Thumbnail),\n      tab = _c[0],\n      setTab = _c[1];\n\n  var clickThumbnailTab = function () {\n    return setTab(Tab.Thumbnail);\n  };\n\n  var clickBookmarkTab = function () {\n    return setTab(Tab.Bookmark);\n  };\n\n  var clickAttachmentTab = function () {\n    return setTab(Tab.Attachment);\n  };\n\n  var renderAttachmentTip = function () {\n    return l10n.sidebar.attachment;\n  };\n\n  var renderBookmarkTip = function () {\n    return l10n.sidebar.bookmark;\n  };\n\n  var renderThumbnailTip = function () {\n    return l10n.sidebar.thumbnail;\n  };\n\n  return React.createElement(\"div\", {\n    className: theme.prefixClass + \"-sidebar\"\n  }, React.createElement(\"div\", {\n    className: theme.prefixClass + \"-sidebar-tabs\"\n  }, React.createElement(\"div\", {\n    className: theme.prefixClass + \"-sidebar-tab\"\n  }, React.createElement(Tooltip, {\n    position: Position$1.BottomCenter,\n    target: React.createElement(Button, {\n      onClick: clickThumbnailTab,\n      isSelected: tab === Tab.Thumbnail\n    }, React.createElement(WrappedScrollingIcon, null)),\n    content: renderThumbnailTip,\n    offset: TOOLTIP_OFFSET\n  })), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-sidebar-tab\"\n  }, React.createElement(Tooltip, {\n    position: Position$1.BottomCenter,\n    target: React.createElement(Button, {\n      onClick: clickBookmarkTab,\n      isSelected: tab === Tab.Bookmark\n    }, React.createElement(BookmarkIcon, null)),\n    content: renderBookmarkTip,\n    offset: TOOLTIP_OFFSET\n  })), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-sidebar-tab\"\n  }, React.createElement(Tooltip, {\n    position: Position$1.BottomCenter,\n    target: React.createElement(Button, {\n      onClick: clickAttachmentTab,\n      isSelected: tab === Tab.Attachment\n    }, React.createElement(FileIcon, null)),\n    content: renderAttachmentTip,\n    offset: TOOLTIP_OFFSET\n  }))), React.createElement(\"div\", {\n    className: classNames((_b = {}, _b[theme.prefixClass + \"-sidebar-content\"] = true, _b[theme.prefixClass + \"-sidebar-thumbnails\"] = tab === Tab.Thumbnail, _b))\n  }, tab === Tab.Thumbnail && React.createElement(ThumbnailList, {\n    currentPage: currentPage,\n    doc: doc,\n    pageHeight: height,\n    pageWidth: width,\n    rotation: rotation,\n    onJumpToPage: onJumpToPage\n  }), tab === Tab.Bookmark && React.createElement(BookmarkLoader, {\n    doc: doc,\n    onJumpToDest: onJumpToDest\n  }), tab === Tab.Attachment && React.createElement(AttachmentLoader, {\n    doc: doc\n  })));\n};\n\nvar DownArrowIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M2.32,2.966h19.452c0.552,0.001,1,0.449,0.999,1.001c0,0.182-0.05,0.36-0.144,0.516L12.9,20.552\\n                c-0.286,0.472-0.901,0.624-1.373,0.338c-0.138-0.084-0.254-0.2-0.338-0.338L1.465,4.483C1.179,4.01,1.331,3.396,1.804,3.11\\n                C1.96,3.016,2.138,2.966,2.32,2.966z\"\n  }));\n};\n\nvar DownloadIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M17.5,11.5c3.314,0,6,2.686,6,6s-2.686,6-6,6s-6-2.686-6-6S14.186,11.5,17.5,11.5z\\n                M17.5,14.5v6\\n                M17.5,20.5\\n                l-2.25-2.25\\n                M17.5,20.5l2.25-2.25\\n                M10.5,23.5h-9c-0.552,0-1-0.448-1-1v-21c0-0.552,0.448-1,1-1h13.293\\n                c0.265,0,0.52,0.105,0.707,0.293L19.207,4.5C19.395,4.687,19.5,4.942,19.5,5.207V8.5\"\n  }));\n};\n\nvar FullScreenIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M15.5,8.499l8-8\\n                M0.5,23.499l8-8\\n                M5.5,23.499h-5v-5\\n                M23.5,5.499v-5h-5\\n                M15.5,15.499l8,8\\n                M0.5,0.499l8,8\\n                M0.5,5.499v-5h5\\n                M18.5,23.499h5v-5\"\n  }));\n};\n\nvar HandToolIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M11.5,5.5v-2C11.5,2.672,12.172,2,13,2s1.5,0.672,1.5,1.5v2 M14.5,11.5v-6C14.5,4.672,15.172,4,16,4\\n                c0.828,0,1.5,0.672,1.5,1.5v3 M17.5,13V8.5C17.5,7.672,18.172,7,19,7s1.5,0.672,1.5,1.5v10c0,2.761-2.239,5-5,5h-3.335\\n                c-1.712-0.001-3.305-0.876-4.223-2.321C6.22,18.467,4.083,14,4.083,14c-0.378-0.545-0.242-1.292,0.303-1.67\\n                c0.446-0.309,1.044-0.281,1.458,0.07L8.5,15.5v-10C8.5,4.672,9.172,4,10,4s1.5,0.672,1.5,1.5v6\"\n  }));\n};\n\nvar HorizontalScrollingIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M6.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z\\n                M14.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z\\n                M22.5,21.5 c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z\"\n  }));\n};\n\nvar InfoIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M12,1.001c6.075,0,11,4.925,11,11s-4.925,11-11,11s-11-4.925-11-11S5.925,1.001,12,1.001z\\n                M14.5,17.005H13\\n                c-0.552,0-1-0.448-1-1v-6.5c0-0.276-0.224-0.5-0.5-0.5H10\\n                M11.745,6.504L11.745,6.504\\n                M11.745,6.5c-0.138,0-0.25,0.112-0.25,0.25\\n                S11.607,7,11.745,7s0.25-0.112,0.25-0.25S11.883,6.5,11.745,6.5\"\n  }));\n};\n\nvar LeftSidebarIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M1.5,0.497h20c0.552,0,1,0.448,1,1v20c0,0.552-0.448,1-1,1h-20c-0.552,0-1-0.448-1-1v-20\\n                C0.5,0.945,0.948,0.497,1.5,0.497z\\n                M7.5,0.497v22\"\n  }));\n};\n\nvar NextIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M0.541,5.627L11.666,18.2c0.183,0.207,0.499,0.226,0.706,0.043c0.015-0.014,0.03-0.028,0.043-0.043\\n                L23.541,5.627\"\n  }));\n};\n\nvar PreviousIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M23.535,18.373L12.409,5.8c-0.183-0.207-0.499-0.226-0.706-0.043C11.688,5.77,11.674,5.785,11.66,5.8\\n                L0.535,18.373\"\n  }));\n};\n\nvar PrintIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M7.5,19.499h9 M7.5,16.499h9 M5.5,16.5h-3c-1.103-0.003-1.997-0.897-2-2v-6c0.003-1.103,0.897-1.997,2-2h19\\n                c1.103,0.003,1.997,0.897,2,2v6c-0.003,1.103-0.897,1.997-2,2h-3\\n                M5.5,4.5v-4h9.586c0.265,0,0.52,0.105,0.707,0.293l2.414,2.414\\n                C18.395,3.394,18.5,3.649,18.5,3.914V4.5\\n                M18.5,22.5c0,0.552-0.448,1-1,1h-11c-0.552,0-1-0.448-1-1v-9h13V22.5z\\n                M3.5,8.499\\n                c0.552,0,1,0.448,1,1s-0.448,1-1,1s-1-0.448-1-1S2.948,8.499,3.5,8.499z\\n                M14.5,0.499v4h4\"\n  }));\n};\n\nvar RotateBackwardIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M3.434,10.537c0.141-0.438,0.316-0.864,0.523-1.274\\n                M3.069,14.425C3.023,14.053,3,13.679,3,13.305 c0-0.291,0.014-0.579,0.041-0.863\\n                M4.389,18.111c-0.341-0.539-0.623-1.112-0.843-1.711\\n                M7.163,20.9 c-0.543-0.345-1.048-0.747-1.506-1.2\\n                M10.98,22.248c-0.65-0.074-1.29-0.218-1.909-0.431\\n                M10,4.25h2 c4.987,0.015,9.017,4.069,9.003,9.055c-0.013,4.581-3.456,8.426-8.008,8.945\\n                M13.5,1.75L10,4.25l3.5,2.5\"\n  }));\n};\n\nvar RotateForwardIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M20.566,10.537c-0.141-0.438-0.316-0.864-0.523-1.274\\n                M20.931,14.425C20.977,14.053,21,13.679,21,13.305 c0-0.291-0.014-0.579-0.041-0.863\\n                M19.611,18.111c0.341-0.539,0.624-1.114,0.843-1.713\\n                M16.837,20.9 c0.543-0.345,1.048-0.747,1.506-1.2\\n                M13.02,22.248c0.65-0.074,1.29-0.218,1.909-0.431\\n                M14,4.25h-2 c-4.987,0.015-9.017,4.069-9.003,9.055c0.013,4.581,3.456,8.426,8.008,8.945\\n                M10.5,1.75l3.5,2.5l-3.5,2.5\"\n  }));\n};\n\nvar TextSelectionIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M13.675,11.671l2.941-2.941c0.195-0.196,0.195-0.512-0.001-0.707C16.563,7.971,16.5,7.931,16.43,7.906\\n                L4.168,3.527C3.908,3.434,3.622,3.57,3.529,3.83c-0.039,0.109-0.039,0.228,0,0.336l4.379,12.262\\n                c0.093,0.26,0.379,0.396,0.639,0.303c0.07-0.025,0.133-0.065,0.185-0.117l2.943-2.943l6.146,6.146c0.195,0.195,0.512,0.195,0.707,0\\n                l1.293-1.293c0.195-0.195,0.195-0.512,0-0.707L13.675,11.671z\"\n  }));\n};\n\nvar UpArrowIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M21.783,21.034H2.332c-0.552,0-1-0.448-1-1c0-0.182,0.05-0.361,0.144-0.517L11.2,3.448\\n                c0.286-0.472,0.901-0.624,1.373-0.338c0.138,0.084,0.254,0.2,0.338,0.338l9.726,16.069c0.286,0.473,0.134,1.087-0.339,1.373\\n                C22.143,20.984,21.965,21.034,21.783,21.034z\"\n  }));\n};\n\nvar VerticalScrollingIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M23.5,5.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V5.5z\\n                M23.5,13.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V13.5z\\n                M23.5,21.5 c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V21.5z\"\n  }));\n};\n\nvar ZoomInIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z\\n                M23.5,23.499\\n                l-5.929-5.929\\n                M5.5,10.499h10\\n                M10.5,5.499v10\"\n  }));\n};\n\nvar ZoomOutIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z\\n                M23.5,23.499\\n                l-5.929-5.929\\n                M5.5,10.499h10\"\n  }));\n};\n\nvar OpenFileIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M4.5,8.5H14\\n                M4.5,11.5h6\\n                M4.5,5.5h7\\n                M4.5,14.5h4\\n                M4.5,17.5h4\\n                M10.5,23.5h-9c-0.552,0-1-0.448-1-1v-21\\n                c0-0.552,0.448-1,1-1h13.293c0.265,0,0.52,0.105,0.707,0.293L19.207,4.5C19.395,4.687,19.5,4.942,19.5,5.207V8.5\\n                M17.5,11.5\\n                c3.314,0,6,2.686,6,6s-2.686,6-6,6s-6-2.686-6-6S14.186,11.5,17.5,11.5z\\n                M17.5,20.5v-6\\n                M17.5,14.5l-2.25,2.25\\n                M17.5,14.5l2.25,2.25\"\n  }));\n};\n\nvar TOOLTIP_OFFSET$1 = {\n  left: 0,\n  top: 8\n};\n\nvar OpenFileButton = function (_a) {\n  var onOpenFiles = _a.onOpenFiles;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n\n  var openFiles = function (e) {\n    var files = e.target.files;\n\n    if (files) {\n      onOpenFiles(files);\n    }\n  };\n\n  var renderContent = function () {\n    return l10n.toolbar.openFile;\n  };\n\n  return React.createElement(Tooltip, {\n    position: Position$1.BottomCenter,\n    target: React.createElement(\"div\", {\n      className: theme.prefixClass + \"-open-file\"\n    }, React.createElement(\"input\", {\n      className: theme.prefixClass + \"-open-file-input\",\n      multiple: false,\n      type: 'file',\n      title: '',\n      onChange: openFiles\n    }), React.createElement(OpenFileIcon, null)),\n    content: renderContent,\n    offset: TOOLTIP_OFFSET$1\n  });\n};\n\nvar dateRegex = new RegExp('^D:' + '(\\\\d{4})' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '(\\\\d{2})?' + '([Z|+|-])?' + '(\\\\d{2})?' + '\\'?' + '(\\\\d{2})?' + '\\'?');\n\nvar parse$1 = function (value, min, max, defaultValue) {\n  var parsed = parseInt(value, 10);\n  return parsed >= min && parsed <= max ? parsed : defaultValue;\n};\n\nvar convertDate = function (input) {\n  var matches = dateRegex.exec(input);\n\n  if (!matches) {\n    return null;\n  }\n\n  var year = parseInt(matches[1], 10);\n  var month = parse$1(matches[2], 1, 12, 1) - 1;\n  var day = parse$1(matches[3], 1, 31, 1);\n  var hour = parse$1(matches[4], 0, 23, 0);\n  var minute = parse$1(matches[5], 0, 59, 0);\n  var second = parse$1(matches[6], 0, 59, 0);\n  var universalTimeRelation = matches[7] || 'Z';\n  var offsetHour = parse$1(matches[8], 0, 23, 0);\n  var offsetMinute = parse$1(matches[9], 0, 59, 0);\n\n  switch (universalTimeRelation) {\n    case '-':\n      hour += offsetHour;\n      minute += offsetMinute;\n      break;\n\n    case '+':\n      hour -= offsetHour;\n      minute -= offsetMinute;\n      break;\n  }\n\n  return new Date(Date.UTC(year, month, day, hour, minute, second));\n};\n\nvar fileSize = function (bytes) {\n  var sufixes = ['B', 'kB', 'MB', 'GB', 'TB'];\n  var i = Math.floor(Math.log(bytes) / Math.log(1024));\n  return (bytes / Math.pow(1024, i)).toFixed(2) + \" \" + sufixes[i];\n};\n\nvar PropertiesLoader = function (_a) {\n  var doc = _a.doc,\n      render = _a.render;\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState(),\n      data = _b[0],\n      setData = _b[1];\n\n  React.useEffect(function () {\n    doc.getMetadata().then(function (meta) {\n      return Promise.resolve(meta);\n    }).then(function (meta) {\n      return doc.getDownloadInfo().then(function (d) {\n        return Promise.resolve({\n          fileName: meta.contentDispositionFilename || '',\n          info: meta.info,\n          length: d.length\n        });\n      });\n    }).then(function (response) {\n      setData(response);\n    });\n  }, []);\n  return data ? render(data) : React.createElement(\"div\", {\n    className: theme.prefixClass + \"-properties-loader\"\n  }, React.createElement(Spinner, null));\n};\n\nvar PropertyItem = function (_a) {\n  var label = _a.label,\n      value = _a.value;\n  var theme = React.useContext(ThemeContext);\n  return React.createElement(\"dl\", {\n    className: theme.prefixClass + \"-property-item\"\n  }, React.createElement(\"dt\", {\n    className: theme.prefixClass + \"-property-item-label\"\n  }, label, \":\"), React.createElement(\"dd\", {\n    className: theme.prefixClass + \"-property-item-value\"\n  }, value || '-'));\n};\n\nvar PropertiesModal = function (_a) {\n  var doc = _a.doc,\n      fileName$1 = _a.fileName,\n      onToggle = _a.onToggle;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n\n  var formatDate = function (input) {\n    var date = convertDate(input);\n    return date ? date.toLocaleDateString() + \", \" + date.toLocaleTimeString() : '';\n  };\n\n  var renderData = function (data) {\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: theme.prefixClass + \"-properties-modal-group\"\n    }, React.createElement(PropertyItem, {\n      label: \"\" + l10n.property.fileName,\n      value: data.fileName || fileName(fileName$1)\n    }), React.createElement(PropertyItem, {\n      label: \"\" + l10n.property.fileSize,\n      value: fileSize(data.length)\n    })), React.createElement(Separator, null), React.createElement(\"div\", {\n      className: theme.prefixClass + \"-properties-modal-group\"\n    }, React.createElement(PropertyItem, {\n      label: \"\" + l10n.property.title,\n      value: data.info.Title\n    }), React.createElement(PropertyItem, {\n      label: \"\" + l10n.property.author,\n      value: data.info.Author\n    }), React.createElement(PropertyItem, {\n      label: \"\" + l10n.property.subject,\n      value: data.info.Subject\n    }), React.createElement(PropertyItem, {\n      label: \"\" + l10n.property.keywords,\n      value: data.info.Keywords\n    }), React.createElement(PropertyItem, {\n      label: \"\" + l10n.property.creator,\n      value: data.info.Creator\n    }), React.createElement(PropertyItem, {\n      label: \"\" + l10n.property.creationDate,\n      value: formatDate(data.info.CreationDate)\n    }), React.createElement(PropertyItem, {\n      label: \"\" + l10n.property.modificationDate,\n      value: formatDate(data.info.ModDate)\n    })), React.createElement(Separator, null), React.createElement(\"div\", {\n      className: theme.prefixClass + \"-properties-modal-group\"\n    }, React.createElement(PropertyItem, {\n      label: \"\" + l10n.property.pdfProducer,\n      value: data.info.Producer\n    }), React.createElement(PropertyItem, {\n      label: \"\" + l10n.property.pdfVersion,\n      value: data.info.PDFFormatVersion\n    }), React.createElement(PropertyItem, {\n      label: \"\" + l10n.property.pageCount,\n      value: \"\" + doc.numPages\n    })));\n  };\n\n  return React.createElement(\"div\", {\n    className: theme.prefixClass + \"-properties-modal\"\n  }, React.createElement(PropertiesLoader, {\n    doc: doc,\n    render: renderData\n  }), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-properties-modal-footer\"\n  }, React.createElement(PrimaryButton, {\n    onClick: onToggle\n  }, l10n.property.close)));\n};\n\nvar SearchIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M10.5,0.5c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.5,10.5,0.5z\\n                M23.5,23.5\\n                l-5.929-5.929\"\n  }));\n};\n\nvar EMPTY_KEYWORD_REGEXP = new RegExp(' ');\nvar PORTAL_OFFSET = {\n  left: 0,\n  top: 8\n};\n\nvar SearchPopover = function (_a) {\n  var doc = _a.doc,\n      onJumpToMatch = _a.onJumpToMatch,\n      onSearchFor = _a.onSearchFor;\n  var theme = React.useContext(ThemeContext);\n  var numPages = doc.numPages;\n  var indexArr = Array(numPages).fill(0).map(function (_, i) {\n    return i;\n  });\n  var l10n = React.useContext(LocalizationContext);\n\n  var _b = React.useState(''),\n      keyword = _b[0],\n      setKeyword = _b[1];\n\n  var _c = React.useState([]),\n      found = _c[0],\n      setFound = _c[1];\n\n  var _d = React.useState(0),\n      currentMatch = _d[0],\n      setCurrentMatch = _d[1];\n\n  var _e = React.useState(false),\n      matchCase = _e[0],\n      setMatchCase = _e[1];\n\n  var _f = React.useState(false),\n      wholeWords = _f[0],\n      setWholeWords = _f[1];\n\n  var textContents = React.useRef([]);\n\n  var changeKeyword = function (e) {\n    setKeyword(e.target.value);\n  };\n\n  var getTextContents = function () {\n    var promises = indexArr.map(function (pageIndex) {\n      return doc.getPage(pageIndex + 1).then(function (page) {\n        return page.getTextContent();\n      }).then(function (content) {\n        var pageContent = content.items.map(function (item) {\n          return item.str || '';\n        }).join('');\n        return Promise.resolve({\n          pageContent: pageContent,\n          pageIndex: pageIndex\n        });\n      });\n    });\n    return Promise.all(promises).then(function (data) {\n      data.sort(function (a, b) {\n        return a.pageIndex - b.pageIndex;\n      });\n      return Promise.resolve(data.map(function (item) {\n        return item.pageContent;\n      }));\n    });\n  };\n\n  var buildKeywordRegex = function (keywordParam, matchCaseParam, wholeWordsParam) {\n    var source = wholeWordsParam ? \" \" + keywordParam + \" \" : keywordParam;\n    var flags = matchCaseParam ? 'g' : 'gi';\n    return new RegExp(source, flags);\n  };\n\n  var search = function (keywordParam, matchCaseParam, wholeWordsParam) {\n    var regexp = buildKeywordRegex(keywordParam, matchCaseParam, wholeWordsParam);\n    onSearchFor(regexp);\n    setCurrentMatch(0);\n    setFound([]);\n    var promise = textContents.current.length === 0 ? getTextContents().then(function (response) {\n      textContents.current = response;\n      return Promise.resolve(response);\n    }) : Promise.resolve(textContents.current);\n    promise.then(function (response) {\n      var arr = [];\n      response.forEach(function (item, pageIndex) {\n        var numMatches = (item.match(regexp) || []).length;\n\n        for (var matchIndex = 0; matchIndex < numMatches; matchIndex++) {\n          arr.push({\n            matchIndex: matchIndex,\n            pageIndex: pageIndex\n          });\n        }\n      });\n      setFound(arr);\n\n      if (arr.length > 0) {\n        setCurrentMatch(1);\n        onJumpToMatch(arr[0]);\n      }\n    });\n  };\n\n  var keydownSearch = function (e) {\n    if (e.keyCode !== 13 || !keyword) {\n      return;\n    }\n\n    search(keyword, matchCase, wholeWords);\n  };\n\n  var jumpToPreviousMatch = function () {\n    var prev = currentMatch - 1;\n    var updated = prev > 0 ? prev : found.length;\n    setCurrentMatch(updated);\n    onJumpToMatch(found[updated - 1]);\n  };\n\n  var jumpToNextMatch = function () {\n    var next = currentMatch + 1;\n    var updated = next <= found.length ? next : 1;\n    setCurrentMatch(updated);\n    onJumpToMatch(found[updated - 1]);\n  };\n\n  var changeMatchCase = function (e) {\n    var isChecked = e.target.checked;\n    setMatchCase(isChecked);\n\n    if (keyword) {\n      search(keyword, isChecked, wholeWords);\n    }\n  };\n\n  var changeWholeWords = function (e) {\n    var isChecked = e.target.checked;\n    setWholeWords(isChecked);\n\n    if (keyword) {\n      search(keyword, matchCase, isChecked);\n    }\n  };\n\n  var clearKeyword = function () {\n    onSearchFor(EMPTY_KEYWORD_REGEXP);\n    setKeyword('');\n    setCurrentMatch(0);\n    setFound([]);\n    setMatchCase(false);\n    setWholeWords(false);\n  };\n\n  var renderSearch = function () {\n    return l10n.toolbar.search;\n  };\n\n  var renderTarget = function (toggle, opened) {\n    return React.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React.createElement(Button, {\n        onClick: toggle,\n        isSelected: opened\n      }, React.createElement(SearchIcon, null)),\n      content: renderSearch,\n      offset: PORTAL_OFFSET\n    });\n  };\n\n  var renderPreviousMatch = function () {\n    return l10n.search.previousMatch;\n  };\n\n  var renderNextMatch = function () {\n    return l10n.search.nextMatch;\n  };\n\n  var renderContent = function (toggle) {\n    var close = function () {\n      toggle();\n      clearKeyword();\n    };\n\n    return React.createElement(\"div\", {\n      className: theme.prefixClass + \"-search-popover\"\n    }, React.createElement(\"div\", {\n      className: theme.prefixClass + \"-search-popover-input-counter\"\n    }, React.createElement(\"input\", {\n      className: theme.prefixClass + \"-search-popover-input\",\n      placeholder: \"\" + l10n.search.enterToSearch,\n      type: \"text\",\n      value: keyword,\n      onChange: changeKeyword,\n      onKeyDown: keydownSearch\n    }), React.createElement(\"div\", {\n      className: theme.prefixClass + \"-search-popover-counter\"\n    }, currentMatch, \"/\", found.length)), React.createElement(\"label\", {\n      className: theme.prefixClass + \"-search-popover-label\"\n    }, React.createElement(\"input\", {\n      className: theme.prefixClass + \"-search-popover-label-checkbox\",\n      checked: matchCase,\n      type: \"checkbox\",\n      onChange: changeMatchCase\n    }), \" \", l10n.search.matchCase), React.createElement(\"label\", {\n      className: theme.prefixClass + \"-search-popover-label\"\n    }, React.createElement(\"input\", {\n      className: theme.prefixClass + \"-search-popover-label-checkbox\",\n      checked: wholeWords,\n      type: \"checkbox\",\n      onChange: changeWholeWords\n    }), \" \", l10n.search.wholeWords), React.createElement(\"div\", {\n      className: theme.prefixClass + \"-search-popover-footer\"\n    }, React.createElement(\"div\", {\n      className: theme.prefixClass + \"-search-popover-footer-item\"\n    }, React.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React.createElement(Button, {\n        onClick: jumpToPreviousMatch\n      }, React.createElement(PreviousIcon, null)),\n      content: renderPreviousMatch,\n      offset: PORTAL_OFFSET\n    })), React.createElement(\"div\", {\n      className: theme.prefixClass + \"-search-popover-footer-item\"\n    }, React.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React.createElement(Button, {\n        onClick: jumpToNextMatch\n      }, React.createElement(NextIcon, null)),\n      content: renderNextMatch,\n      offset: PORTAL_OFFSET\n    })), React.createElement(\"div\", {\n      className: theme.prefixClass + \"-search-popover-footer-button\"\n    }, React.createElement(PrimaryButton, {\n      onClick: close\n    }, l10n.search.close))));\n  };\n\n  return React.createElement(Popover, {\n    position: Position$1.BottomLeft,\n    target: renderTarget,\n    content: renderContent,\n    offset: PORTAL_OFFSET,\n    closeOnClickOutside: false,\n    closeOnEscape: true\n  });\n};\n\nvar LEVELS = [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.3, 1.5, 1.7, 1.9, 2.1, 2.4, 2.7, 3.0, 3.3, 3.7, 4.1, 4.6, 5.1, 5.7, 6.3, 7.0, 7.7, 8.5, 9.4, 10];\n\nvar increase = function (currentLevel) {\n  var found = LEVELS.find(function (item) {\n    return item > currentLevel;\n  });\n  return found || currentLevel;\n};\n\nvar decrease = function (currentLevel) {\n  var found = LEVELS.findIndex(function (item) {\n    return item >= currentLevel;\n  });\n  return found === -1 || found === 0 ? currentLevel : LEVELS[found - 1];\n};\n\nvar Menu = function (_a) {\n  var children = _a.children;\n  var theme = React.useContext(ThemeContext);\n  return React.createElement(\"ul\", {\n    className: theme.prefixClass + \"-menu\"\n  }, children);\n};\n\nvar LEVELS$1 = [0.5, 0.75, 1, 1.25, 1.5, 2, 3, 4];\nvar PORTAL_OFFSET$1 = {\n  left: 0,\n  top: 8\n};\n\nvar ZoomPopover = function (_a) {\n  var scale = _a.scale,\n      onZoom = _a.onZoom;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n\n  var getSpcialLevelLabel = function (level) {\n    switch (level) {\n      case SpecialZoomLevel$1.ActualSize:\n        return l10n.zoom.actualSize;\n\n      case SpecialZoomLevel$1.PageFit:\n        return l10n.zoom.pageFit;\n\n      case SpecialZoomLevel$1.PageWidth:\n        return l10n.zoom.pageWidth;\n    }\n  };\n\n  var renderTarget = function (toggle) {\n    var click = function () {\n      toggle();\n    };\n\n    return React.createElement(\"span\", {\n      className: theme.prefixClass + \"-zoom-popover-target\",\n      onClick: click\n    }, React.createElement(\"span\", {\n      className: theme.prefixClass + \"-zoom-popover-target-scale\"\n    }, Math.round(scale * 100), \"%\"), React.createElement(\"span\", {\n      className: theme.prefixClass + \"-zoom-popover-target-arrow\"\n    }));\n  };\n\n  var renderContent = function (toggle) {\n    return React.createElement(Menu, null, Object.keys(SpecialZoomLevel$1).map(function (k) {\n      var level = k;\n\n      var clickMenuItem = function () {\n        toggle();\n        onZoom(level);\n      };\n\n      return React.createElement(MenuItem, {\n        key: level,\n        onClick: clickMenuItem\n      }, getSpcialLevelLabel(level));\n    }), React.createElement(MenuDivider, null), LEVELS$1.map(function (level) {\n      var clickMenuItem = function () {\n        toggle();\n        onZoom(level);\n      };\n\n      return React.createElement(MenuItem, {\n        key: level,\n        onClick: clickMenuItem\n      }, Math.round(level * 100) + \"%\");\n    }));\n  };\n\n  return React.createElement(Popover, {\n    position: Position$1.BottomCenter,\n    target: renderTarget,\n    content: renderContent,\n    offset: PORTAL_OFFSET$1,\n    closeOnClickOutside: true,\n    closeOnEscape: true\n  });\n};\n\nvar MoreIcon = function () {\n  return React.createElement(Icon, {\n    size: 16\n  }, React.createElement(\"path\", {\n    d: \"M12,0.5c1.381,0,2.5,1.119,2.5,2.5S13.381,5.5,12,5.5S9.5,4.381,9.5,3S10.619,0.5,12,0.5z\\n                M12,9.5\\n                c1.381,0,2.5,1.119,2.5,2.5s-1.119,2.5-2.5,2.5S9.5,13.381,9.5,12S10.619,9.5,12,9.5z\\n                M12,18.5c1.381,0,2.5,1.119,2.5,2.5\\n                s-1.119,2.5-2.5,2.5S9.5,22.381,9.5,21S10.619,18.5,12,18.5z\"\n  }));\n};\n\nvar PORTAL_OFFSET$2 = {\n  left: 0,\n  top: 8\n};\n\nvar MoreActionsPopover = function (_a) {\n  var doc = _a.doc,\n      fileName = _a.fileName,\n      scrollMode = _a.scrollMode,\n      selectionMode = _a.selectionMode,\n      onChangeScrollMode = _a.onChangeScrollMode,\n      onChangeSelectionMode = _a.onChangeSelectionMode,\n      onJumpToFirstPage = _a.onJumpToFirstPage,\n      onJumpToLastPage = _a.onJumpToLastPage,\n      onRotate = _a.onRotate;\n  var l10n = React.useContext(LocalizationContext);\n\n  var renderMoreActions = function () {\n    return l10n.toolbar.moreActions;\n  };\n\n  var renderTarget = function (toggle, opened) {\n    return React.createElement(Tooltip, {\n      position: Position$1.BottomRight,\n      target: React.createElement(Button, {\n        onClick: toggle,\n        isSelected: opened\n      }, React.createElement(MoreIcon, null)),\n      content: renderMoreActions,\n      offset: PORTAL_OFFSET$2\n    });\n  };\n\n  var renderPropertyMenu = function (toggle) {\n    return React.createElement(MenuItem, {\n      icon: React.createElement(InfoIcon, null),\n      onClick: toggle\n    }, l10n.toolbar.documentProperties);\n  };\n\n  var renderPropertiesModal = function (toggle) {\n    return React.createElement(PropertiesModal, {\n      doc: doc,\n      fileName: fileName,\n      onToggle: toggle\n    });\n  };\n\n  var renderContent = function (toggle) {\n    var jumpToFirstPage = function () {\n      toggle();\n      onJumpToFirstPage();\n    };\n\n    var jumpToLastPage = function () {\n      toggle();\n      onJumpToLastPage();\n    };\n\n    var rotateForward = function () {\n      toggle();\n      onRotate(90);\n    };\n\n    var rotateBackward = function () {\n      toggle();\n      onRotate(-90);\n    };\n\n    var activateTextSelectionMode = function () {\n      toggle();\n      onChangeSelectionMode(SelectionMode$1.Text);\n    };\n\n    var activateHandMode = function () {\n      toggle();\n      onChangeSelectionMode(SelectionMode$1.Hand);\n    };\n\n    var activateScrollMode = function (mode) {\n      toggle();\n      onChangeScrollMode(mode);\n    };\n\n    var setVerticalScrollMode = function () {\n      return activateScrollMode(ScrollMode$1.Vertical);\n    };\n\n    var setHorizontalScrollMode = function () {\n      return activateScrollMode(ScrollMode$1.Horizontal);\n    };\n\n    var setWrappedScrollMode = function () {\n      return activateScrollMode(ScrollMode$1.Wrapped);\n    };\n\n    return React.createElement(Menu, null, React.createElement(MenuItem, {\n      icon: React.createElement(UpArrowIcon, null),\n      onClick: jumpToFirstPage\n    }, l10n.toolbar.goToFirstPage), React.createElement(MenuItem, {\n      icon: React.createElement(DownArrowIcon, null),\n      onClick: jumpToLastPage\n    }, l10n.toolbar.goToLastPage), React.createElement(MenuDivider, null), React.createElement(MenuItem, {\n      icon: React.createElement(RotateForwardIcon, null),\n      onClick: rotateForward\n    }, l10n.toolbar.rotateForward), React.createElement(MenuItem, {\n      icon: React.createElement(RotateBackwardIcon, null),\n      onClick: rotateBackward\n    }, l10n.toolbar.rotateBackward), React.createElement(MenuDivider, null), React.createElement(MenuItem, {\n      checked: selectionMode === SelectionMode$1.Text,\n      icon: React.createElement(TextSelectionIcon, null),\n      onClick: activateTextSelectionMode\n    }, l10n.toolbar.textSelectionTool), React.createElement(MenuItem, {\n      checked: selectionMode === SelectionMode$1.Hand,\n      icon: React.createElement(HandToolIcon, null),\n      onClick: activateHandMode\n    }, l10n.toolbar.handTool), React.createElement(MenuDivider, null), React.createElement(MenuItem, {\n      checked: scrollMode === ScrollMode$1.Vertical,\n      icon: React.createElement(VerticalScrollingIcon, null),\n      onClick: setVerticalScrollMode\n    }, l10n.toolbar.verticalScrolling), React.createElement(MenuItem, {\n      checked: scrollMode === ScrollMode$1.Horizontal,\n      icon: React.createElement(HorizontalScrollingIcon, null),\n      onClick: setHorizontalScrollMode\n    }, l10n.toolbar.horizontalScrolling), React.createElement(MenuItem, {\n      checked: scrollMode === ScrollMode$1.Wrapped,\n      icon: React.createElement(WrappedScrollingIcon, null),\n      onClick: setWrappedScrollMode\n    }, l10n.toolbar.wrappedScrolling), React.createElement(MenuDivider, null), React.createElement(Modal, {\n      target: renderPropertyMenu,\n      content: renderPropertiesModal,\n      closeOnClickOutside: true,\n      closeOnEscape: true\n    }));\n  };\n\n  return React.createElement(Popover, {\n    position: Position$1.BottomRight,\n    target: renderTarget,\n    content: renderContent,\n    offset: PORTAL_OFFSET$2,\n    closeOnClickOutside: true,\n    closeOnEscape: true\n  });\n};\n\nvar TOOLTIP_OFFSET$2 = {\n  left: 0,\n  top: 8\n};\n\nvar Toolbar = function (_a) {\n  var currentPage = _a.currentPage,\n      doc = _a.doc,\n      fileName = _a.fileName,\n      scale = _a.scale,\n      scrollMode = _a.scrollMode,\n      selectionMode = _a.selectionMode,\n      onChangeScrollMode = _a.onChangeScrollMode,\n      onChangeSelectionMode = _a.onChangeSelectionMode,\n      onDownload = _a.onDownload,\n      onFullScreen = _a.onFullScreen,\n      onJumpTo = _a.onJumpTo,\n      onJumpToMatch = _a.onJumpToMatch,\n      onOpenFiles = _a.onOpenFiles,\n      onPrint = _a.onPrint,\n      onRotate = _a.onRotate,\n      onSearchFor = _a.onSearchFor,\n      onToggleSidebar = _a.onToggleSidebar,\n      onZoom = _a.onZoom,\n      renderToolbar = _a.renderToolbar;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState(false),\n      pageTextboxFocused = _b[0],\n      setPageTextboxFocused = _b[1];\n\n  var _c = React.useState(currentPage),\n      editingPage = _c[0],\n      setEditingPage = _c[1];\n\n  var _d = React.useState(false),\n      isSidebarOpened = _d[0],\n      setSidebarOpened = _d[1];\n\n  var numPages = doc.numPages;\n\n  var zoomOut = function () {\n    var newLevel = decrease(scale);\n    onZoom(newLevel);\n  };\n\n  var zoomIn = function () {\n    var newLevel = increase(scale);\n    onZoom(newLevel);\n  };\n\n  var gotoNextPage = function () {\n    var nextPage = currentPage + 1;\n\n    if (nextPage < numPages) {\n      setEditingPage(nextPage);\n      onJumpTo(nextPage);\n    }\n  };\n\n  var gotoPreviousPage = function () {\n    var previousPage = currentPage - 1;\n\n    if (previousPage >= 0) {\n      setEditingPage(previousPage);\n      onJumpTo(previousPage);\n    }\n  };\n\n  var changePage = function (e) {\n    var newPage = parseInt(e.target.value, 10);\n\n    if (newPage > 0 && newPage <= numPages) {\n      setEditingPage(newPage - 1);\n    }\n  };\n\n  var focusPageTextbox = function () {\n    setPageTextboxFocused(true);\n    setEditingPage(currentPage);\n  };\n\n  var blurPageTextbox = function () {\n    setPageTextboxFocused(false);\n  };\n\n  var keydownPage = function (e) {\n    switch (e.keyCode) {\n      case 38:\n        gotoPreviousPage();\n        break;\n\n      case 40:\n        gotoNextPage();\n        break;\n\n      case 13:\n        onJumpTo(editingPage);\n        break;\n    }\n  };\n\n  var jumpToFirstPage = function () {\n    return onJumpTo(0);\n  };\n\n  var jumpToLastPage = function () {\n    return onJumpTo(numPages - 1);\n  };\n\n  var toggleSidebar = function () {\n    setSidebarOpened(!isSidebarOpened);\n    onToggleSidebar();\n  };\n\n  var rotateForward = function () {\n    return onRotate(90);\n  };\n\n  var rotateBackward = function () {\n    return onRotate(-90);\n  };\n\n  var activateTextSelectionMode = function () {\n    return onChangeSelectionMode(SelectionMode$1.Text);\n  };\n\n  var activateHandMode = function () {\n    return onChangeSelectionMode(SelectionMode$1.Hand);\n  };\n\n  var setVerticalScrollMode = function () {\n    return onChangeScrollMode(ScrollMode$1.Vertical);\n  };\n\n  var setHorizontalScrollMode = function () {\n    return onChangeScrollMode(ScrollMode$1.Horizontal);\n  };\n\n  var setWrappedScrollMode = function () {\n    return onChangeScrollMode(ScrollMode$1.Wrapped);\n  };\n\n  var renderToggle = function () {\n    return l10n.toolbar.toggleSidebar;\n  };\n\n  var renderPreviousPage = function () {\n    return l10n.toolbar.previousPage;\n  };\n\n  var renderNextPage = function () {\n    return l10n.toolbar.nextPage;\n  };\n\n  var renderZoomOut = function () {\n    return l10n.toolbar.zoomOut;\n  };\n\n  var renderZoomIn = function () {\n    return l10n.toolbar.zoomIn;\n  };\n\n  var renderFullScreen = function () {\n    return l10n.toolbar.fullScreen;\n  };\n\n  var renderDownload = function () {\n    return l10n.toolbar.download;\n  };\n\n  var renderPrint = function () {\n    return l10n.toolbar.print;\n  };\n\n  var renderGoToFirstPage = function () {\n    return l10n.toolbar.goToFirstPage;\n  };\n\n  var renderGoToLastPage = function () {\n    return l10n.toolbar.goToLastPage;\n  };\n\n  var renderRotateClockwise = function () {\n    return l10n.toolbar.rotateForward;\n  };\n\n  var renderRotateCounterclockwise = function () {\n    return l10n.toolbar.rotateBackward;\n  };\n\n  var renderTextSelection = function () {\n    return l10n.toolbar.textSelectionTool;\n  };\n\n  var renderHandTool = function () {\n    return l10n.toolbar.handTool;\n  };\n\n  var renderVerticalScrolling = function () {\n    return l10n.toolbar.verticalScrolling;\n  };\n\n  var renderHorizontalScrolling = function () {\n    return l10n.toolbar.horizontalScrolling;\n  };\n\n  var renderDocumentProperties = function () {\n    return l10n.toolbar.documentProperties;\n  };\n\n  var renderWrappedScrolling = function () {\n    return l10n.toolbar.wrappedScrolling;\n  };\n\n  var renderPropertyButton = function (toggle) {\n    return React.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React.createElement(Button, {\n        onClick: toggle\n      }, React.createElement(InfoIcon, null)),\n      content: renderDocumentProperties,\n      offset: TOOLTIP_OFFSET$2\n    });\n  };\n\n  var renderPropertiesModal = function (toggle) {\n    return React.createElement(PropertiesModal, {\n      doc: doc,\n      fileName: fileName,\n      onToggle: toggle\n    });\n  };\n\n  return renderToolbar({\n    currentPage: currentPage,\n    currentPageInput: React.createElement(\"input\", {\n      className: theme.prefixClass + \"-toolbar-current-page-input\",\n      type: \"text\",\n      value: pageTextboxFocused ? editingPage + 1 : currentPage + 1,\n      onChange: changePage,\n      onFocus: focusPageTextbox,\n      onBlur: blurPageTextbox,\n      onKeyDown: keydownPage\n    }),\n    documentPropertiesButton: React.createElement(Modal, {\n      target: renderPropertyButton,\n      content: renderPropertiesModal,\n      closeOnClickOutside: true,\n      closeOnEscape: true\n    }),\n    downloadButton: React.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React.createElement(Button, {\n        onClick: onDownload\n      }, React.createElement(DownloadIcon, null)),\n      content: renderDownload,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    fullScreenButton: React.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React.createElement(Button, {\n        onClick: onFullScreen\n      }, React.createElement(FullScreenIcon, null)),\n      content: renderFullScreen,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    goToFirstPageButton: React.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React.createElement(Button, {\n        onClick: jumpToFirstPage\n      }, React.createElement(UpArrowIcon, null)),\n      content: renderGoToFirstPage,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    goToLastPageButton: React.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React.createElement(Button, {\n        onClick: jumpToLastPage\n      }, React.createElement(DownArrowIcon, null)),\n      content: renderGoToLastPage,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    handToolButton: React.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React.createElement(Button, {\n        onClick: activateHandMode,\n        isSelected: selectionMode === SelectionMode$1.Hand\n      }, React.createElement(HandToolIcon, null)),\n      content: renderHandTool,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    horizontalScrollingButton: React.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React.createElement(Button, {\n        onClick: setHorizontalScrollMode,\n        isSelected: scrollMode === ScrollMode$1.Horizontal\n      }, React.createElement(HorizontalScrollingIcon, null)),\n      content: renderHorizontalScrolling,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    moreActionsPopover: React.createElement(MoreActionsPopover, {\n      doc: doc,\n      fileName: fileName,\n      scrollMode: scrollMode,\n      selectionMode: selectionMode,\n      onChangeScrollMode: onChangeScrollMode,\n      onChangeSelectionMode: onChangeSelectionMode,\n      onJumpToFirstPage: jumpToFirstPage,\n      onJumpToLastPage: jumpToLastPage,\n      onRotate: onRotate\n    }),\n    nextPageButton: React.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React.createElement(Button, {\n        onClick: gotoNextPage\n      }, React.createElement(NextIcon, null)),\n      content: renderNextPage,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    numPages: numPages,\n    openFileButton: React.createElement(OpenFileButton, {\n      onOpenFiles: onOpenFiles\n    }),\n    previousPageButton: React.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React.createElement(Button, {\n        onClick: gotoPreviousPage\n      }, React.createElement(PreviousIcon, null)),\n      content: renderPreviousPage,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    printButton: React.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React.createElement(Button, {\n        onClick: onPrint\n      }, React.createElement(PrintIcon, null)),\n      content: renderPrint,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    rotateClockwiseButton: React.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React.createElement(Button, {\n        onClick: rotateForward\n      }, React.createElement(RotateForwardIcon, null)),\n      content: renderRotateClockwise,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    rotateCounterclockwiseButton: React.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React.createElement(Button, {\n        onClick: rotateBackward\n      }, React.createElement(RotateBackwardIcon, null)),\n      content: renderRotateCounterclockwise,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    searchPopover: React.createElement(SearchPopover, {\n      doc: doc,\n      onJumpToMatch: onJumpToMatch,\n      onSearchFor: onSearchFor\n    }),\n    textSelectionButton: React.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React.createElement(Button, {\n        onClick: activateTextSelectionMode,\n        isSelected: selectionMode === SelectionMode$1.Text\n      }, React.createElement(TextSelectionIcon, null)),\n      content: renderTextSelection,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    toggleSidebarButton: React.createElement(Tooltip, {\n      position: Position$1.BottomLeft,\n      target: React.createElement(Button, {\n        onClick: toggleSidebar,\n        isSelected: isSidebarOpened\n      }, React.createElement(LeftSidebarIcon, null)),\n      content: renderToggle,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    verticalScrollingButton: React.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React.createElement(Button, {\n        onClick: setVerticalScrollMode,\n        isSelected: scrollMode === ScrollMode$1.Vertical\n      }, React.createElement(VerticalScrollingIcon, null)),\n      content: renderVerticalScrolling,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    zoomInButton: React.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React.createElement(Button, {\n        onClick: zoomIn\n      }, React.createElement(ZoomInIcon, null)),\n      content: renderZoomIn,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    zoomOutButton: React.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React.createElement(Button, {\n        onClick: zoomOut\n      }, React.createElement(ZoomOutIcon, null)),\n      content: renderZoomOut,\n      offset: TOOLTIP_OFFSET$2\n    }),\n    zoomPopover: React.createElement(ZoomPopover, {\n      scale: scale,\n      onZoom: onZoom\n    }),\n    wrappedScrollingButton: React.createElement(Tooltip, {\n      position: Position$1.BottomCenter,\n      target: React.createElement(Button, {\n        onClick: setWrappedScrollMode,\n        isSelected: scrollMode === ScrollMode$1.Wrapped\n      }, React.createElement(WrappedScrollingIcon, null)),\n      content: renderWrappedScrolling,\n      offset: TOOLTIP_OFFSET$2\n    })\n  });\n};\n\nvar EMPTY_KEYWORD_REGEXP$1 = new RegExp(' ');\nvar SCROLL_BAR_WIDTH = 17;\nvar PAGE_PADDING = 8;\n\nvar Inner = function (_a) {\n  var doc = _a.doc,\n      file = _a.file,\n      initialPage = _a.initialPage,\n      layout = _a.layout,\n      pageSize = _a.pageSize,\n      render = _a.render,\n      selectionMode = _a.selectionMode,\n      onDocumentLoad = _a.onDocumentLoad,\n      onOpenFile = _a.onOpenFile,\n      onZoom = _a.onZoom;\n  var theme = React.useContext(ThemeContext);\n  var pagesRef = React.useRef(null);\n\n  var _b = React.useState(pageSize.scale),\n      scale = _b[0],\n      setScale = _b[1];\n\n  var _c = React.useState(0),\n      currentPage = _c[0],\n      setCurrentPage = _c[1];\n\n  var _d = React.useState(0),\n      rotation = _d[0],\n      setRotation = _d[1];\n\n  var _e = React.useState(EMPTY_KEYWORD_REGEXP$1),\n      keywordRegexp = _e[0],\n      setKeywordRegexp = _e[1];\n\n  var _f = React.useState({\n    matchIndex: -1,\n    pageIndex: -1\n  }),\n      match = _f[0],\n      setMatch = _f[1];\n\n  var _g = React.useState(ScrollMode$1.Vertical),\n      scrollMode = _g[0],\n      setScrollMode = _g[1];\n\n  var _h = React.useState(selectionMode),\n      currentMode = _h[0],\n      setCurrentMode = _h[1];\n\n  var toggleDragScroll = useDragScroll(pagesRef).toggleDragScroll;\n\n  var _j = useFullScreen(pagesRef),\n      isFullScreen = _j.isFullScreen,\n      openFullScreen = _j.openFullScreen,\n      closeFullScreen = _j.closeFullScreen;\n\n  var toggleSidebar = useToggle();\n  var numPages = doc.numPages;\n  var pageWidth = pageSize.pageWidth,\n      pageHeight = pageSize.pageHeight;\n  var arr = Array(numPages).fill(null);\n  var pageVisibility = arr.map(function () {\n    return 0;\n  });\n  var pageRefs = arr.map(function () {\n    return React.useRef();\n  });\n\n  var openFiles = function (files) {\n    if (files.length === 0) {\n      return;\n    }\n\n    var selectedFile = files[0];\n\n    if (getFileExt(file.name).toLowerCase() !== 'pdf') {\n      return;\n    }\n\n    new Promise(function (resolve) {\n      var reader = new FileReader();\n      reader.readAsArrayBuffer(selectedFile);\n\n      reader.onload = function () {\n        var bytes = new Uint8Array(reader.result);\n        resolve(bytes);\n      };\n    }).then(function (data) {\n      onOpenFile(selectedFile.name, data);\n    });\n  };\n\n  var isDragging = useDrop(pagesRef, function (files) {\n    return openFiles(files);\n  }).isDragging;\n\n  var _k = React.useState(PrintStatus$1.Inactive),\n      printStatus = _k[0],\n      setPrintStatus = _k[1];\n\n  var jumpToPage = function (pageIndex) {\n    if (pageIndex < 0 || pageIndex >= numPages) {\n      return;\n    }\n\n    setCurrentPage(pageIndex);\n    var pagesContainer = pagesRef.current;\n    var targetPage = pageRefs[pageIndex].current;\n\n    if (pagesContainer && targetPage) {\n      pagesContainer.scrollTop = targetPage.offsetTop;\n    }\n  };\n\n  React.useEffect(function () {\n    onDocumentLoad(doc);\n\n    if (initialPage) {\n      jumpToPage(initialPage);\n    }\n  }, []);\n\n  var changeSelectionMode = function (mode) {\n    toggleDragScroll(mode === SelectionMode$1.Hand);\n    setCurrentMode(mode);\n  };\n\n  React.useEffect(function () {\n    if (selectionMode === SelectionMode$1.Hand) {\n      toggleDragScroll(true);\n    }\n  }, []);\n\n  var download = function () {\n    downloadFile(file.name, file.data);\n  };\n\n  var zoom = function (newScale) {\n    var pagesEle = pagesRef.current;\n\n    if (!pagesEle) {\n      return;\n    }\n\n    var scaled = 1;\n\n    switch (newScale) {\n      case SpecialZoomLevel$1.ActualSize:\n        scaled = 1;\n        break;\n\n      case SpecialZoomLevel$1.PageFit:\n        scaled = Math.min((pagesEle.offsetWidth - SCROLL_BAR_WIDTH) / pageWidth, (pagesEle.offsetHeight - 2 * PAGE_PADDING) / pageHeight);\n        break;\n\n      case SpecialZoomLevel$1.PageWidth:\n        scaled = (pagesEle.offsetWidth - SCROLL_BAR_WIDTH) / pageWidth;\n        break;\n\n      default:\n        scaled = newScale;\n        break;\n    }\n\n    setScale(scaled);\n    onZoom(doc, scaled);\n  };\n\n  var pageVisibilityChanged = function (pageIndex, ratio) {\n    pageVisibility[pageIndex] = ratio;\n    var maxRatioPage = pageVisibility.reduce(function (maxIndex, item, index, array) {\n      return item > array[maxIndex] ? index : maxIndex;\n    }, 0);\n    setCurrentPage(maxRatioPage);\n  };\n\n  var rotate = function (degree) {\n    var updateRotation = rotation === 360 || rotation === -360 ? degree : rotation + degree;\n    setRotation(updateRotation);\n  };\n\n  var changeScrollMode = function (mode) {\n    var pagesContainer = pagesRef.current;\n\n    if (!pagesContainer) {\n      return;\n    }\n\n    switch (mode) {\n      case ScrollMode$1.Vertical:\n        pagesContainer.classList.add(theme.prefixClass + \"-inner-pages-vertical\");\n        pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-horizontal\");\n        pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-wrapped\");\n        break;\n\n      case ScrollMode$1.Horizontal:\n        pagesContainer.classList.add(theme.prefixClass + \"-inner-pages-horizontal\");\n        pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-vertical\");\n        pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-wrapped\");\n        break;\n\n      case ScrollMode$1.Wrapped:\n        pagesContainer.classList.add(theme.prefixClass + \"-inner-pages-wrapped\");\n        pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-vertical\");\n        pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-horizontal\");\n        break;\n    }\n\n    setScrollMode(mode);\n  };\n\n  var jumpToMatch = function (target) {\n    jumpToPage(target.pageIndex);\n    setMatch(target);\n  };\n\n  var jumpToDest = function (pageIndex, bottomOffset, scaleTo) {\n    var pagesContainer = pagesRef.current;\n\n    if (!pagesContainer) {\n      return;\n    }\n\n    var newPageIndex = pageIndex + 1;\n    doc.getPage(newPageIndex).then(function (page) {\n      var viewport = page.getViewport({\n        scale: 1\n      });\n      var top = 0;\n      var bottom = bottomOffset || 0;\n\n      switch (scaleTo) {\n        case SpecialZoomLevel$1.PageFit:\n          top = 0;\n          zoom(SpecialZoomLevel$1.PageFit);\n          break;\n\n        default:\n          top = (viewport.height - bottom) * scale;\n          break;\n      }\n\n      var targetPageEle = pageRefs[pageIndex].current;\n\n      if (targetPageEle) {\n        pagesContainer.scrollTop = targetPageEle.offsetTop + top;\n      }\n    });\n  };\n\n  var print = function () {\n    return setPrintStatus(PrintStatus$1.Preparing);\n  };\n\n  var cancelPrinting = function () {\n    return setPrintStatus(PrintStatus$1.Inactive);\n  };\n\n  var startPrinting = function () {\n    return setPrintStatus(PrintStatus$1.Ready);\n  };\n\n  return render({\n    viewer: layout(toggleSidebar.opened, {\n      attrs: {\n        style: {\n          position: 'relative'\n        }\n      },\n      children: React.createElement(PrintContainer, {\n        doc: doc,\n        pageHeight: pageHeight,\n        pageWidth: pageWidth,\n        printStatus: printStatus,\n        rotation: rotation,\n        onCancel: cancelPrinting,\n        onStartPrinting: startPrinting\n      })\n    }, {\n      attrs: {\n        ref: pagesRef,\n        style: {\n          position: 'relative'\n        }\n      },\n      children: React.createElement(React.Fragment, null, isDragging && React.createElement(DropArea, null), isFullScreen && React.createElement(ExitFullScreen, {\n        onClick: closeFullScreen\n      }), Array(numPages).fill(0).map(function (_, index) {\n        return React.createElement(\"div\", {\n          className: theme.prefixClass + \"-inner-page\",\n          key: \"pagelayer-\" + index,\n          ref: function (ref) {\n            pageRefs[index].current = ref;\n          }\n        }, React.createElement(PageLayer, {\n          doc: doc,\n          keywordRegexp: keywordRegexp,\n          height: pageHeight,\n          match: match,\n          pageIndex: index,\n          rotation: rotation,\n          scale: scale,\n          width: pageWidth,\n          onJumpToDest: jumpToDest,\n          onPageVisibilityChanged: pageVisibilityChanged\n        }));\n      }))\n    }, function (renderToolbar) {\n      return React.createElement(Toolbar, {\n        currentPage: currentPage,\n        doc: doc,\n        fileName: file.name,\n        scale: scale,\n        scrollMode: scrollMode,\n        selectionMode: currentMode,\n        onChangeScrollMode: changeScrollMode,\n        onChangeSelectionMode: changeSelectionMode,\n        onDownload: download,\n        onFullScreen: openFullScreen,\n        onJumpTo: jumpToPage,\n        onJumpToMatch: jumpToMatch,\n        onOpenFiles: openFiles,\n        onPrint: print,\n        onRotate: rotate,\n        onSearchFor: setKeywordRegexp,\n        onToggleSidebar: toggleSidebar.toggle,\n        onZoom: zoom,\n        renderToolbar: renderToolbar\n      });\n    }, {\n      attrs: {},\n      children: React.createElement(Sidebar, {\n        currentPage: currentPage,\n        doc: doc,\n        height: pageHeight,\n        rotation: rotation,\n        width: pageWidth,\n        onJumpToDest: jumpToDest,\n        onJumpToPage: jumpToPage\n      })\n    }),\n    doc: doc,\n    download: download,\n    changeScrollMode: changeScrollMode,\n    changeSelectionMode: changeSelectionMode,\n    jumpToPage: jumpToPage,\n    print: print,\n    rotate: rotate,\n    zoom: zoom\n  });\n};\n\nvar PageSizeCalculator = function (_a) {\n  var doc = _a.doc,\n      render = _a.render;\n  var theme = React.useContext(ThemeContext);\n  var pagesRef = React.useRef(null);\n\n  var _b = React.useState({\n    pageHeight: 0,\n    pageWidth: 0,\n    scale: 1\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  React.useEffect(function () {\n    doc.getPage(1).then(function (pdfPage) {\n      var viewport = pdfPage.getViewport({\n        scale: 1\n      });\n      var w = viewport.width;\n      var h = viewport.height;\n      var pagesEle = pagesRef.current;\n\n      if (!pagesEle) {\n        return;\n      }\n\n      var scaled = pagesEle.offsetWidth / w;\n      var scale = decrease(Math.max(1, scaled));\n      setPageSize({\n        pageHeight: h,\n        pageWidth: w,\n        scale: scale\n      });\n    });\n  }, [doc]);\n  var pageWidth = pageSize.pageWidth;\n  return pageWidth === 0 ? React.createElement(\"div\", {\n    className: theme.prefixClass + \"-page-size-calculator\",\n    ref: pagesRef\n  }, React.createElement(Spinner, null)) : render(pageSize);\n};\n\nvar LoadingStatus = function () {\n  function LoadingStatus() {}\n\n  return LoadingStatus;\n}();\n\nvar AskForPasswordState = function (_super) {\n  __extends(AskForPasswordState, _super);\n\n  function AskForPasswordState(verifyPasswordFn) {\n    var _this = _super.call(this) || this;\n\n    _this.verifyPasswordFn = verifyPasswordFn;\n    return _this;\n  }\n\n  return AskForPasswordState;\n}(LoadingStatus);\n\nvar AskingPassword = function (_a) {\n  var verifyPasswordFn = _a.verifyPasswordFn;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState(''),\n      password = _b[0],\n      setPassword = _b[1];\n\n  var changePassword = function (e) {\n    return setPassword(e.target.value);\n  };\n\n  var submit = function () {\n    return verifyPasswordFn(password);\n  };\n\n  return React.createElement(\"div\", {\n    className: theme.prefixClass + \"-asking-password\"\n  }, React.createElement(\"div\", null, React.createElement(\"div\", {\n    className: theme.prefixClass + \"-asking-password-message\"\n  }, l10n.askingPassword.requirePasswordToOpen, \":\"), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-asking-password-input-container\"\n  }, React.createElement(\"input\", {\n    className: theme.prefixClass + \"-asking-password-input\",\n    type: \"password\",\n    onChange: changePassword\n  }), React.createElement(\"button\", {\n    className: theme.prefixClass + \"-asking-password-button\",\n    onClick: submit\n  }, l10n.askingPassword.submit))));\n};\n\nvar CompletedState = function (_super) {\n  __extends(CompletedState, _super);\n\n  function CompletedState(doc) {\n    var _this = _super.call(this) || this;\n\n    _this.doc = doc;\n    return _this;\n  }\n\n  return CompletedState;\n}(LoadingStatus);\n\nvar FailureState = function (_super) {\n  __extends(FailureState, _super);\n\n  function FailureState(error) {\n    var _this = _super.call(this) || this;\n\n    _this.error = error;\n    return _this;\n  }\n\n  return FailureState;\n}(LoadingStatus);\n\nvar LoadingState = function (_super) {\n  __extends(LoadingState, _super);\n\n  function LoadingState(percentages) {\n    var _this = _super.call(this) || this;\n\n    _this.percentages = percentages;\n    return _this;\n  }\n\n  return LoadingState;\n}(LoadingStatus);\n\nvar WrongPassword = function (_a) {\n  var verifyPasswordFn = _a.verifyPasswordFn;\n  var l10n = React.useContext(LocalizationContext);\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState(''),\n      password = _b[0],\n      setPassword = _b[1];\n\n  var changePassword = function (e) {\n    return setPassword(e.target.value);\n  };\n\n  var submit = function () {\n    return verifyPasswordFn(password);\n  };\n\n  return React.createElement(\"div\", {\n    className: theme.prefixClass + \"-asking-password\"\n  }, React.createElement(\"div\", null, React.createElement(\"div\", {\n    className: theme.prefixClass + \"-asking-password-message\"\n  }, l10n.wrongPassword.tryAgain, \":\"), React.createElement(\"div\", {\n    className: theme.prefixClass + \"-asking-password-input-container\"\n  }, React.createElement(\"input\", {\n    className: theme.prefixClass + \"-asking-password-input\",\n    type: \"password\",\n    onChange: changePassword\n  }), React.createElement(\"button\", {\n    className: theme.prefixClass + \"-asking-password-button\",\n    onClick: submit\n  }, l10n.wrongPassword.submit))));\n};\n\nvar WrongPasswordState = function (_super) {\n  __extends(WrongPasswordState, _super);\n\n  function WrongPasswordState(verifyPasswordFn) {\n    var _this = _super.call(this) || this;\n\n    _this.verifyPasswordFn = verifyPasswordFn;\n    return _this;\n  }\n\n  return WrongPasswordState;\n}(LoadingStatus);\n\nvar DocumentLoader = function (_a) {\n  var file = _a.file,\n      render = _a.render;\n  var theme = React.useContext(ThemeContext);\n\n  var _b = React.useState(new LoadingState(0)),\n      status = _b[0],\n      setStatus = _b[1];\n\n  React.useEffect(function () {\n    setStatus(new LoadingState(0));\n    var loadingTask = PdfJs.getDocument(file);\n\n    loadingTask.onPassword = function (verifyPassword, reason) {\n      switch (reason) {\n        case PdfJs.PasswordResponses.NEED_PASSWORD:\n          setStatus(new AskForPasswordState(verifyPassword));\n          break;\n\n        case PdfJs.PasswordResponses.INCORRECT_PASSWORD:\n          setStatus(new WrongPasswordState(verifyPassword));\n          break;\n      }\n    };\n\n    loadingTask.promise.then(function (doc) {\n      return setStatus(new CompletedState(doc));\n    }, function (err) {\n      return setStatus(new FailureState(err.message || 'Cannot load document'));\n    });\n    return function () {\n      loadingTask.destroy();\n    };\n  }, [file]);\n\n  switch (true) {\n    case status instanceof AskForPasswordState:\n      return React.createElement(AskingPassword, {\n        verifyPasswordFn: status.verifyPasswordFn\n      });\n\n    case status instanceof WrongPasswordState:\n      return React.createElement(WrongPassword, {\n        verifyPasswordFn: status.verifyPasswordFn\n      });\n\n    case status instanceof CompletedState:\n      return render(status.doc);\n\n    case status instanceof FailureState:\n      return React.createElement(\"div\", {\n        className: theme.prefixClass + \"-doc-error\"\n      }, status.error);\n\n    case status instanceof LoadingState:\n    default:\n      return React.createElement(\"div\", {\n        className: theme.prefixClass + \"-doc-loading\"\n      }, React.createElement(Spinner, null));\n  }\n};\n\nvar askingPassword = {\n  requirePasswordToOpen: \"This document requires a password to open\",\n  submit: \"Submit\"\n};\nvar attachment = {\n  clickToDownload: \"Click to download\",\n  noAttachment: \"There is no attachment\"\n};\nvar bookmark = {\n  noBookmark: \"There is no bookmark\"\n};\nvar main = {\n  dragDropFile: \"Drag and drop a PDF document here\"\n};\nvar printProgress = {\n  cancel: \"Cancel\",\n  preparingDocument: \"Preparing document ...\"\n};\nvar property = {\n  author: \"Author\",\n  close: \"Close\",\n  creationDate: \"Creation date\",\n  creator: \"Creator\",\n  fileName: \"File name\",\n  fileSize: \"File size\",\n  keywords: \"Keywords\",\n  modificationDate: \"Modification date\",\n  pageCount: \"Page count\",\n  pdfProducer: \"PDF producer\",\n  pdfVersion: \"PDF Version\",\n  subject: \"Subject\",\n  title: \"Title\"\n};\nvar search = {\n  close: \"Close\",\n  enterToSearch: \"Enter to search\",\n  matchCase: \"Match case\",\n  nextMatch: \"Next match\",\n  previousMatch: \"Previous match\",\n  wholeWords: \"Whole words\"\n};\nvar sidebar = {\n  attachment: \"Attachment\",\n  bookmark: \"Bookmark\",\n  thumbnail: \"Thumbnail\"\n};\nvar toolbar = {\n  documentProperties: \"Document properties\",\n  download: \"Download\",\n  fullScreen: \"Full screen\",\n  goToFirstPage: \"Go to first page\",\n  goToLastPage: \"Go to last page\",\n  handTool: \"Hand tool\",\n  horizontalScrolling: \"Horizontal scrolling\",\n  moreActions: \"More actions\",\n  nextPage: \"Next page\",\n  openFile: \"Open file\",\n  previousPage: \"Previous page\",\n  print: \"Print\",\n  rotateBackward: \"Rotate counterclockwise\",\n  rotateForward: \"Rotate clockwise\",\n  search: \"Search\",\n  textSelectionTool: \"Text selection tool\",\n  toggleSidebar: \"Toggle sidebar\",\n  verticalScrolling: \"Vertical scrolling\",\n  zoomIn: \"Zoom in\",\n  zoomOut: \"Zoom out\",\n  wrappedScrolling: \"Wrapped scrolling\"\n};\nvar wrongPassword = {\n  submit: \"Submit\",\n  tryAgain: \"The password is wrong. Please try again\"\n};\nvar zoom = {\n  actualSize: \"Actual size\",\n  pageFit: \"Page fit\",\n  pageWidth: \"Page width\"\n};\nvar enUs = {\n  askingPassword: askingPassword,\n  attachment: attachment,\n  bookmark: bookmark,\n  main: main,\n  printProgress: printProgress,\n  property: property,\n  search: search,\n  sidebar: sidebar,\n  toolbar: toolbar,\n  wrongPassword: wrongPassword,\n  zoom: zoom\n};\n\nvar LocalizationProvider = function (_a) {\n  var children = _a.children,\n      localization = _a.localization;\n  var defaultL10n = enUs;\n  var l10n = localization || defaultL10n;\n  return React.createElement(LocalizationContext.Provider, {\n    value: l10n\n  }, children);\n};\n\nvar ThemeProvider = function (_a) {\n  var children = _a.children,\n      prefixClass = _a.prefixClass;\n  return React.createElement(ThemeContext.Provider, {\n    value: {\n      prefixClass: prefixClass || 'viewer'\n    }\n  }, children);\n};\n\nvar Viewer = function (_a) {\n  var defaultScale = _a.defaultScale,\n      fileUrl = _a.fileUrl,\n      initialPage = _a.initialPage,\n      layout = _a.layout,\n      localization = _a.localization,\n      prefixClass = _a.prefixClass,\n      render = _a.render,\n      _b = _a.selectionMode,\n      selectionMode = _b === void 0 ? SelectionMode$1.Text : _b,\n      _c = _a.onDocumentLoad,\n      onDocumentLoad = _c === void 0 ? function () {} : _c,\n      _d = _a.onZoom,\n      onZoom = _d === void 0 ? function () {} : _d;\n\n  var _e = React.useState({\n    data: fileUrl,\n    name: fileUrl\n  }),\n      file = _e[0],\n      setFile = _e[1];\n\n  var layoutOption = function (isSidebarOpened, container, main, toolbar, sidebar) {\n    return defaultLayout(isSidebarOpened, container, main, toolbar(defaultToolbar), sidebar);\n  };\n\n  var openFile = function (fileName, data) {\n    setFile({\n      data: data,\n      name: fileName\n    });\n  };\n\n  var renderDoc = function (renderViewer) {\n    return function (doc) {\n      var renderInner = function (ps) {\n        var pageSize = ps;\n        pageSize.scale = defaultScale || ps.scale;\n        return React.createElement(Inner, {\n          doc: doc,\n          file: file,\n          initialPage: initialPage,\n          layout: layout || layoutOption,\n          pageSize: pageSize,\n          render: renderViewer,\n          selectionMode: selectionMode,\n          onDocumentLoad: onDocumentLoad,\n          onOpenFile: openFile,\n          onZoom: onZoom\n        });\n      };\n\n      return React.createElement(PageSizeCalculator, {\n        doc: doc,\n        render: renderInner\n      });\n    };\n  };\n\n  var defaultRenderer = render || function (props) {\n    return props.viewer;\n  };\n\n  return React.createElement(ThemeProvider, {\n    prefixClass: prefixClass\n  }, React.createElement(LocalizationProvider, {\n    localization: localization\n  }, React.createElement(DocumentLoader, {\n    file: file.data,\n    render: renderDoc(defaultRenderer)\n  })));\n};\n\nvar Worker = function (_a) {\n  var children = _a.children,\n      workerUrl = _a.workerUrl;\n  PdfJs.GlobalWorkerOptions.workerSrc = workerUrl;\n  return React.createElement(React.Fragment, null, children);\n};\n\nexports.Button = Button;\nexports.Icon = Icon;\nexports.MenuDivider = MenuDivider;\nexports.MenuItem = MenuItem;\nexports.Modal = Modal;\nexports.Popover = Popover;\nexports.Position = Position$1;\nexports.PrimaryButton = PrimaryButton;\nexports.ProgressBar = ProgressBar;\nexports.ScrollMode = ScrollMode$1;\nexports.SelectionMode = SelectionMode$1;\nexports.Separator = Separator;\nexports.SpecialZoomLevel = SpecialZoomLevel$1;\nexports.Spinner = Spinner;\nexports.Tooltip = Tooltip;\nexports.Worker = Worker;\nexports.default = Viewer;\nexports.defaultLayout = defaultLayout;\nexports.defaultToolbar = defaultToolbar;","map":{"version":3,"sources":["/home/diego/Documents/Spring-2020/Portfolio/node_modules/@phuocng/react-pdf-viewer/cjs/react-pdf-viewer.js"],"names":["Object","defineProperty","exports","value","_interopDefault","ex","React","require","ReactDOM","PdfJs","ThemeContext","createContext","prefixClass","classNames","classes","result","keys","forEach","clazz","push","join","Button","_a","_b","children","_c","isSelected","onClick","theme","useContext","createElement","className","MenuDivider","Icon","size","width","height","viewBox","CheckIcon","d","MenuItem","checked","icon","PrimaryButton","ProgressBar","progress","style","Separator","Spinner","cx","cy","r","strokeDasharray","Math","PI","extendStatics","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","defaultLayout","isSidebarOpened","container","main","toolbar","sidebar","attrs","defaultToolbar","toolbarSlot","toggleSidebarButton","searchPopover","previousPageButton","currentPageInput","numPages","nextPageButton","zoomOutButton","zoomPopover","zoomInButton","fullScreenButton","openFileButton","downloadButton","printButton","moreActionsPopover","useKeyUp","targetKeyCode","handler","keyUpHandler","e","keyCode","useEffect","document","addEventListener","removeEventListener","useLockScroll","originalStyle","window","getComputedStyle","body","overflow","ModalBody","closeOnEscape","onToggle","contentRef","createRef","ref","ModalOverlay","closeOnClickOutside","onClose","target","currentTarget","ToggleStatus","useToggle","useState","opened","setOpened","toggle","status","Close","Open","Toggle","isOpened","Portal","content","Fragment","createPortal","Modal","renderContent","Position","Position$1","calculatePosition","position","offset","targetRect","getBoundingClientRect","contentRect","top","left","TopLeft","TopCenter","TopRight","RightTop","RightCenter","RightBottom","BottomLeft","BottomCenter","BottomRight","LeftTop","LeftCenter","LeftBottom","scrollLeft","scrollTop","usePosition","targetRef","targetEle","current","contentEle","Arrow","customClassName","PopoverBody","PopoverOverlay","setProperty","Popover","renderTarget","TooltipBody","Tooltip","show","hide","onMouseEnter","onMouseLeave","ScrollMode","ScrollMode$1","SelectionMode","SelectionMode$1","SpecialZoomLevel","SpecialZoomLevel$1","useDragScroll","enabled","setEnabled","pos","useRef","x","y","onMouseMoveHandler","ele","clientY","clientX","onMouseUpHandler","classList","add","remove","onMouseDownHandler","preventDefault","stopPropagation","toggleDragScroll","useDrop","onDrop","dragCount","isDragging","setDragging","onDropHandler","dataTransfer","files","onDragOverHandler","onDragEnterHandler","onDragLeaveHandler","Api","defaultVendor","ExitFullScreen","FullScreenChange","FullScreenElement","FullScreenEnabled","RequestFullScreen","webkitVendor","msVendor","isBrowser","vendor","addFullScreenChangeListener","removeFullScreenChangeListener","exitFullScreen","element","Promise","resolve","getFullScreenElement","requestFullScreen","useFullScreen","isFullScreen","setIsFullScreen","closeOtherFullScreen","openFullScreen","then","closeFullScreen","onFullScreenChange","Observer","threshold","onVisibilityChanged","containerRef","io","IntersectionObserver","entries","entry","isVisible","isIntersecting","ratio","intersectionRatio","observe","unobserve","parse","pageIndex","destArray","bottomOffset","scale","name","scaleTo","PageFit","getDestination","doc","dest","res","getPageIndex","WithScale","callback","rotation","AnnotationLayer","page","onJumpToDest","renderAnnotation","innerHTML","viewport","getViewport","getAnnotations","intent","annotations","linkService","getDestinationHash","escape","JSON","stringify","navigateTo","clonedViewPort","clone","dontFlip","render","div","CanvasLayer","canvasRef","renderTask","renderCanvas","task","cancel","canvasEle","canvasContext","getContext","promise","calculateOffset","parent","offsetTop","offsetLeft","parentElement","removeNode","parentNode","removeChild","replaceNode","replacementNode","node","insertBefore","unwrap","range","createRange","selectNodeContents","extractContents","normalize","wrap","startOffset","endOffset","Range","setStart","setEnd","wrapper","surroundContents","TextLayer","keywordRegexp","match","onJumpToMatch","isRendered","empty","containerEle","spans","querySelectorAll","numSpans","span","highlight","text","textContent","source","trim","search","firstChild","unhighlightAll","highlightNodes","total","scrollToMatch","matchIndex","top_1","renderText","getTextContent","renderTextLayer","childNodes","PageLayer","onPageVisibilityChanged","isCalculated","pageHeight","pageWidth","pageSize","setPageSize","intersectionThreshold","fill","map","_","scaledWidth","scaledHeight","isVertical","abs","w","h","visibilityChanged","params","getPage","pdfPage","jumpToMatch","indexOfPage","LocalizationContext","DropArea","l10n","dragDropFile","PrintProgress","numLoadedPages","onCancel","onStartPrinting","floor","printProgress","preparingDocument","PrintStatus","PrintStatus$1","PageThumbnail","onLoad","src","setSrc","canvas","printUnit","save","fillStyle","fillRect","restore","transform","toBlob","blob","URL","createObjectURL","toDataURL","PageThumbnailContainer","PrintZone","printStatus","setNumLoadedPages","Ready","print","loadPage","index","key","dangerouslySetInnerHTML","__html","PrintContainer","numLoadedPagesForPrint","setNumLoadedPagesForPrint","cancelPrinting","startPrinting","Preparing","fileName","url","str","split","pop","downloadFile","data","blobUrl","Blob","type","link","display","href","setAttribute","appendChild","click","revokeObjectURL","getFileExt","toLowerCase","ExitFullScreenIcon","AttachmentList","renderItem","file","title","attachment","clickToDownload","noAttachment","AttachmentLoader","isLoaded","attachments","setAttachments","getAttachments","response","filename","BookmarkItem","bookmark","depth","toggleRef","subItemRef","subItemsDisplayed","hasSubItems","items","toggleSubItems","subItemsEle","toggleEle","clickBookmak","clickItem","paddingLeft","BookmarkList","bookmarks","jumpToDest","BookmarkLoader","setBookmarks","getOutline","outline","noBookmark","BookmarkIcon","FileIcon","WrappedScrollingIcon","ThumbnailItem","thumbnailHeight","thumbnailWidth","alpha","THUMBNAIL_WIDTH","ThumbnailContainer","ThumbnailList","currentPage","onJumpToPage","Tab","TOOLTIP_OFFSET","Sidebar","Thumbnail","tab","setTab","clickThumbnailTab","clickBookmarkTab","Bookmark","clickAttachmentTab","Attachment","renderAttachmentTip","renderBookmarkTip","renderThumbnailTip","thumbnail","DownArrowIcon","DownloadIcon","FullScreenIcon","HandToolIcon","HorizontalScrollingIcon","InfoIcon","LeftSidebarIcon","NextIcon","PreviousIcon","PrintIcon","RotateBackwardIcon","RotateForwardIcon","TextSelectionIcon","UpArrowIcon","VerticalScrollingIcon","ZoomInIcon","ZoomOutIcon","OpenFileIcon","TOOLTIP_OFFSET$1","OpenFileButton","onOpenFiles","openFiles","openFile","multiple","onChange","dateRegex","RegExp","parse$1","min","max","defaultValue","parsed","parseInt","convertDate","input","matches","exec","year","month","day","hour","minute","second","universalTimeRelation","offsetHour","offsetMinute","Date","UTC","fileSize","bytes","sufixes","log","pow","toFixed","PropertiesLoader","setData","getMetadata","meta","getDownloadInfo","contentDispositionFilename","info","PropertyItem","label","PropertiesModal","fileName$1","formatDate","date","toLocaleDateString","toLocaleTimeString","renderData","property","Title","author","Author","subject","Subject","keywords","Keywords","creator","Creator","creationDate","CreationDate","modificationDate","ModDate","pdfProducer","Producer","pdfVersion","PDFFormatVersion","pageCount","close","SearchIcon","EMPTY_KEYWORD_REGEXP","PORTAL_OFFSET","SearchPopover","onSearchFor","indexArr","keyword","setKeyword","found","setFound","_d","currentMatch","setCurrentMatch","_e","matchCase","setMatchCase","_f","wholeWords","setWholeWords","textContents","changeKeyword","getTextContents","promises","pageContent","item","all","sort","a","buildKeywordRegex","keywordParam","matchCaseParam","wholeWordsParam","flags","regexp","arr","numMatches","keydownSearch","jumpToPreviousMatch","prev","updated","jumpToNextMatch","next","changeMatchCase","isChecked","changeWholeWords","clearKeyword","renderSearch","renderPreviousMatch","previousMatch","renderNextMatch","nextMatch","placeholder","enterToSearch","onKeyDown","LEVELS","increase","currentLevel","find","decrease","findIndex","Menu","LEVELS$1","PORTAL_OFFSET$1","ZoomPopover","onZoom","getSpcialLevelLabel","level","ActualSize","zoom","actualSize","pageFit","PageWidth","round","k","clickMenuItem","MoreIcon","PORTAL_OFFSET$2","MoreActionsPopover","scrollMode","selectionMode","onChangeScrollMode","onChangeSelectionMode","onJumpToFirstPage","onJumpToLastPage","onRotate","renderMoreActions","moreActions","renderPropertyMenu","documentProperties","renderPropertiesModal","jumpToFirstPage","jumpToLastPage","rotateForward","rotateBackward","activateTextSelectionMode","Text","activateHandMode","Hand","activateScrollMode","mode","setVerticalScrollMode","Vertical","setHorizontalScrollMode","Horizontal","setWrappedScrollMode","Wrapped","goToFirstPage","goToLastPage","textSelectionTool","handTool","verticalScrolling","horizontalScrolling","wrappedScrolling","TOOLTIP_OFFSET$2","Toolbar","onDownload","onFullScreen","onJumpTo","onPrint","onToggleSidebar","renderToolbar","pageTextboxFocused","setPageTextboxFocused","editingPage","setEditingPage","setSidebarOpened","zoomOut","newLevel","zoomIn","gotoNextPage","nextPage","gotoPreviousPage","previousPage","changePage","newPage","focusPageTextbox","blurPageTextbox","keydownPage","toggleSidebar","renderToggle","renderPreviousPage","renderNextPage","renderZoomOut","renderZoomIn","renderFullScreen","fullScreen","renderDownload","download","renderPrint","renderGoToFirstPage","renderGoToLastPage","renderRotateClockwise","renderRotateCounterclockwise","renderTextSelection","renderHandTool","renderVerticalScrolling","renderHorizontalScrolling","renderDocumentProperties","renderWrappedScrolling","renderPropertyButton","onFocus","onBlur","documentPropertiesButton","goToFirstPageButton","goToLastPageButton","handToolButton","horizontalScrollingButton","rotateClockwiseButton","rotateCounterclockwiseButton","textSelectionButton","verticalScrollingButton","wrappedScrollingButton","EMPTY_KEYWORD_REGEXP$1","SCROLL_BAR_WIDTH","PAGE_PADDING","Inner","initialPage","layout","onDocumentLoad","onOpenFile","pagesRef","setScale","setCurrentPage","setRotation","setKeywordRegexp","setMatch","_g","setScrollMode","_h","currentMode","setCurrentMode","_j","pageVisibility","pageRefs","selectedFile","reader","FileReader","readAsArrayBuffer","onload","Uint8Array","_k","Inactive","setPrintStatus","jumpToPage","pagesContainer","targetPage","changeSelectionMode","newScale","pagesEle","scaled","offsetWidth","offsetHeight","pageVisibilityChanged","maxRatioPage","reduce","maxIndex","array","rotate","degree","updateRotation","changeScrollMode","newPageIndex","bottom","targetPageEle","viewer","PageSizeCalculator","LoadingStatus","AskForPasswordState","_super","verifyPasswordFn","_this","AskingPassword","password","setPassword","changePassword","submit","askingPassword","requirePasswordToOpen","CompletedState","FailureState","error","LoadingState","percentages","WrongPassword","wrongPassword","tryAgain","WrongPasswordState","DocumentLoader","setStatus","loadingTask","getDocument","onPassword","verifyPassword","reason","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","err","message","destroy","enUs","LocalizationProvider","localization","defaultL10n","Provider","ThemeProvider","Viewer","defaultScale","fileUrl","setFile","layoutOption","renderDoc","renderViewer","renderInner","ps","defaultRenderer","props","Worker","workerUrl","GlobalWorkerOptions","workerSrc","default"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AAEA,SAASC,eAAT,CAA0BC,EAA1B,EAA8B;AAAE,SAAQA,EAAE,IAAK,OAAOA,EAAP,KAAc,QAArB,IAAkC,aAAaA,EAAhD,GAAsDA,EAAE,CAAC,SAAD,CAAxD,GAAsEA,EAA7E;AAAkF;;AAElH,IAAIC,KAAK,GAAGF,eAAe,CAACG,OAAO,CAAC,OAAD,CAAR,CAA3B;;AACA,IAAIC,QAAQ,GAAGJ,eAAe,CAACG,OAAO,CAAC,WAAD,CAAR,CAA9B;;AACA,IAAIE,KAAK,GAAGF,OAAO,CAAC,YAAD,CAAnB;;AAEA,IAAIG,YAAY,GAAGJ,KAAK,CAACK,aAAN,CAAoB;AACnCC,EAAAA,WAAW,EAAE;AADsB,CAApB,CAAnB;;AAIA,IAAIC,UAAU,GAAG,UAAUC,OAAV,EAAmB;AAChC,MAAIC,MAAM,GAAG,EAAb;AACAf,EAAAA,MAAM,CAACgB,IAAP,CAAYF,OAAZ,EAAqBG,OAArB,CAA6B,UAAUC,KAAV,EAAiB;AAC1C,QAAIA,KAAK,IAAIJ,OAAO,CAACI,KAAD,CAApB,EAA6B;AACzBH,MAAAA,MAAM,CAACI,IAAP,CAAYD,KAAZ;AACH;AACJ,GAJD;AAKA,SAAOH,MAAM,CAACK,IAAP,CAAY,GAAZ,CAAP;AACH,CARD;;AAUA,IAAIC,MAAM,GAAG,UAAUC,EAAV,EAAc;AACvB,MAAIC,EAAJ;;AACA,MAAIC,QAAQ,GAAGF,EAAE,CAACE,QAAlB;AAAA,MAA4BC,EAAE,GAAGH,EAAE,CAACI,UAApC;AAAA,MAAgDA,UAAU,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,KAAhB,GAAwBA,EAArF;AAAA,MAAyFE,OAAO,GAAGL,EAAE,CAACK,OAAtG;AACA,MAAIC,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,SAAQJ,KAAK,CAACwB,aAAN,CAAoB,QAApB,EAA8B;AAAEC,IAAAA,SAAS,EAAElB,UAAU,EAAEU,EAAE,GAAG,EAAL,EACvDA,EAAE,CAACK,KAAK,CAAChB,WAAN,GAAoB,SAArB,CAAF,GAAoC,IADmB,EAEvDW,EAAE,CAACK,KAAK,CAAChB,WAAN,GAAoB,kBAArB,CAAF,GAA6Cc,UAFU,EAGvDH,EAHqD,EAAvB;AAGxBI,IAAAA,OAAO,EAAEA;AAHe,GAA9B,EAG0BH,QAH1B,CAAR;AAIH,CARD;;AAUA,IAAIQ,WAAW,GAAG,YAAY;AAC1B,MAAIJ,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,SAAQJ,KAAK,CAACwB,aAAN,CAAoB,IAApB,EAA0B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA1B,CAAR;AACH,CAHD;;AAKA,IAAIqB,IAAI,GAAG,UAAUX,EAAV,EAAc;AACrB,MAAIE,QAAQ,GAAGF,EAAE,CAACE,QAAlB;AAAA,MAA4BD,EAAE,GAAGD,EAAE,CAACY,IAApC;AAAA,MAA0CA,IAAI,GAAGX,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAAtE;AACA,MAAIK,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,MAAIyB,KAAK,GAAG,CAACD,IAAI,IAAI,EAAT,IAAe,IAA3B;AACA,SAAQ5B,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,OAAjC;AAA0CwB,IAAAA,MAAM,EAAED,KAAlD;AAAyDE,IAAAA,OAAO,EAAE,WAAlE;AAA+EF,IAAAA,KAAK,EAAEA;AAAtF,GAA3B,EAA0HX,QAA1H,CAAR;AACH,CALD;;AAOA,IAAIc,SAAS,GAAG,YAAY;AACxB,SAAQhC,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAIC,QAAQ,GAAG,UAAUlB,EAAV,EAAc;AACzB,MAAIC,EAAE,GAAGD,EAAE,CAACmB,OAAZ;AAAA,MAAqBA,OAAO,GAAGlB,EAAE,KAAK,KAAK,CAAZ,GAAgB,KAAhB,GAAwBA,EAAvD;AAAA,MAA2DC,QAAQ,GAAGF,EAAE,CAACE,QAAzE;AAAA,MAAmFC,EAAE,GAAGH,EAAE,CAACoB,IAA3F;AAAA,MAAiGA,IAAI,GAAGjB,EAAE,KAAK,KAAK,CAAZ,GAAgB,IAAhB,GAAuBA,EAA/H;AAAA,MAAmIE,OAAO,GAAGL,EAAE,CAACK,OAAhJ;AACA,MAAIC,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,SAAQJ,KAAK,CAACwB,aAAN,CAAoB,IAApB,EAA0B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,YAAjC;AAA+Ce,IAAAA,OAAO,EAAEA;AAAxD,GAA1B,EACJrB,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAAiF8B,IAAjF,CADI,EAEJpC,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAAkFY,QAAlF,CAFI,EAGJlB,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAAkF6B,OAAO,IAAInC,KAAK,CAACwB,aAAN,CAAoBQ,SAApB,EAA+B,IAA/B,CAA7F,CAHI,CAAR;AAIH,CAPD;;AASA,IAAIK,aAAa,GAAG,UAAUrB,EAAV,EAAc;AAC9B,MAAIE,QAAQ,GAAGF,EAAE,CAACE,QAAlB;AAAA,MAA4BG,OAAO,GAAGL,EAAE,CAACK,OAAzC;AACA,MAAIC,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,SAAQJ,KAAK,CAACwB,aAAN,CAAoB,QAApB,EAA8B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,iBAAjC;AAAoDe,IAAAA,OAAO,EAAEA;AAA7D,GAA9B,EAAsGH,QAAtG,CAAR;AACH,CAJD;;AAMA,IAAIoB,WAAW,GAAG,UAAUtB,EAAV,EAAc;AAC5B,MAAIuB,QAAQ,GAAGvB,EAAE,CAACuB,QAAlB;AACA,MAAIjB,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,SAAQJ,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACJN,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,qBAAjC;AAAwDkC,IAAAA,KAAK,EAAE;AAAEX,MAAAA,KAAK,EAAEU,QAAQ,GAAG;AAApB;AAA/D,GAA3B,EACIA,QADJ,EAEI,GAFJ,CADI,CAAR;AAIH,CAPD;;AASA,IAAIE,SAAS,GAAG,YAAY;AACxB,MAAInB,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,SAAQJ,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,CAAR;AACH,CAHD;;AAKA,IAAIoC,OAAO,GAAG,YAAY;AACtB,MAAIpB,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,SAAQJ,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,UAAjC;AAA6CuB,IAAAA,KAAK,EAAE,MAApD;AAA4DC,IAAAA,MAAM,EAAE,MAApE;AAA4EC,IAAAA,OAAO,EAAE;AAArF,GAA3B,EACJ/B,KAAK,CAACwB,aAAN,CAAoB,QAApB,EAA8B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,iBAAjC;AAAoDqC,IAAAA,EAAE,EAAE,IAAxD;AAA8DC,IAAAA,EAAE,EAAE,IAAlE;AAAwEC,IAAAA,CAAC,EAAE,IAA3E;AAAiFC,IAAAA,eAAe,EAAEC,IAAI,CAACC,EAAL,GAAU,CAAV,GAAc;AAAhH,GAA9B,CADI,CAAR;AAEH,CAJD;AAMA;;;;;;;;;;;;;;;AAcA;;;AAEA,IAAIC,aAAa,GAAG,UAAShB,CAAT,EAAYiB,CAAZ,EAAe;AAC/BD,EAAAA,aAAa,GAAGvD,MAAM,CAACyD,cAAP,IACX;AAAEC,IAAAA,SAAS,EAAE;AAAb,eAA6BC,KAA7B,IAAsC,UAAUpB,CAAV,EAAaiB,CAAb,EAAgB;AAAEjB,IAAAA,CAAC,CAACmB,SAAF,GAAcF,CAAd;AAAkB,GAD/D,IAEZ,UAAUjB,CAAV,EAAaiB,CAAb,EAAgB;AAAE,SAAK,IAAII,CAAT,IAAcJ,CAAd,EAAiB,IAAIA,CAAC,CAACK,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBrB,CAAC,CAACqB,CAAD,CAAD,GAAOJ,CAAC,CAACI,CAAD,CAAR;AAAc,GAF9E;;AAGA,SAAOL,aAAa,CAAChB,CAAD,EAAIiB,CAAJ,CAApB;AACH,CALD;;AAOA,SAASM,SAAT,CAAmBvB,CAAnB,EAAsBiB,CAAtB,EAAyB;AACrBD,EAAAA,aAAa,CAAChB,CAAD,EAAIiB,CAAJ,CAAb;;AACA,WAASO,EAAT,GAAc;AAAE,SAAKC,WAAL,GAAmBzB,CAAnB;AAAuB;;AACvCA,EAAAA,CAAC,CAAC0B,SAAF,GAAcT,CAAC,KAAK,IAAN,GAAaxD,MAAM,CAACkE,MAAP,CAAcV,CAAd,CAAb,IAAiCO,EAAE,CAACE,SAAH,GAAeT,CAAC,CAACS,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH;;AAED,IAAII,QAAQ,GAAG,YAAW;AACtBA,EAAAA,QAAQ,GAAGnE,MAAM,CAACoE,MAAP,IAAiB,SAASD,QAAT,CAAkBE,CAAlB,EAAqB;AAC7C,SAAK,IAAIC,CAAJ,EAAOC,CAAC,GAAG,CAAX,EAAcC,CAAC,GAAGC,SAAS,CAACC,MAAjC,EAAyCH,CAAC,GAAGC,CAA7C,EAAgDD,CAAC,EAAjD,EAAqD;AACjDD,MAAAA,CAAC,GAAGG,SAAS,CAACF,CAAD,CAAb;;AACA,WAAK,IAAIX,CAAT,IAAcU,CAAd,EAAiB,IAAItE,MAAM,CAACiE,SAAP,CAAiBJ,cAAjB,CAAgCc,IAAhC,CAAqCL,CAArC,EAAwCV,CAAxC,CAAJ,EAAgDS,CAAC,CAACT,CAAD,CAAD,GAAOU,CAAC,CAACV,CAAD,CAAR;AACpE;;AACD,WAAOS,CAAP;AACH,GAND;;AAOA,SAAOF,QAAQ,CAACS,KAAT,CAAe,IAAf,EAAqBH,SAArB,CAAP;AACH,CATD;;AAWA,IAAII,aAAa,GAAG,UAAUC,eAAV,EAA2BC,SAA3B,EAAsCC,IAAtC,EAA4CC,OAA5C,EAAqDC,OAArD,EAA8D;AAC9E,MAAI5D,EAAJ;;AACA,MAAIM,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,SAAQJ,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2BqC,QAAQ,CAAC,EAAD,EAAKY,SAAS,CAACI,KAAf,EAAsB;AAAEpD,IAAAA,SAAS,EAAElB,UAAU,EAAES,EAAE,GAAG,EAAL,EAClFA,EAAE,CAACM,KAAK,CAAChB,WAAN,GAAoB,mBAArB,CAAF,GAA8C,IADoC,EAElFU,EAAE,CAACM,KAAK,CAAChB,WAAN,GAAoB,sBAArB,CAAF,GAAiDkE,eAFiC,EAGlFxD,EAHgF,EAAvB;AAGnDwB,IAAAA,KAAK,EAAEiC,SAAS,CAACI,KAAV,CAAgBrC;AAH4B,GAAtB,CAAnC,EAIJiC,SAAS,CAACvD,QAJN,EAKJlB,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAAiFqE,OAAjF,CALI,EAMJ3E,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAAiFsE,OAAO,CAAC1D,QAAzF,CANI,EAOJlB,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2BqC,QAAQ,CAAC,EAAD,EAAKa,IAAI,CAACG,KAAV,EAAiB;AAAEpD,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,cAAjC;AAAiDkC,IAAAA,KAAK,EAAEkC,IAAI,CAACG,KAAL,CAAWrC;AAAnE,GAAjB,CAAnC,EAAiIkC,IAAI,CAACxD,QAAtI,CAPI,CAAR;AAQH,CAXD;;AAaA,IAAI4D,cAAc,GAAG,UAAUC,WAAV,EAAuB;AACxC,MAAIzD,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,SAAQJ,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACJN,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAA+EyE,WAAW,CAACC,mBAA3F,CADJ,EAEIhF,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAA+EyE,WAAW,CAACE,aAA3F,CAFJ,EAGIjF,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAA+EyE,WAAW,CAACG,kBAA3F,CAHJ,EAIIlF,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACIyE,WAAW,CAACI,gBADhB,EAEI,KAFJ,EAGIJ,WAAW,CAACK,QAHhB,CAJJ,EAQIpF,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAA+EyE,WAAW,CAACM,cAA3F,CARJ,CADI,EAUJrF,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAA+EyE,WAAW,CAACO,aAA3F,CADJ,EAEItF,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAA+EyE,WAAW,CAACQ,WAA3F,CAFJ,EAGIvF,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAA+EyE,WAAW,CAACS,YAA3F,CAHJ,CAVI,EAcJxF,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAA+EyE,WAAW,CAACU,gBAA3F,CADJ,EAEIzF,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAA+EyE,WAAW,CAACW,cAA3F,CAFJ,EAGI1F,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAA+EyE,WAAW,CAACY,cAA3F,CAHJ,EAII3F,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAA+EyE,WAAW,CAACa,WAA3F,CAJJ,EAKI5F,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAA+EyE,WAAW,CAACc,kBAA3F,CALJ,CAdI,CAAR;AAoBH,CAtBD;;AAwBA,IAAIC,QAAQ,GAAG,UAAUC,aAAV,EAAyBC,OAAzB,EAAkC;AAC7C,MAAIC,YAAY,GAAG,UAAUC,CAAV,EAAa;AAC3BA,IAAAA,CAAC,CAACC,OAAF,KAAcJ,aAAf,IAAiCC,OAAO,EAAxC;AACH,GAFD;;AAGAhG,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxBC,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,EAAmCL,YAAnC;AACA,WAAO,YAAY;AAAE,aAAOI,QAAQ,CAACE,mBAAT,CAA6B,OAA7B,EAAsCN,YAAtC,CAAP;AAA6D,KAAlF;AACH,GAHD,EAGG,EAHH;AAIH,CARD;;AAUA,IAAIO,aAAa,GAAG,YAAY;AAC5BxG,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxB,QAAIK,aAAa,GAAGC,MAAM,CAACC,gBAAP,CAAwBN,QAAQ,CAACO,IAAjC,EAAuCC,QAA3D;AACAR,IAAAA,QAAQ,CAACO,IAAT,CAAcpE,KAAd,CAAoBqE,QAApB,GAA+B,QAA/B;AACA,WAAO,YAAY;AACfR,MAAAA,QAAQ,CAACO,IAAT,CAAcpE,KAAd,CAAoBqE,QAApB,GAA+BJ,aAA/B;AACH,KAFD;AAGH,GAND,EAMG,EANH;AAOH,CARD;;AAUA,IAAIK,SAAS,GAAG,UAAU9F,EAAV,EAAc;AAC1B,MAAIE,QAAQ,GAAGF,EAAE,CAACE,QAAlB;AAAA,MAA4B6F,aAAa,GAAG/F,EAAE,CAAC+F,aAA/C;AAAA,MAA8DC,QAAQ,GAAGhG,EAAE,CAACgG,QAA5E;AACA,MAAI1F,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,MAAI6G,UAAU,GAAGjH,KAAK,CAACkH,SAAN,EAAjB;AACAV,EAAAA,aAAa;AACbV,EAAAA,QAAQ,CAAC,EAAD,EAAK,YAAY;AAAE,WAAOiB,aAAa,IAAIC,QAAQ,EAAhC;AAAqC,GAAxD,CAAR;AACA,SAAQhH,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,aAAjC;AAAgD6G,IAAAA,GAAG,EAAEF;AAArD,GAA3B,EAA8F/F,QAA9F,CAAR;AACH,CAPD;;AASA,IAAIkG,YAAY,GAAG,UAAUpG,EAAV,EAAc;AAC7B,MAAIE,QAAQ,GAAGF,EAAE,CAACE,QAAlB;AAAA,MAA4BmG,mBAAmB,GAAGrG,EAAE,CAACqG,mBAArD;AAAA,MAA0EC,OAAO,GAAGtG,EAAE,CAACsG,OAAvF;AACA,MAAIhG,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;;AACA,MAAIiB,OAAO,GAAG,UAAU6E,CAAV,EAAa;AACvB,QAAIA,CAAC,CAACqB,MAAF,KAAarB,CAAC,CAACsB,aAAf,IAAgCH,mBAApC,EAAyD;AACrDC,MAAAA,OAAO;AACV;AACJ,GAJD;;AAKA,SAAQtH,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,gBAAjC;AAAmDe,IAAAA,OAAO,EAAEA;AAA5D,GAA3B,EAAkGH,QAAlG,CAAR;AACH,CATD;;AAWA,IAAIuG,YAAJ;;AACA,CAAC,UAAUA,YAAV,EAAwB;AACrBA,EAAAA,YAAY,CAAC,OAAD,CAAZ,GAAwB,OAAxB;AACAA,EAAAA,YAAY,CAAC,MAAD,CAAZ,GAAuB,MAAvB;AACAA,EAAAA,YAAY,CAAC,QAAD,CAAZ,GAAyB,QAAzB;AACH,CAJD,EAIGA,YAAY,KAAKA,YAAY,GAAG,EAApB,CAJf;;AAKA,IAAIC,SAAS,GAAG,YAAY;AACxB,MAAI1G,EAAE,GAAGhB,KAAK,CAAC2H,QAAN,CAAe,KAAf,CAAT;AAAA,MAAgCC,MAAM,GAAG5G,EAAE,CAAC,CAAD,CAA3C;AAAA,MAAgD6G,SAAS,GAAG7G,EAAE,CAAC,CAAD,CAA9D;;AACA,MAAI8G,MAAM,GAAG,UAAUC,MAAV,EAAkB;AAC3B,YAAQA,MAAR;AACI,WAAKN,YAAY,CAACO,KAAlB;AACIH,QAAAA,SAAS,CAAC,KAAD,CAAT;AACA;;AACJ,WAAKJ,YAAY,CAACQ,IAAlB;AACIJ,QAAAA,SAAS,CAAC,IAAD,CAAT;AACA;;AACJ,WAAKJ,YAAY,CAACS,MAAlB;AACA;AACIL,QAAAA,SAAS,CAAC,UAAUM,QAAV,EAAoB;AAAE,iBAAO,CAACA,QAAR;AAAmB,SAA1C,CAAT;AACA;AAVR;AAYH,GAbD;;AAcA,SAAO;AAAEP,IAAAA,MAAM,EAAEA,MAAV;AAAkBE,IAAAA,MAAM,EAAEA;AAA1B,GAAP;AACH,CAjBD;;AAmBA,IAAIM,MAAM,GAAG,UAAUpH,EAAV,EAAc;AACvB,MAAIqH,OAAO,GAAGrH,EAAE,CAACqH,OAAjB;AAAA,MAA0Bd,MAAM,GAAGvG,EAAE,CAACuG,MAAtC;;AACA,MAAItG,EAAE,GAAGyG,SAAS,EAAlB;AAAA,MAAsBE,MAAM,GAAG3G,EAAE,CAAC2G,MAAlC;AAAA,MAA0CE,MAAM,GAAG7G,EAAE,CAAC6G,MAAtD;;AACA,SAAQ9H,KAAK,CAACwB,aAAN,CAAoBxB,KAAK,CAACsI,QAA1B,EAAoC,IAApC,EACJf,MAAM,CAACO,MAAD,EAASF,MAAT,CADF,EAEJA,MAAM,IAAI1H,QAAQ,CAACqI,YAAT,CAAsBF,OAAO,CAACP,MAAD,CAA7B,EAAuCzB,QAAQ,CAACO,IAAhD,CAFN,CAAR;AAGH,CAND;;AAQA,IAAI4B,KAAK,GAAG,UAAUxH,EAAV,EAAc;AACtB,MAAIqG,mBAAmB,GAAGrG,EAAE,CAACqG,mBAA7B;AAAA,MAAkDN,aAAa,GAAG/F,EAAE,CAAC+F,aAArE;AAAA,MAAoFsB,OAAO,GAAGrH,EAAE,CAACqH,OAAjG;AAAA,MAA0Gd,MAAM,GAAGvG,EAAE,CAACuG,MAAtH;;AACA,MAAIkB,aAAa,GAAG,UAAUX,MAAV,EAAkB;AAAE,WAAQ9H,KAAK,CAACwB,aAAN,CAAoB4F,YAApB,EAAkC;AAAEC,MAAAA,mBAAmB,EAAEA,mBAAvB;AAA4CC,MAAAA,OAAO,EAAEQ;AAArD,KAAlC,EAC5C9H,KAAK,CAACwB,aAAN,CAAoBsF,SAApB,EAA+B;AAAEC,MAAAA,aAAa,EAAEA,aAAjB;AAAgCC,MAAAA,QAAQ,EAAEc;AAA1C,KAA/B,EAAmFO,OAAO,CAACP,MAAD,CAA1F,CAD4C,CAAR;AACoE,GAD5G;;AAEA,SAAQ9H,KAAK,CAACwB,aAAN,CAAoB4G,MAApB,EAA4B;AAAEb,IAAAA,MAAM,EAAEA,MAAV;AAAkBc,IAAAA,OAAO,EAAEI;AAA3B,GAA5B,CAAR;AACH,CALD;;AAOA,IAAIC,QAAJ;;AACA,CAAC,UAAUA,QAAV,EAAoB;AACjBA,EAAAA,QAAQ,CAAC,SAAD,CAAR,GAAsB,UAAtB;AACAA,EAAAA,QAAQ,CAAC,WAAD,CAAR,GAAwB,YAAxB;AACAA,EAAAA,QAAQ,CAAC,UAAD,CAAR,GAAuB,WAAvB;AACAA,EAAAA,QAAQ,CAAC,UAAD,CAAR,GAAuB,WAAvB;AACAA,EAAAA,QAAQ,CAAC,aAAD,CAAR,GAA0B,cAA1B;AACAA,EAAAA,QAAQ,CAAC,aAAD,CAAR,GAA0B,cAA1B;AACAA,EAAAA,QAAQ,CAAC,YAAD,CAAR,GAAyB,aAAzB;AACAA,EAAAA,QAAQ,CAAC,cAAD,CAAR,GAA2B,eAA3B;AACAA,EAAAA,QAAQ,CAAC,aAAD,CAAR,GAA0B,cAA1B;AACAA,EAAAA,QAAQ,CAAC,SAAD,CAAR,GAAsB,UAAtB;AACAA,EAAAA,QAAQ,CAAC,YAAD,CAAR,GAAyB,aAAzB;AACAA,EAAAA,QAAQ,CAAC,YAAD,CAAR,GAAyB,aAAzB;AACH,CAbD,EAaGA,QAAQ,KAAKA,QAAQ,GAAG,EAAhB,CAbX;;AAcA,IAAIC,UAAU,GAAGD,QAAjB;;AAEA,IAAIE,iBAAiB,GAAG,UAAUP,OAAV,EAAmBd,MAAnB,EAA2BsB,QAA3B,EAAqCC,MAArC,EAA6C;AACjE,MAAIC,UAAU,GAAGxB,MAAM,CAACyB,qBAAP,EAAjB;AACA,MAAIC,WAAW,GAAGZ,OAAO,CAACW,qBAAR,EAAlB;AACA,MAAIlH,MAAM,GAAGmH,WAAW,CAACnH,MAAzB;AAAA,MAAiCD,KAAK,GAAGoH,WAAW,CAACpH,KAArD;AACA,MAAIqH,GAAG,GAAG,CAAV;AACA,MAAIC,IAAI,GAAG,CAAX;;AACA,UAAQN,QAAR;AACI,SAAKF,UAAU,CAACS,OAAhB;AACIF,MAAAA,GAAG,GAAGH,UAAU,CAACG,GAAX,GAAiBpH,MAAvB;AACAqH,MAAAA,IAAI,GAAGJ,UAAU,CAACI,IAAlB;AACA;;AACJ,SAAKR,UAAU,CAACU,SAAhB;AACIH,MAAAA,GAAG,GAAGH,UAAU,CAACG,GAAX,GAAiBpH,MAAvB;AACAqH,MAAAA,IAAI,GAAGJ,UAAU,CAACI,IAAX,GAAkBJ,UAAU,CAAClH,KAAX,GAAmB,CAArC,GAAyCA,KAAK,GAAG,CAAxD;AACA;;AACJ,SAAK8G,UAAU,CAACW,QAAhB;AACIJ,MAAAA,GAAG,GAAGH,UAAU,CAACG,GAAX,GAAiBpH,MAAvB;AACAqH,MAAAA,IAAI,GAAGJ,UAAU,CAACI,IAAX,GAAkBJ,UAAU,CAAClH,KAA7B,GAAqCA,KAA5C;AACA;;AACJ,SAAK8G,UAAU,CAACY,QAAhB;AACIL,MAAAA,GAAG,GAAGH,UAAU,CAACG,GAAjB;AACAC,MAAAA,IAAI,GAAGJ,UAAU,CAACI,IAAX,GAAkBJ,UAAU,CAAClH,KAApC;AACA;;AACJ,SAAK8G,UAAU,CAACa,WAAhB;AACIN,MAAAA,GAAG,GAAGH,UAAU,CAACG,GAAX,GAAiBH,UAAU,CAACjH,MAAX,GAAoB,CAArC,GAAyCA,MAAM,GAAG,CAAxD;AACAqH,MAAAA,IAAI,GAAGJ,UAAU,CAACI,IAAX,GAAkBJ,UAAU,CAAClH,KAApC;AACA;;AACJ,SAAK8G,UAAU,CAACc,WAAhB;AACIP,MAAAA,GAAG,GAAGH,UAAU,CAACG,GAAX,GAAiBH,UAAU,CAACjH,MAA5B,GAAqCA,MAA3C;AACAqH,MAAAA,IAAI,GAAGJ,UAAU,CAACI,IAAX,GAAkBJ,UAAU,CAAClH,KAApC;AACA;;AACJ,SAAK8G,UAAU,CAACe,UAAhB;AACIR,MAAAA,GAAG,GAAGH,UAAU,CAACG,GAAX,GAAiBH,UAAU,CAACjH,MAAlC;AACAqH,MAAAA,IAAI,GAAGJ,UAAU,CAACI,IAAlB;AACA;;AACJ,SAAKR,UAAU,CAACgB,YAAhB;AACIT,MAAAA,GAAG,GAAGH,UAAU,CAACG,GAAX,GAAiBH,UAAU,CAACjH,MAAlC;AACAqH,MAAAA,IAAI,GAAGJ,UAAU,CAACI,IAAX,GAAkBJ,UAAU,CAAClH,KAAX,GAAmB,CAArC,GAAyCA,KAAK,GAAG,CAAxD;AACA;;AACJ,SAAK8G,UAAU,CAACiB,WAAhB;AACIV,MAAAA,GAAG,GAAGH,UAAU,CAACG,GAAX,GAAiBH,UAAU,CAACjH,MAAlC;AACAqH,MAAAA,IAAI,GAAGJ,UAAU,CAACI,IAAX,GAAkBJ,UAAU,CAAClH,KAA7B,GAAqCA,KAA5C;AACA;;AACJ,SAAK8G,UAAU,CAACkB,OAAhB;AACIX,MAAAA,GAAG,GAAGH,UAAU,CAACG,GAAjB;AACAC,MAAAA,IAAI,GAAGJ,UAAU,CAACI,IAAX,GAAkBtH,KAAzB;AACA;;AACJ,SAAK8G,UAAU,CAACmB,UAAhB;AACIZ,MAAAA,GAAG,GAAGH,UAAU,CAACG,GAAX,GAAiBH,UAAU,CAACjH,MAAX,GAAoB,CAArC,GAAyCA,MAAM,GAAG,CAAxD;AACAqH,MAAAA,IAAI,GAAGJ,UAAU,CAACI,IAAX,GAAkBtH,KAAzB;AACA;;AACJ,SAAK8G,UAAU,CAACoB,UAAhB;AACIb,MAAAA,GAAG,GAAGH,UAAU,CAACG,GAAX,GAAiBH,UAAU,CAACjH,MAA5B,GAAqCA,MAA3C;AACAqH,MAAAA,IAAI,GAAGJ,UAAU,CAACI,IAAX,GAAkBtH,KAAzB;AACA;AAhDR;;AAkDA,SAAO;AACHsH,IAAAA,IAAI,EAAEA,IAAI,GAAG9C,QAAQ,CAACO,IAAT,CAAcoD,UAArB,IAAmClB,MAAM,CAACK,IAAP,IAAe,CAAlD,CADH;AAEHD,IAAAA,GAAG,EAAEA,GAAG,GAAG7C,QAAQ,CAACO,IAAT,CAAcqD,SAApB,IAAiCnB,MAAM,CAACI,GAAP,IAAc,CAA/C;AAFF,GAAP;AAIH,CA5DD;;AA8DA,IAAIgB,WAAW,GAAG,UAAUjD,UAAV,EAAsBkD,SAAtB,EAAiCtB,QAAjC,EAA2CC,MAA3C,EAAmD;AACjE9I,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxB,QAAIgE,SAAS,GAAGD,SAAS,CAACE,OAA1B;AACA,QAAIC,UAAU,GAAGrD,UAAU,CAACoD,OAA5B;;AACA,QAAI,CAACC,UAAD,IAAe,CAACF,SAApB,EAA+B;AAC3B;AACH;;AACD,QAAIpJ,EAAE,GAAG4H,iBAAiB,CAAC0B,UAAD,EAAaF,SAAb,EAAwBvB,QAAxB,EAAkCC,MAAlC,CAA1B;AAAA,QAAqEI,GAAG,GAAGlI,EAAE,CAACkI,GAA9E;AAAA,QAAmFC,IAAI,GAAGnI,EAAE,CAACmI,IAA7F;;AACAmB,IAAAA,UAAU,CAAC9H,KAAX,CAAiB0G,GAAjB,GAAuBA,GAAG,GAAG,IAA7B;AACAoB,IAAAA,UAAU,CAAC9H,KAAX,CAAiB2G,IAAjB,GAAwBA,IAAI,GAAG,IAA/B;AACH,GATD,EASG,EATH;AAUH,CAXD;;AAaA,IAAIoB,KAAK,GAAG,UAAUvJ,EAAV,EAAc;AACtB,MAAIC,EAAJ;;AACA,MAAIuJ,eAAe,GAAGxJ,EAAE,CAACwJ,eAAzB;AAAA,MAA0C3B,QAAQ,GAAG7H,EAAE,CAAC6H,QAAxD;AACA,MAAIvH,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,SAAQJ,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAElB,UAAU,EAAEU,EAAE,GAAG,EAAL,EACpDA,EAAE,CAACK,KAAK,CAAChB,WAAN,GAAoB,QAArB,CAAF,GAAmC,IADiB,EAEpDW,EAAE,CAACK,KAAK,CAAChB,WAAN,GAAoB,WAArB,CAAF,GAAsCuI,QAAQ,KAAKF,UAAU,CAACS,OAFV,EAGpDnI,EAAE,CAACK,KAAK,CAAChB,WAAN,GAAoB,WAArB,CAAF,GAAsCuI,QAAQ,KAAKF,UAAU,CAACU,SAHV,EAIpDpI,EAAE,CAACK,KAAK,CAAChB,WAAN,GAAoB,WAArB,CAAF,GAAsCuI,QAAQ,KAAKF,UAAU,CAACW,QAJV,EAKpDrI,EAAE,CAACK,KAAK,CAAChB,WAAN,GAAoB,WAArB,CAAF,GAAsCuI,QAAQ,KAAKF,UAAU,CAACY,QALV,EAMpDtI,EAAE,CAACK,KAAK,CAAChB,WAAN,GAAoB,WAArB,CAAF,GAAsCuI,QAAQ,KAAKF,UAAU,CAACa,WANV,EAOpDvI,EAAE,CAACK,KAAK,CAAChB,WAAN,GAAoB,WAArB,CAAF,GAAsCuI,QAAQ,KAAKF,UAAU,CAACc,WAPV,EAQpDxI,EAAE,CAACK,KAAK,CAAChB,WAAN,GAAoB,WAArB,CAAF,GAAsCuI,QAAQ,KAAKF,UAAU,CAACe,UARV,EASpDzI,EAAE,CAACK,KAAK,CAAChB,WAAN,GAAoB,WAArB,CAAF,GAAsCuI,QAAQ,KAAKF,UAAU,CAACgB,YATV,EAUpD1I,EAAE,CAACK,KAAK,CAAChB,WAAN,GAAoB,WAArB,CAAF,GAAsCuI,QAAQ,KAAKF,UAAU,CAACiB,WAVV,EAWpD3I,EAAE,CAACK,KAAK,CAAChB,WAAN,GAAoB,WAArB,CAAF,GAAsCuI,QAAQ,KAAKF,UAAU,CAACkB,OAXV,EAYpD5I,EAAE,CAACK,KAAK,CAAChB,WAAN,GAAoB,WAArB,CAAF,GAAsCuI,QAAQ,KAAKF,UAAU,CAACmB,UAZV,EAapD7I,EAAE,CAACK,KAAK,CAAChB,WAAN,GAAoB,WAArB,CAAF,GAAsCuI,QAAQ,KAAKF,UAAU,CAACoB,UAbV,EAcpD9I,EAAE,CAAC,KAAKuJ,eAAN,CAAF,GAA2BA,eAAe,KAAK,EAdK,EAepDvJ,EAfkD;AAAvB,GAA3B,CAAR;AAgBH,CApBD;;AAsBA,IAAIwJ,WAAW,GAAG,UAAUzJ,EAAV,EAAc;AAC5B,MAAIE,QAAQ,GAAGF,EAAE,CAACE,QAAlB;AAAA,MAA4B6F,aAAa,GAAG/F,EAAE,CAAC+F,aAA/C;AAAA,MAA8D+B,MAAM,GAAG9H,EAAE,CAAC8H,MAA1E;AAAA,MAAkFD,QAAQ,GAAG7H,EAAE,CAAC6H,QAAhG;AAAA,MAA0GsB,SAAS,GAAGnJ,EAAE,CAACmJ,SAAzH;AAAA,MAAoInD,QAAQ,GAAGhG,EAAE,CAACgG,QAAlJ;AACA,MAAI1F,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,MAAI6G,UAAU,GAAGjH,KAAK,CAACkH,SAAN,EAAjB;AACApB,EAAAA,QAAQ,CAAC,EAAD,EAAK,YAAY;AAAE,WAAOiB,aAAa,IAAIC,QAAQ,EAAhC;AAAqC,GAAxD,CAAR;AACAkD,EAAAA,WAAW,CAACjD,UAAD,EAAakD,SAAb,EAAwBtB,QAAxB,EAAkCC,MAAlC,CAAX;AACA,SAAQ9I,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,eAAjC;AAAkD6G,IAAAA,GAAG,EAAEF;AAAvD,GAA3B,EACJjH,KAAK,CAACwB,aAAN,CAAoB+I,KAApB,EAA2B;AAAEC,IAAAA,eAAe,EAAElJ,KAAK,CAAChB,WAAN,GAAoB,qBAAvC;AAA8DuI,IAAAA,QAAQ,EAAEA;AAAxE,GAA3B,CADI,EAEJ3H,QAFI,CAAR;AAGH,CATD;;AAWA,IAAIwJ,cAAc,GAAG,UAAU1J,EAAV,EAAc;AAC/B,MAAIE,QAAQ,GAAGF,EAAE,CAACE,QAAlB;AAAA,MAA4BmG,mBAAmB,GAAGrG,EAAE,CAACqG,mBAArD;AAAA,MAA0EC,OAAO,GAAGtG,EAAE,CAACsG,OAAvF;AACA,MAAIhG,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;;AACA,MAAIiB,OAAO,GAAG,UAAU6E,CAAV,EAAa;AACvB,QAAIA,CAAC,CAACqB,MAAF,KAAarB,CAAC,CAACsB,aAAf,IAAgCH,mBAApC,EAAyD;AACrDC,MAAAA,OAAO;AACV;AACJ,GAJD;;AAKAtH,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxB,QAAIK,aAAa,GAAGC,MAAM,CAACC,gBAAP,CAAwBN,QAAQ,CAACO,IAAjC,EAAuCiC,QAA3D;;AACA,QAAIxB,mBAAJ,EAAyB;AACrBhB,MAAAA,QAAQ,CAACO,IAAT,CAAcpE,KAAd,CAAoBqG,QAApB,GAA+B,UAA/B;AACH;;AACD,WAAO,YAAY;AACfxC,MAAAA,QAAQ,CAACO,IAAT,CAAcpE,KAAd,CAAoBmI,WAApB,CAAgC,UAAhC,EAA4ClE,aAA5C;AACH,KAFD;AAGH,GARD,EAQG,CAACY,mBAAD,CARH;AASA,SAAQA,mBAAmB,GACpBrH,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,kBAAjC;AAAqDe,IAAAA,OAAO,EAAEA;AAA9D,GAA3B,EAAoGH,QAApG,CADoB,GAErBlB,KAAK,CAACwB,aAAN,CAAoBxB,KAAK,CAACsI,QAA1B,EAAoC,IAApC,EAA0CpH,QAA1C,CAFN;AAGH,CApBD;;AAsBA,IAAI0J,OAAO,GAAG,UAAU5J,EAAV,EAAc;AACxB,MAAIqG,mBAAmB,GAAGrG,EAAE,CAACqG,mBAA7B;AAAA,MAAkDN,aAAa,GAAG/F,EAAE,CAAC+F,aAArE;AAAA,MAAoFsB,OAAO,GAAGrH,EAAE,CAACqH,OAAjG;AAAA,MAA0GS,MAAM,GAAG9H,EAAE,CAAC8H,MAAtH;AAAA,MAA8HD,QAAQ,GAAG7H,EAAE,CAAC6H,QAA5I;AAAA,MAAsJtB,MAAM,GAAGvG,EAAE,CAACuG,MAAlK;AACA,MAAI4C,SAAS,GAAGnK,KAAK,CAACkH,SAAN,EAAhB;;AACA,MAAI2D,YAAY,GAAG,UAAU/C,MAAV,EAAkBF,MAAlB,EAA0B;AAAE,WAAQ5H,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAE2F,MAAAA,GAAG,EAAEgD;AAAP,KAA3B,EAA+C5C,MAAM,CAACO,MAAD,EAASF,MAAT,CAArD,CAAR;AAAkF,GAAjI;;AACA,MAAIa,aAAa,GAAG,UAAUX,MAAV,EAAkB;AAAE,WAAQ9H,KAAK,CAACwB,aAAN,CAAoBkJ,cAApB,EAAoC;AAAErD,MAAAA,mBAAmB,EAAEA,mBAAvB;AAA4CC,MAAAA,OAAO,EAAEQ;AAArD,KAApC,EAC5C9H,KAAK,CAACwB,aAAN,CAAoBiJ,WAApB,EAAiC;AAAE1D,MAAAA,aAAa,EAAEA,aAAjB;AAAgC+B,MAAAA,MAAM,EAAEA,MAAxC;AAAgDD,MAAAA,QAAQ,EAAEA,QAA1D;AAAoEsB,MAAAA,SAAS,EAAEA,SAA/E;AAA0FnD,MAAAA,QAAQ,EAAEc;AAApG,KAAjC,EAA+IO,OAAO,CAACP,MAAD,CAAtJ,CAD4C,CAAR;AACgI,GADxK;;AAEA,SAAQ9H,KAAK,CAACwB,aAAN,CAAoB4G,MAApB,EAA4B;AAAEC,IAAAA,OAAO,EAAEI,aAAX;AAA0BlB,IAAAA,MAAM,EAAEsD;AAAlC,GAA5B,CAAR;AACH,CAPD;;AASA,IAAIC,WAAW,GAAG,UAAU9J,EAAV,EAAc;AAC5B,MAAIE,QAAQ,GAAGF,EAAE,CAACE,QAAlB;AAAA,MAA4B4H,MAAM,GAAG9H,EAAE,CAAC8H,MAAxC;AAAA,MAAgDD,QAAQ,GAAG7H,EAAE,CAAC6H,QAA9D;AAAA,MAAwEsB,SAAS,GAAGnJ,EAAE,CAACmJ,SAAvF;AACA,MAAI7I,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,MAAI6G,UAAU,GAAGjH,KAAK,CAACkH,SAAN,EAAjB;AACAgD,EAAAA,WAAW,CAACjD,UAAD,EAAakD,SAAb,EAAwBtB,QAAxB,EAAkCC,MAAlC,CAAX;AACA,SAAQ9I,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,eAAjC;AAAkD6G,IAAAA,GAAG,EAAEF;AAAvD,GAA3B,EACJjH,KAAK,CAACwB,aAAN,CAAoB+I,KAApB,EAA2B;AAAEC,IAAAA,eAAe,EAAElJ,KAAK,CAAChB,WAAN,GAAoB,qBAAvC;AAA8DuI,IAAAA,QAAQ,EAAEA;AAAxE,GAA3B,CADI,EAEJ7I,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAAuFY,QAAvF,CAFI,CAAR;AAGH,CARD;;AAUA,IAAI6J,OAAO,GAAG,UAAU/J,EAAV,EAAc;AACxB,MAAIqH,OAAO,GAAGrH,EAAE,CAACqH,OAAjB;AAAA,MAA0BS,MAAM,GAAG9H,EAAE,CAAC8H,MAAtC;AAAA,MAA8CD,QAAQ,GAAG7H,EAAE,CAAC6H,QAA5D;AAAA,MAAsEtB,MAAM,GAAGvG,EAAE,CAACuG,MAAlF;AACA,MAAI4C,SAAS,GAAGnK,KAAK,CAACkH,SAAN,EAAhB;;AACA,MAAI2D,YAAY,GAAG,UAAU/C,MAAV,EAAkB;AACjC,QAAIkD,IAAI,GAAG,YAAY;AAAElD,MAAAA,MAAM,CAACL,YAAY,CAACQ,IAAd,CAAN;AAA4B,KAArD;;AACA,QAAIgD,IAAI,GAAG,YAAY;AAAEnD,MAAAA,MAAM,CAACL,YAAY,CAACO,KAAd,CAAN;AAA6B,KAAtD;;AACA,WAAQhI,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAE2F,MAAAA,GAAG,EAAEgD,SAAP;AAAkBe,MAAAA,YAAY,EAAEF,IAAhC;AAAsCG,MAAAA,YAAY,EAAEF;AAApD,KAA3B,EAAuF1D,MAAvF,CAAR;AACH,GAJD;;AAKA,MAAIkB,aAAa,GAAG,YAAY;AAAE,WAAQzI,KAAK,CAACwB,aAAN,CAAoBsJ,WAApB,EAAiC;AAAEhC,MAAAA,MAAM,EAAEA,MAAV;AAAkBD,MAAAA,QAAQ,EAAEA,QAA5B;AAAsCsB,MAAAA,SAAS,EAAEA;AAAjD,KAAjC,EAA+F9B,OAAO,EAAtG,CAAR;AAAqH,GAAvJ;;AACA,SAAQrI,KAAK,CAACwB,aAAN,CAAoB4G,MAApB,EAA4B;AAAEb,IAAAA,MAAM,EAAEsD,YAAV;AAAwBxC,IAAAA,OAAO,EAAEI;AAAjC,GAA5B,CAAR;AACH,CAVD;;AAYA,IAAI2C,UAAJ;;AACA,CAAC,UAAUA,UAAV,EAAsB;AACnBA,EAAAA,UAAU,CAAC,YAAD,CAAV,GAA2B,YAA3B;AACAA,EAAAA,UAAU,CAAC,UAAD,CAAV,GAAyB,UAAzB;AACAA,EAAAA,UAAU,CAAC,SAAD,CAAV,GAAwB,SAAxB;AACH,CAJD,EAIGA,UAAU,KAAKA,UAAU,GAAG,EAAlB,CAJb;;AAKA,IAAIC,YAAY,GAAGD,UAAnB;AAEA,IAAIE,aAAJ;;AACA,CAAC,UAAUA,aAAV,EAAyB;AACtBA,EAAAA,aAAa,CAACA,aAAa,CAAC,MAAD,CAAb,GAAwB,CAAzB,CAAb,GAA2C,MAA3C;AACAA,EAAAA,aAAa,CAACA,aAAa,CAAC,MAAD,CAAb,GAAwB,CAAzB,CAAb,GAA2C,MAA3C;AACH,CAHD,EAGGA,aAAa,KAAKA,aAAa,GAAG,EAArB,CAHhB;;AAIA,IAAIC,eAAe,GAAGD,aAAtB;AAEA,IAAIE,gBAAJ;;AACA,CAAC,UAAUA,gBAAV,EAA4B;AACzBA,EAAAA,gBAAgB,CAAC,YAAD,CAAhB,GAAiC,YAAjC;AACAA,EAAAA,gBAAgB,CAAC,SAAD,CAAhB,GAA8B,SAA9B;AACAA,EAAAA,gBAAgB,CAAC,WAAD,CAAhB,GAAgC,WAAhC;AACH,CAJD,EAIGA,gBAAgB,KAAKA,gBAAgB,GAAG,EAAxB,CAJnB;;AAKA,IAAIC,kBAAkB,GAAGD,gBAAzB;;AAEA,IAAIE,aAAa,GAAG,UAAUvE,GAAV,EAAe;AAC/B,MAAI7F,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;;AACA,MAAIY,EAAE,GAAGhB,KAAK,CAAC2H,QAAN,CAAe,KAAf,CAAT;AAAA,MAAgCgE,OAAO,GAAG3K,EAAE,CAAC,CAAD,CAA5C;AAAA,MAAiD4K,UAAU,GAAG5K,EAAE,CAAC,CAAD,CAAhE;;AACA,MAAI6K,GAAG,GAAG7L,KAAK,CAAC8L,MAAN,CAAa;AAAE5C,IAAAA,GAAG,EAAE,CAAP;AAAUC,IAAAA,IAAI,EAAE,CAAhB;AAAmB4C,IAAAA,CAAC,EAAE,CAAtB;AAAyBC,IAAAA,CAAC,EAAE;AAA5B,GAAb,CAAV;;AACA,MAAIC,kBAAkB,GAAG,UAAU/F,CAAV,EAAa;AAClC,QAAIgG,GAAG,GAAG/E,GAAG,CAACkD,OAAd;;AACA,QAAI,CAAC6B,GAAL,EAAU;AACN;AACH;;AACDA,IAAAA,GAAG,CAACjC,SAAJ,GAAgB4B,GAAG,CAACxB,OAAJ,CAAYnB,GAAZ,IAAmBhD,CAAC,CAACiG,OAAF,GAAYN,GAAG,CAACxB,OAAJ,CAAY2B,CAA3C,CAAhB;AACAE,IAAAA,GAAG,CAAClC,UAAJ,GAAiB6B,GAAG,CAACxB,OAAJ,CAAYlB,IAAZ,IAAoBjD,CAAC,CAACkG,OAAF,GAAYP,GAAG,CAACxB,OAAJ,CAAY0B,CAA5C,CAAjB;AACH,GAPD;;AAQA,MAAIM,gBAAgB,GAAG,YAAY;AAC/B,QAAIH,GAAG,GAAG/E,GAAG,CAACkD,OAAd;;AACA,QAAI,CAAC6B,GAAL,EAAU;AACN;AACH;;AACDA,IAAAA,GAAG,CAACI,SAAJ,CAAcC,GAAd,CAAkBjL,KAAK,CAAChB,WAAN,GAAoB,OAAtC;AACA4L,IAAAA,GAAG,CAACI,SAAJ,CAAcE,MAAd,CAAqBlL,KAAK,CAAChB,WAAN,GAAoB,WAAzC;AACA+F,IAAAA,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,EAA0C0F,kBAA1C;AACA5F,IAAAA,QAAQ,CAACE,mBAAT,CAA6B,SAA7B,EAAwC8F,gBAAxC;AACH,GATD;;AAUA,MAAII,kBAAkB,GAAG,UAAUvG,CAAV,EAAa;AAClC,QAAIgG,GAAG,GAAG/E,GAAG,CAACkD,OAAd;;AACA,QAAI,CAACsB,OAAD,IAAY,CAACO,GAAjB,EAAsB;AAClB;AACH;;AACDA,IAAAA,GAAG,CAACI,SAAJ,CAAcE,MAAd,CAAqBlL,KAAK,CAAChB,WAAN,GAAoB,OAAzC;AACA4L,IAAAA,GAAG,CAACI,SAAJ,CAAcC,GAAd,CAAkBjL,KAAK,CAAChB,WAAN,GAAoB,WAAtC;AACA4F,IAAAA,CAAC,CAACwG,cAAF;AACAxG,IAAAA,CAAC,CAACyG,eAAF;AACAd,IAAAA,GAAG,CAACxB,OAAJ,GAAc;AACVlB,MAAAA,IAAI,EAAE+C,GAAG,CAAClC,UADA;AAEVd,MAAAA,GAAG,EAAEgD,GAAG,CAACjC,SAFC;AAGV8B,MAAAA,CAAC,EAAE7F,CAAC,CAACkG,OAHK;AAIVJ,MAAAA,CAAC,EAAE9F,CAAC,CAACiG;AAJK,KAAd;AAMA9F,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuC2F,kBAAvC;AACA5F,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,SAA1B,EAAqC+F,gBAArC;AACH,GAjBD;;AAkBArM,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxB,QAAI8F,GAAG,GAAG/E,GAAG,CAACkD,OAAd;;AACA,QAAI,CAAC6B,GAAL,EAAU;AACN;AACH;;AACDP,IAAAA,OAAO,GACDO,GAAG,CAACI,SAAJ,CAAcC,GAAd,CAAkBjL,KAAK,CAAChB,WAAN,GAAoB,OAAtC,CADC,GAED4L,GAAG,CAACI,SAAJ,CAAcE,MAAd,CAAqBlL,KAAK,CAAChB,WAAN,GAAoB,OAAzC,CAFN;AAGA4L,IAAAA,GAAG,CAAC5F,gBAAJ,CAAqB,WAArB,EAAkCmG,kBAAlC;AACA,WAAO,YAAY;AACfP,MAAAA,GAAG,CAAC3F,mBAAJ,CAAwB,WAAxB,EAAqCkG,kBAArC;AACH,KAFD;AAGH,GAZD,EAYG,CAACd,OAAD,CAZH;AAaA,SAAO;AACHiB,IAAAA,gBAAgB,EAAEhB;AADf,GAAP;AAGH,CAxDD;;AA0DA,IAAIiB,OAAO,GAAG,UAAU1F,GAAV,EAAe2F,MAAf,EAAuB;AACjC,MAAIC,SAAS,GAAG/M,KAAK,CAAC8L,MAAN,CAAa,CAAb,CAAhB;;AACA,MAAI9K,EAAE,GAAGhB,KAAK,CAAC2H,QAAN,CAAe,KAAf,CAAT;AAAA,MAAgCqF,UAAU,GAAGhM,EAAE,CAAC,CAAD,CAA/C;AAAA,MAAoDiM,WAAW,GAAGjM,EAAE,CAAC,CAAD,CAApE;;AACA,MAAIkM,aAAa,GAAG,UAAUhH,CAAV,EAAa;AAC7BA,IAAAA,CAAC,CAACwG,cAAF;AACAO,IAAAA,WAAW,CAAC,KAAD,CAAX;AACAF,IAAAA,SAAS,CAAC1C,OAAV,GAAoB,CAApB;;AACA,QAAInE,CAAC,CAACiH,YAAN,EAAoB;AAChBL,MAAAA,MAAM,CAAC5G,CAAC,CAACiH,YAAF,CAAeC,KAAhB,CAAN;AACH;AACJ,GAPD;;AAQA,MAAIC,iBAAiB,GAAG,UAAUnH,CAAV,EAAa;AACjCA,IAAAA,CAAC,CAACwG,cAAF;AACH,GAFD;;AAGA,MAAIY,kBAAkB,GAAG,UAAUpH,CAAV,EAAa;AAClCA,IAAAA,CAAC,CAACwG,cAAF;AACAK,IAAAA,SAAS,CAAC1C,OAAV,IAAqB,CAArB;;AACA,QAAI0C,SAAS,CAAC1C,OAAV,IAAqB,CAAzB,EAA4B;AACxB4C,MAAAA,WAAW,CAAC,IAAD,CAAX;AACH;AACJ,GAND;;AAOA,MAAIM,kBAAkB,GAAG,UAAUrH,CAAV,EAAa;AAClCA,IAAAA,CAAC,CAACwG,cAAF;AACAK,IAAAA,SAAS,CAAC1C,OAAV,IAAqB,CAArB;;AACA,QAAI0C,SAAS,CAAC1C,OAAV,IAAqB,CAAzB,EAA4B;AACxB4C,MAAAA,WAAW,CAAC,KAAD,CAAX;AACH;AACJ,GAND;;AAOAjN,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxB,QAAI8F,GAAG,GAAG/E,GAAG,CAACkD,OAAd;;AACA,QAAI,CAAC6B,GAAL,EAAU;AACN;AACH;;AACDA,IAAAA,GAAG,CAAC5F,gBAAJ,CAAqB,MAArB,EAA6B4G,aAA7B;AACAhB,IAAAA,GAAG,CAAC5F,gBAAJ,CAAqB,UAArB,EAAiC+G,iBAAjC;AACAnB,IAAAA,GAAG,CAAC5F,gBAAJ,CAAqB,WAArB,EAAkCgH,kBAAlC;AACApB,IAAAA,GAAG,CAAC5F,gBAAJ,CAAqB,WAArB,EAAkCiH,kBAAlC;AACA,WAAO,YAAY;AACfrB,MAAAA,GAAG,CAAC3F,mBAAJ,CAAwB,MAAxB,EAAgC2G,aAAhC;AACAhB,MAAAA,GAAG,CAAC3F,mBAAJ,CAAwB,UAAxB,EAAoC8G,iBAApC;AACAnB,MAAAA,GAAG,CAAC3F,mBAAJ,CAAwB,WAAxB,EAAqC+G,kBAArC;AACApB,MAAAA,GAAG,CAAC3F,mBAAJ,CAAwB,WAAxB,EAAqCgH,kBAArC;AACH,KALD;AAMH,GAfD,EAeG,CAACpG,GAAG,CAACkD,OAAL,CAfH;AAgBA,SAAO;AAAE2C,IAAAA,UAAU,EAAEA;AAAd,GAAP;AACH,CA7CD;;AA+CA,IAAIQ,GAAJ;;AACA,CAAC,UAAUA,GAAV,EAAe;AACZA,EAAAA,GAAG,CAACA,GAAG,CAAC,gBAAD,CAAH,GAAwB,CAAzB,CAAH,GAAiC,gBAAjC;AACAA,EAAAA,GAAG,CAACA,GAAG,CAAC,kBAAD,CAAH,GAA0B,CAA3B,CAAH,GAAmC,kBAAnC;AACAA,EAAAA,GAAG,CAACA,GAAG,CAAC,mBAAD,CAAH,GAA2B,CAA5B,CAAH,GAAoC,mBAApC;AACAA,EAAAA,GAAG,CAACA,GAAG,CAAC,mBAAD,CAAH,GAA2B,CAA5B,CAAH,GAAoC,mBAApC;AACAA,EAAAA,GAAG,CAACA,GAAG,CAAC,mBAAD,CAAH,GAA2B,CAA5B,CAAH,GAAoC,mBAApC;AACH,CAND,EAMGA,GAAG,KAAKA,GAAG,GAAG,EAAX,CANN;;AAOA,IAAIC,aAAa,GAAG;AAChBC,EAAAA,cAAc,EAAE,gBADA;AAEhBC,EAAAA,gBAAgB,EAAE,kBAFF;AAGhBC,EAAAA,iBAAiB,EAAE,mBAHH;AAIhBC,EAAAA,iBAAiB,EAAE,mBAJH;AAKhBC,EAAAA,iBAAiB,EAAE;AALH,CAApB;AAOA,IAAIC,YAAY,GAAG;AACfL,EAAAA,cAAc,EAAE,sBADD;AAEfC,EAAAA,gBAAgB,EAAE,wBAFH;AAGfC,EAAAA,iBAAiB,EAAE,yBAHJ;AAIfC,EAAAA,iBAAiB,EAAE,yBAJJ;AAKfC,EAAAA,iBAAiB,EAAE;AALJ,CAAnB;AAOA,IAAIE,QAAQ,GAAG;AACXN,EAAAA,cAAc,EAAE,kBADL;AAEXC,EAAAA,gBAAgB,EAAE,oBAFP;AAGXC,EAAAA,iBAAiB,EAAE,qBAHR;AAIXC,EAAAA,iBAAiB,EAAE,qBAJR;AAKXC,EAAAA,iBAAiB,EAAE;AALR,CAAf;AAOA,IAAIG,SAAS,GAAI,OAAOvH,MAAP,KAAkB,WAAnC;AACA,IAAIwH,MAAM,GAAGD,SAAS,GAAKT,GAAG,CAACK,iBAAJ,IAAyBxH,QAAzB,IAAqCoH,aAAtC,IACrBM,YAAY,CAACF,iBAAb,IAAkCxH,QAAlC,IAA8C0H,YADzB,IAErBC,QAAQ,CAACH,iBAAT,IAA8BxH,QAA9B,IAA0C2H,QAFrB,IAGtBP,aAHkB,GAGDA,aAHrB;;AAIA,IAAIU,2BAA2B,GAAG,UAAUnI,OAAV,EAAmB;AACjD,MAAIiI,SAAJ,EAAe;AACX5H,IAAAA,QAAQ,CAACC,gBAAT,CAA0B4H,MAAM,CAACP,gBAAjC,EAAmD3H,OAAnD;AACH;AACJ,CAJD;;AAKA,IAAIoI,8BAA8B,GAAG,UAAUpI,OAAV,EAAmB;AACpD,MAAIiI,SAAJ,EAAe;AACX5H,IAAAA,QAAQ,CAACE,mBAAT,CAA6B2H,MAAM,CAACP,gBAApC,EAAsD3H,OAAtD;AACH;AACJ,CAJD;;AAKA,IAAIqI,cAAc,GAAG,UAAUC,OAAV,EAAmB;AACpC,SAAOL,SAAS,GACVK,OAAO,CAACJ,MAAM,CAACR,cAAR,CAAP,EADU,GAEVa,OAAO,CAACC,OAAR,CAAgB,EAAhB,CAFN;AAGH,CAJD;;AAKA,IAAIC,oBAAoB,GAAG,YAAY;AACnC,SAAOR,SAAS,GAAG5H,QAAQ,CAAC6H,MAAM,CAACN,iBAAR,CAAX,GAAwC,IAAxD;AACH,CAFD;;AAGA,IAAIc,iBAAiB,GAAG,UAAUJ,OAAV,EAAmB;AACvC,MAAIL,SAAJ,EAAe;AACXK,IAAAA,OAAO,CAACJ,MAAM,CAACJ,iBAAR,CAAP;AACH;AACJ,CAJD;;AAMA,IAAIa,aAAa,GAAG,UAAUxH,GAAV,EAAe;AAC/B,MAAInG,EAAE,GAAGhB,KAAK,CAAC2H,QAAN,CAAe,KAAf,CAAT;AAAA,MAAgCiH,YAAY,GAAG5N,EAAE,CAAC,CAAD,CAAjD;AAAA,MAAsD6N,eAAe,GAAG7N,EAAE,CAAC,CAAD,CAA1E;;AACA,MAAI8N,oBAAoB,GAAG,YAAY;AACnC,QAAI5C,GAAG,GAAGuC,oBAAoB,EAA9B;AACA,WAAQvC,GAAG,IAAIA,GAAG,KAAK/E,GAAG,CAACkD,OAApB,GACDgE,cAAc,CAACnC,GAAD,CADb,GAEDqC,OAAO,CAACC,OAAR,EAFN;AAGH,GALD;;AAMA,MAAIO,cAAc,GAAG,YAAY;AAC7BD,IAAAA,oBAAoB,GAAGE,IAAvB,CAA4B,YAAY;AACpC,UAAI7H,GAAG,CAACkD,OAAR,EAAiB;AACbqE,QAAAA,iBAAiB,CAACvH,GAAG,CAACkD,OAAL,CAAjB;AACH;AACJ,KAJD;AAKH,GAND;;AAOA,MAAI4E,eAAe,GAAG,YAAY;AAC9B,QAAI/C,GAAG,GAAGuC,oBAAoB,EAA9B;;AACA,QAAIG,YAAY,IAAI1C,GAAhB,IAAuBA,GAAG,KAAK/E,GAAG,CAACkD,OAAvC,EAAgD;AAC5CgE,MAAAA,cAAc,CAAChI,QAAD,CAAd;AACH;AACJ,GALD;;AAMA,MAAI6I,kBAAkB,GAAG,YAAY;AACjC,QAAIhD,GAAG,GAAGuC,oBAAoB,EAA9B;AACAI,IAAAA,eAAe,CAAC3C,GAAG,KAAK/E,GAAG,CAACkD,OAAb,CAAf;AACH,GAHD;;AAIArK,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxB+H,IAAAA,2BAA2B,CAACe,kBAAD,CAA3B;AACA,WAAO,YAAY;AACfd,MAAAA,8BAA8B,CAACc,kBAAD,CAA9B;AACH,KAFD;AAGH,GALD,EAKG,CAAC/H,GAAG,CAACkD,OAAL,CALH;AAMA,SAAO;AACH4E,IAAAA,eAAe,EAAEA,eADd;AAEHL,IAAAA,YAAY,EAAEA,YAFX;AAGHG,IAAAA,cAAc,EAAEA;AAHb,GAAP;AAKH,CApCD;;AAsCA,IAAII,QAAQ,GAAG,UAAUnO,EAAV,EAAc;AACzB,MAAIE,QAAQ,GAAGF,EAAE,CAACE,QAAlB;AAAA,MAA4BkO,SAAS,GAAGpO,EAAE,CAACoO,SAA3C;AAAA,MAAsDC,mBAAmB,GAAGrO,EAAE,CAACqO,mBAA/E;AACA,MAAIC,YAAY,GAAGtP,KAAK,CAAC8L,MAAN,CAAa,IAAb,CAAnB;AACA9L,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxB,QAAImJ,EAAE,GAAG,IAAIC,oBAAJ,CAAyB,UAAUC,OAAV,EAAmB;AACjDA,MAAAA,OAAO,CAAC9O,OAAR,CAAgB,UAAU+O,KAAV,EAAiB;AAC7B,YAAIC,SAAS,GAAGD,KAAK,CAACE,cAAtB;AACA,YAAIC,KAAK,GAAGH,KAAK,CAACI,iBAAlB;AACAT,QAAAA,mBAAmB,CAAC;AAAEM,UAAAA,SAAS,EAAEA,SAAb;AAAwBE,UAAAA,KAAK,EAAEA;AAA/B,SAAD,CAAnB;AACH,OAJD;AAKH,KANQ,EAMN;AACCT,MAAAA,SAAS,EAAEA,SAAS,IAAI;AADzB,KANM,CAAT;AASA,QAAI3K,SAAS,GAAG6K,YAAY,CAACjF,OAA7B;;AACA,QAAI,CAAC5F,SAAL,EAAgB;AACZ;AACH;;AACD8K,IAAAA,EAAE,CAACQ,OAAH,CAAWtL,SAAX;AACA,WAAO,YAAY;AACf8K,MAAAA,EAAE,CAACS,SAAH,CAAavL,SAAb;AACH,KAFD;AAGH,GAlBD,EAkBG,EAlBH;AAmBA,SAAQzE,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAE2F,IAAAA,GAAG,EAAEmI;AAAP,GAA3B,EAAkDpO,QAAlD,CAAR;AACH,CAvBD;;AAyBA,IAAI+O,KAAK,GAAG,UAAUC,SAAV,EAAqBC,SAArB,EAAgC;AACxC,MAAIC,YAAJ;AACA,MAAIC,KAAJ;;AACA,UAAQF,SAAS,CAAC,CAAD,CAAT,CAAaG,IAArB;AACI,SAAK,KAAL;AACIF,MAAAA,YAAY,GAAGD,SAAS,CAAC,CAAD,CAAxB;AACAE,MAAAA,KAAK,GAAGF,SAAS,CAAC,CAAD,CAAjB;AACA,aAAO;AACHC,QAAAA,YAAY,EAAEA,YADX;AAEHF,QAAAA,SAAS,EAAEA,SAAS,GAAG,CAFpB;AAGHK,QAAAA,OAAO,EAAEF;AAHN,OAAP;;AAKJ,SAAK,KAAL;AACI,aAAO;AACHD,QAAAA,YAAY,EAAE,CADX;AAEHF,QAAAA,SAAS,EAAEA,SAAS,GAAG,CAFpB;AAGHK,QAAAA,OAAO,EAAE9E,kBAAkB,CAAC+E;AAHzB,OAAP;;AAKJ;AACI,aAAO;AACHJ,QAAAA,YAAY,EAAE,CADX;AAEHF,QAAAA,SAAS,EAAEA,SAAS,GAAG,CAFpB;AAGHK,QAAAA,OAAO,EAAE;AAHN,OAAP;AAhBR;AAsBH,CAzBD;;AA0BA,IAAIE,cAAc,GAAG,UAAUC,GAAV,EAAeC,IAAf,EAAqB;AACtC,SAAO,IAAIpC,OAAJ,CAAY,UAAUqC,GAAV,EAAe;AAC9B,QAAIrC,OAAJ,CAAY,UAAUC,OAAV,EAAmB;AAC3B,UAAI,OAAOmC,IAAP,KAAgB,QAApB,EAA8B;AAC1BD,QAAAA,GAAG,CAACD,cAAJ,CAAmBE,IAAnB,EAAyB3B,IAAzB,CAA8B,UAAUmB,SAAV,EAAqB;AAC/C3B,UAAAA,OAAO,CAAC2B,SAAD,CAAP;AACH,SAFD;AAGH,OAJD,MAKK;AACD3B,QAAAA,OAAO,CAACmC,IAAD,CAAP;AACH;AACJ,KATD,EASG3B,IATH,CASQ,UAAUmB,SAAV,EAAqB;AACzBO,MAAAA,GAAG,CAACG,YAAJ,CAAiBV,SAAS,CAAC,CAAD,CAA1B,EAA+BnB,IAA/B,CAAoC,UAAUkB,SAAV,EAAqB;AACrD,YAAI3I,MAAM,GAAG0I,KAAK,CAACC,SAAD,EAAYC,SAAZ,CAAlB;AACAS,QAAAA,GAAG,CAACrJ,MAAD,CAAH;AACH,OAHD;AAIH,KAdD;AAeH,GAhBM,CAAP;AAiBH,CAlBD;;AAoBA,IAAIuJ,SAAS,GAAG,UAAU9P,EAAV,EAAc;AAC1B,MAAI+P,QAAQ,GAAG/P,EAAE,CAAC+P,QAAlB;AAAA,MAA4B7P,QAAQ,GAAGF,EAAE,CAACE,QAA1C;AAAA,MAAoD8P,QAAQ,GAAGhQ,EAAE,CAACgQ,QAAlE;AAAA,MAA4EX,KAAK,GAAGrP,EAAE,CAACqP,KAAvF;AACArQ,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxB2K,IAAAA,QAAQ;AACX,GAFD,EAEG,CAACC,QAAD,EAAWX,KAAX,CAFH;AAGA,SAAQrQ,KAAK,CAACwB,aAAN,CAAoBxB,KAAK,CAACsI,QAA1B,EAAoC,IAApC,EAA0CpH,QAA1C,CAAR;AACH,CAND;;AAQA,IAAI+P,eAAe,GAAG,UAAUjQ,EAAV,EAAc;AAChC,MAAI0P,GAAG,GAAG1P,EAAE,CAAC0P,GAAb;AAAA,MAAkBQ,IAAI,GAAGlQ,EAAE,CAACkQ,IAA5B;AAAA,MAAkCF,QAAQ,GAAGhQ,EAAE,CAACgQ,QAAhD;AAAA,MAA0DX,KAAK,GAAGrP,EAAE,CAACqP,KAArE;AAAA,MAA4Ec,YAAY,GAAGnQ,EAAE,CAACmQ,YAA9F;AACA,MAAI7B,YAAY,GAAGtP,KAAK,CAACkH,SAAN,EAAnB;AACA,MAAI5F,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;;AACA,MAAIgR,gBAAgB,GAAG,YAAY;AAC/B,QAAI3M,SAAS,GAAG6K,YAAY,CAACjF,OAA7B;;AACA,QAAI5F,SAAJ,EAAe;AACXA,MAAAA,SAAS,CAAC4M,SAAV,GAAsB,EAAtB;AACH;;AACD,QAAIC,QAAQ,GAAGJ,IAAI,CAACK,WAAL,CAAiB;AAAEP,MAAAA,QAAQ,EAAEA,QAAZ;AAAsBX,MAAAA,KAAK,EAAEA;AAA7B,KAAjB,CAAf;AACAa,IAAAA,IAAI,CAACM,cAAL,CAAoB;AAAEC,MAAAA,MAAM,EAAE;AAAV,KAApB,EAA2CzC,IAA3C,CAAgD,UAAU0C,WAAV,EAAuB;AACnE,UAAIA,WAAW,CAACtN,MAAZ,KAAuB,CAA3B,EAA8B;AAC1B;AACH;;AACD,UAAIuN,WAAW,GAAG;AACdC,QAAAA,kBAAkB,EAAE,UAAUjB,IAAV,EAAgB;AAChC,iBAAQ,OAAOA,IAAP,KAAgB,QAAjB,GACD,MAAMkB,MAAM,CAAClB,IAAD,CADX,GAED,MAAMkB,MAAM,CAACC,IAAI,CAACC,SAAL,CAAepB,IAAf,CAAD,CAFlB;AAGH,SALa;AAMdqB,QAAAA,UAAU,EAAE,UAAUrB,IAAV,EAAgB;AACxBF,UAAAA,cAAc,CAACC,GAAD,EAAMC,IAAN,CAAd,CAA0B3B,IAA1B,CAA+B,UAAUzH,MAAV,EAAkB;AAC7C,gBAAI2I,SAAS,GAAG3I,MAAM,CAAC2I,SAAvB;AAAA,gBAAkCE,YAAY,GAAG7I,MAAM,CAAC6I,YAAxD;AAAA,gBAAsEG,OAAO,GAAGhJ,MAAM,CAACgJ,OAAvF;AACAY,YAAAA,YAAY,CAACjB,SAAS,GAAG,CAAb,EAAgBE,YAAhB,EAA8BG,OAA9B,CAAZ;AACH,WAHD;AAIH;AAXa,OAAlB;AAaA,UAAI0B,cAAc,GAAGX,QAAQ,CAACY,KAAT,CAAe;AAAEC,QAAAA,QAAQ,EAAE;AAAZ,OAAf,CAArB;AACAhS,MAAAA,KAAK,CAAC8Q,eAAN,CAAsBmB,MAAtB,CAA6B;AACzBV,QAAAA,WAAW,EAAEA,WADY;AAEzBW,QAAAA,GAAG,EAAE5N,SAFoB;AAGzBkN,QAAAA,WAAW,EAAEA,WAHY;AAIzBT,QAAAA,IAAI,EAAEA,IAJmB;AAKzBI,QAAAA,QAAQ,EAAEW;AALe,OAA7B;AAOH,KAzBD;AA0BH,GAhCD;;AAiCA,SAAQjS,KAAK,CAACwB,aAAN,CAAoBsP,SAApB,EAA+B;AAAEC,IAAAA,QAAQ,EAAEK,gBAAZ;AAA8BJ,IAAAA,QAAQ,EAAEA,QAAxC;AAAkDX,IAAAA,KAAK,EAAEA;AAAzD,GAA/B,EACJrQ,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,mBAAjC;AAAsD6G,IAAAA,GAAG,EAAEmI;AAA3D,GAA3B,CADI,CAAR;AAEH,CAvCD;;AAyCA,IAAIgD,WAAW,GAAG,UAAUtR,EAAV,EAAc;AAC5B,MAAIc,MAAM,GAAGd,EAAE,CAACc,MAAhB;AAAA,MAAwBoP,IAAI,GAAGlQ,EAAE,CAACkQ,IAAlC;AAAA,MAAwCF,QAAQ,GAAGhQ,EAAE,CAACgQ,QAAtD;AAAA,MAAgEX,KAAK,GAAGrP,EAAE,CAACqP,KAA3E;AAAA,MAAkFxO,KAAK,GAAGb,EAAE,CAACa,KAA7F;AACA,MAAIP,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,MAAImS,SAAS,GAAGvS,KAAK,CAACkH,SAAN,EAAhB;AACA,MAAIsL,UAAU,GAAGxS,KAAK,CAAC8L,MAAN,EAAjB;;AACA,MAAI2G,YAAY,GAAG,YAAY;AAC3B,QAAIC,IAAI,GAAGF,UAAU,CAACnI,OAAtB;;AACA,QAAIqI,IAAJ,EAAU;AACNA,MAAAA,IAAI,CAACC,MAAL;AACH;;AACD,QAAIC,SAAS,GAAGL,SAAS,CAAClI,OAA1B;AACA,QAAIwI,aAAa,GAAGD,SAAS,CAACE,UAAV,CAAqB,IAArB,CAApB;AACA,QAAIxB,QAAQ,GAAGJ,IAAI,CAACK,WAAL,CAAiB;AAAEP,MAAAA,QAAQ,EAAEA,QAAZ;AAAsBX,MAAAA,KAAK,EAAEA;AAA7B,KAAjB,CAAf;AACAmC,IAAAA,UAAU,CAACnI,OAAX,GAAqB6G,IAAI,CAACkB,MAAL,CAAY;AAAES,MAAAA,aAAa,EAAEA,aAAjB;AAAgCvB,MAAAA,QAAQ,EAAEA;AAA1C,KAAZ,CAArB;AACAkB,IAAAA,UAAU,CAACnI,OAAX,CAAmB0I,OAAnB,CAA2B/D,IAA3B,CAAgC,YAAY,CAAG,CAA/C,EAAiD,YAAY,CAAG,CAAhE;AACH,GAVD;;AAWA,SAAQhP,KAAK,CAACwB,aAAN,CAAoBsP,SAApB,EAA+B;AAAEC,IAAAA,QAAQ,EAAE0B,YAAZ;AAA0BzB,IAAAA,QAAQ,EAAEA,QAApC;AAA8CX,IAAAA,KAAK,EAAEA;AAArD,GAA/B,EACJrQ,KAAK,CAACwB,aAAN,CAAoB,QAApB,EAA8B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,eAAjC;AAAkDwB,IAAAA,MAAM,EAAEA,MAA1D;AAAkEqF,IAAAA,GAAG,EAAEoL,SAAvE;AAAkF1Q,IAAAA,KAAK,EAAEA;AAAzF,GAA9B,CADI,CAAR;AAEH,CAlBD;;AAoBA,IAAImR,eAAe,GAAG,UAAU9R,QAAV,EAAoB+R,MAApB,EAA4B;AAC9C,MAAI/J,GAAG,GAAGhI,QAAQ,CAACgS,SAAnB;AACA,MAAI/J,IAAI,GAAGjI,QAAQ,CAACiS,UAApB;AACA,MAAI7P,CAAC,GAAGpC,QAAQ,CAACkS,aAAjB;;AACA,SAAO9P,CAAC,IAAIA,CAAC,KAAK2P,MAAlB,EAA0B;AACtB/J,IAAAA,GAAG,IAAI5F,CAAC,CAAC4P,SAAT;AACA/J,IAAAA,IAAI,IAAI7F,CAAC,CAAC6P,UAAV;AACA7P,IAAAA,CAAC,GAAGA,CAAC,CAAC8P,aAAN;AACH;;AACD,SAAO;AACHjK,IAAAA,IAAI,EAAEA,IADH;AAEHD,IAAAA,GAAG,EAAEA;AAFF,GAAP;AAIH,CAbD;;AAeA,IAAImK,UAAU,GAAG,UAAUnH,GAAV,EAAe;AAC5B,MAAI+G,MAAM,GAAG/G,GAAG,CAACoH,UAAjB;;AACA,MAAIL,MAAJ,EAAY;AACRA,IAAAA,MAAM,CAACM,WAAP,CAAmBrH,GAAnB;AACH;AACJ,CALD;;AAMA,IAAIsH,WAAW,GAAG,UAAUC,eAAV,EAA2BC,IAA3B,EAAiC;AAC/CL,EAAAA,UAAU,CAACI,eAAD,CAAV;AACA,MAAIR,MAAM,GAAGS,IAAI,CAACJ,UAAlB;;AACA,MAAIL,MAAJ,EAAY;AACRA,IAAAA,MAAM,CAACU,YAAP,CAAoBF,eAApB,EAAqCC,IAArC;AACH;;AACDL,EAAAA,UAAU,CAACK,IAAD,CAAV;AACH,CAPD;;AAQA,IAAIE,MAAM,GAAG,UAAU1H,GAAV,EAAe;AACxB,MAAI+G,MAAM,GAAG/G,GAAG,CAACoH,UAAjB;;AACA,MAAI,CAACL,MAAL,EAAa;AACT;AACH;;AACD,MAAIY,KAAK,GAAGxN,QAAQ,CAACyN,WAAT,EAAZ;AACAD,EAAAA,KAAK,CAACE,kBAAN,CAAyB7H,GAAzB;AACAsH,EAAAA,WAAW,CAACK,KAAK,CAACG,eAAN,EAAD,EAA0B9H,GAA1B,CAAX;AACA+G,EAAAA,MAAM,CAACgB,SAAP;AACH,CATD;;AAWA,IAAIC,IAAI,GAAG,UAAUhI,GAAV,EAAeiI,WAAf,EAA4BC,SAA5B,EAAuC;AAC9C,MAAIP,KAAK,GAAG,IAAIQ,KAAJ,EAAZ;AACAR,EAAAA,KAAK,CAACS,QAAN,CAAepI,GAAf,EAAoBiI,WAApB;AACAN,EAAAA,KAAK,CAACU,MAAN,CAAarI,GAAb,EAAkBkI,SAAlB;AACA,MAAII,OAAO,GAAGnO,QAAQ,CAAC7E,aAAT,CAAuB,MAAvB,CAAd;AACAqS,EAAAA,KAAK,CAACY,gBAAN,CAAuBD,OAAvB;AACA,SAAOA,OAAP;AACH,CAPD;;AASA,IAAIE,SAAS,GAAG,UAAU1T,EAAV,EAAc;AAC1B,MAAI2T,aAAa,GAAG3T,EAAE,CAAC2T,aAAvB;AAAA,MAAsCC,KAAK,GAAG5T,EAAE,CAAC4T,KAAjD;AAAA,MAAwD1D,IAAI,GAAGlQ,EAAE,CAACkQ,IAAlE;AAAA,MAAwEhB,SAAS,GAAGlP,EAAE,CAACkP,SAAvF;AAAA,MAAkGc,QAAQ,GAAGhQ,EAAE,CAACgQ,QAAhH;AAAA,MAA0HX,KAAK,GAAGrP,EAAE,CAACqP,KAArI;AAAA,MAA4IwE,aAAa,GAAG7T,EAAE,CAAC6T,aAA/J;AACA,MAAIvT,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,MAAIkP,YAAY,GAAGtP,KAAK,CAACkH,SAAN,EAAnB;AACA,MAAIsL,UAAU,GAAGxS,KAAK,CAAC8L,MAAN,EAAjB;AACA,MAAIgJ,UAAU,GAAG9U,KAAK,CAAC8L,MAAN,CAAa,KAAb,CAAjB;;AACA,MAAIiJ,KAAK,GAAG,YAAY;AACpB,QAAIC,YAAY,GAAG1F,YAAY,CAACjF,OAAhC;;AACA,QAAI,CAAC2K,YAAL,EAAmB;AACf;AACH;;AACD,QAAIC,KAAK,GAAGD,YAAY,CAACE,gBAAb,CAA8B,UAAU5T,KAAK,CAAChB,WAAhB,GAA8B,OAA5D,CAAZ;AACA,QAAI6U,QAAQ,GAAGF,KAAK,CAAC7Q,MAArB;;AACA,SAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkR,QAApB,EAA8BlR,CAAC,EAA/B,EAAmC;AAC/B,UAAImR,IAAI,GAAGH,KAAK,CAAChR,CAAD,CAAhB;AACA+Q,MAAAA,YAAY,CAACzB,WAAb,CAAyB6B,IAAzB;AACH;AACJ,GAXD;;AAYA,MAAIC,SAAS,GAAG,UAAUD,IAAV,EAAgB;AAC5B,QAAIE,IAAI,GAAGF,IAAI,CAACG,WAAhB;;AACA,QAAI,CAACZ,aAAa,CAACa,MAAd,CAAqBC,IAArB,EAAD,IAAgC,CAACH,IAArC,EAA2C;AACvC;AACH;;AACD,QAAInB,WAAW,GAAGmB,IAAI,CAACI,MAAL,CAAYf,aAAZ,CAAlB;AACA,QAAIgB,UAAU,GAAGP,IAAI,CAACO,UAAtB;;AACA,QAAIxB,WAAW,KAAK,CAAC,CAAjB,IAAsB,CAACwB,UAA3B,EAAuC;AACnC;AACH;;AACD,QAAIvB,SAAS,GAAGD,WAAW,GAAGQ,aAAa,CAACa,MAAd,CAAqBpR,MAAnD;AACA,QAAIoQ,OAAO,GAAGN,IAAI,CAACyB,UAAD,EAAaxB,WAAb,EAA0BC,SAA1B,CAAlB;AACAI,IAAAA,OAAO,CAAClI,SAAR,CAAkBC,GAAlB,CAAsBjL,KAAK,CAAChB,WAAN,GAAoB,iBAA1C;AACH,GAbD;;AAcA,MAAIsV,cAAc,GAAG,YAAY;AAC7B,QAAIZ,YAAY,GAAG1F,YAAY,CAACjF,OAAhC;;AACA,QAAI,CAAC2K,YAAL,EAAmB;AACf;AACH;;AACD,QAAIa,cAAc,GAAGb,YAAY,CAACE,gBAAb,CAA8B,UAAU5T,KAAK,CAAChB,WAAhB,GAA8B,iBAA5D,CAArB;AACA,QAAIwV,KAAK,GAAGD,cAAc,CAACzR,MAA3B;;AACA,SAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6R,KAApB,EAA2B7R,CAAC,EAA5B,EAAgC;AAC5B2P,MAAAA,MAAM,CAACiC,cAAc,CAAC5R,CAAD,CAAf,CAAN;AACH;AACJ,GAVD;;AAWA,MAAI8R,aAAa,GAAG,YAAY;AAC5B,QAAIf,YAAY,GAAG1F,YAAY,CAACjF,OAAhC;;AACA,QAAIuK,KAAK,CAAC1E,SAAN,KAAoBA,SAApB,IAAiC,CAAC8E,YAAtC,EAAoD;AAChD;AACH;;AACD,QAAIC,KAAK,GAAGD,YAAY,CAACE,gBAAb,CAA8B,UAAU5T,KAAK,CAAChB,WAAhB,GAA8B,iBAA5D,CAAZ;;AACA,QAAIsU,KAAK,CAACoB,UAAN,GAAmBf,KAAK,CAAC7Q,MAA7B,EAAqC;AACjC,UAAIgR,IAAI,GAAGH,KAAK,CAACL,KAAK,CAACoB,UAAP,CAAhB;;AACA,UAAIhV,EAAE,GAAGgS,eAAe,CAACoC,IAAD,EAAOJ,YAAP,CAAxB;AAAA,UAA8CiB,KAAK,GAAGjV,EAAE,CAACkI,GAAzD;AAAA,UAA8DC,IAAI,GAAGnI,EAAE,CAACmI,IAAxE;;AACA0L,MAAAA,aAAa,CAAC3E,SAAD,EAAY+F,KAAK,GAAG5F,KAApB,EAA2BlH,IAAI,GAAGkH,KAAlC,CAAb;AACH;AACJ,GAXD;;AAYA,MAAI6F,UAAU,GAAG,YAAY;AACzB,QAAIxD,IAAI,GAAGF,UAAU,CAACnI,OAAtB;;AACA,QAAIqI,IAAJ,EAAU;AACNA,MAAAA,IAAI,CAACC,MAAL;AACH;;AACD,QAAIqC,YAAY,GAAG1F,YAAY,CAACjF,OAAhC;;AACA,QAAI,CAAC2K,YAAL,EAAmB;AACf;AACH;;AACD,QAAI1D,QAAQ,GAAGJ,IAAI,CAACK,WAAL,CAAiB;AAAEP,MAAAA,QAAQ,EAAEA,QAAZ;AAAsBX,MAAAA,KAAK,EAAEA;AAA7B,KAAjB,CAAf;AACAyE,IAAAA,UAAU,CAACzK,OAAX,GAAqB,KAArB;AACA6G,IAAAA,IAAI,CAACiF,cAAL,GAAsBnH,IAAtB,CAA2B,UAAUuG,WAAV,EAAuB;AAC9CR,MAAAA,KAAK;AACLvC,MAAAA,UAAU,CAACnI,OAAX,GAAqBlK,KAAK,CAACiW,eAAN,CAAsB;AACvC3R,QAAAA,SAAS,EAAEuQ,YAD4B;AAEvCO,QAAAA,WAAW,EAAEA,WAF0B;AAGvCjE,QAAAA,QAAQ,EAAEA;AAH6B,OAAtB,CAArB;AAKAkB,MAAAA,UAAU,CAACnI,OAAX,CAAmB0I,OAAnB,CAA2B/D,IAA3B,CAAgC,YAAY;AACxC8F,QAAAA,UAAU,CAACzK,OAAX,GAAqB,IAArB;AACA,YAAI4K,KAAK,GAAGD,YAAY,CAACqB,UAAzB;AACA,YAAIlB,QAAQ,GAAGF,KAAK,CAAC7Q,MAArB;;AACA,YAAIuQ,aAAJ,EAAmB;AACfiB,UAAAA,cAAc;AACjB;;AACD,aAAK,IAAI3R,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkR,QAApB,EAA8BlR,CAAC,EAA/B,EAAmC;AAC/B,cAAImR,IAAI,GAAGH,KAAK,CAAChR,CAAD,CAAhB;AACAmR,UAAAA,IAAI,CAAC9I,SAAL,CAAeC,GAAf,CAAmBjL,KAAK,CAAChB,WAAN,GAAoB,OAAvC;;AACA,cAAIqU,aAAJ,EAAmB;AACfU,YAAAA,SAAS,CAACD,IAAD,CAAT;AACH;AACJ;;AACDW,QAAAA,aAAa;AAChB,OAfD,EAeG,YAAY,CAAG,CAflB;AAgBH,KAvBD;AAwBH,GAnCD;;AAoCA/V,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxB,QAAI4O,YAAY,GAAG1F,YAAY,CAACjF,OAAhC;;AACA,QAAI,CAACsK,aAAD,IAAkB,CAACG,UAAU,CAACzK,OAA9B,IAAyC,CAAC2K,YAA9C,EAA4D;AACxD;AACH;;AACDY,IAAAA,cAAc;;AACd,QAAIjB,aAAa,CAACa,MAAd,CAAqBC,IAArB,EAAJ,EAAiC;AAC7B,UAAIR,KAAK,GAAGD,YAAY,CAACE,gBAAb,CAA8B,UAAU5T,KAAK,CAAChB,WAAhB,GAA8B,OAA5D,CAAZ;AACA,UAAI6U,QAAQ,GAAGF,KAAK,CAAC7Q,MAArB;;AACA,WAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkR,QAApB,EAA8BlR,CAAC,EAA/B,EAAmC;AAC/BoR,QAAAA,SAAS,CAACJ,KAAK,CAAChR,CAAD,CAAN,CAAT;AACH;AACJ;AACJ,GAbD,EAaG,CAAC0Q,aAAD,EAAgBG,UAAU,CAACzK,OAA3B,CAbH;AAcArK,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxB,QAAI0O,UAAU,CAACzK,OAAf,EAAwB;AACpB0L,MAAAA,aAAa;AAChB;AACJ,GAJD,EAIG,CAACnB,KAAD,CAJH;AAKA,SAAQ5U,KAAK,CAACwB,aAAN,CAAoBsP,SAApB,EAA+B;AAAEC,IAAAA,QAAQ,EAAEmF,UAAZ;AAAwBlF,IAAAA,QAAQ,EAAEA,QAAlC;AAA4CX,IAAAA,KAAK,EAAEA;AAAnD,GAA/B,EACJrQ,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,aAAjC;AAAgD6G,IAAAA,GAAG,EAAEmI;AAArD,GAA3B,CADI,CAAR;AAEH,CAhHD;;AAkHA,IAAIgH,SAAS,GAAG,UAAUtV,EAAV,EAAc;AAC1B,MAAI0P,GAAG,GAAG1P,EAAE,CAAC0P,GAAb;AAAA,MAAkB5O,MAAM,GAAGd,EAAE,CAACc,MAA9B;AAAA,MAAsC6S,aAAa,GAAG3T,EAAE,CAAC2T,aAAzD;AAAA,MAAwEC,KAAK,GAAG5T,EAAE,CAAC4T,KAAnF;AAAA,MAA0F1E,SAAS,GAAGlP,EAAE,CAACkP,SAAzG;AAAA,MAAoHc,QAAQ,GAAGhQ,EAAE,CAACgQ,QAAlI;AAAA,MAA4IX,KAAK,GAAGrP,EAAE,CAACqP,KAAvJ;AAAA,MAA8JxO,KAAK,GAAGb,EAAE,CAACa,KAAzK;AAAA,MAAgLsP,YAAY,GAAGnQ,EAAE,CAACmQ,YAAlM;AAAA,MAAgNoF,uBAAuB,GAAGvV,EAAE,CAACuV,uBAA7O;AACA,MAAIjV,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;;AACA,MAAIa,EAAE,GAAGjB,KAAK,CAAC2H,QAAN,CAAe;AACpB6O,IAAAA,YAAY,EAAE,KADM;AAEpBtF,IAAAA,IAAI,EAAE,IAFc;AAGpBuF,IAAAA,UAAU,EAAE3U,MAHQ;AAIpB4U,IAAAA,SAAS,EAAE7U;AAJS,GAAf,CAAT;AAAA,MAKI8U,QAAQ,GAAG1V,EAAE,CAAC,CAAD,CALjB;AAAA,MAKsB2V,WAAW,GAAG3V,EAAE,CAAC,CAAD,CALtC;;AAMA,MAAIuV,YAAY,GAAGG,QAAQ,CAACH,YAA5B;AAAA,MAA0CtF,IAAI,GAAGyF,QAAQ,CAACzF,IAA1D;AAAA,MAAgEuF,UAAU,GAAGE,QAAQ,CAACF,UAAtF;AAAA,MAAkGC,SAAS,GAAGC,QAAQ,CAACD,SAAvH;AACA,MAAIG,qBAAqB,GAAGxT,KAAK,CAAC,EAAD,CAAL,CAAUyT,IAAV,CAAe,IAAf,EAAqBC,GAArB,CAAyB,UAAUC,CAAV,EAAa/S,CAAb,EAAgB;AAAE,WAAOA,CAAC,GAAG,EAAX;AAAgB,GAA3D,CAA5B;AACA,MAAIgT,WAAW,GAAGP,SAAS,GAAGrG,KAA9B;AACA,MAAI6G,YAAY,GAAGT,UAAU,GAAGpG,KAAhC;AACA,MAAI8G,UAAU,GAAGpU,IAAI,CAACqU,GAAL,CAASpG,QAAT,IAAqB,GAArB,KAA6B,CAA9C;AACA,MAAIqG,CAAC,GAAGF,UAAU,GAAGF,WAAH,GAAiBC,YAAnC;AACA,MAAII,CAAC,GAAGH,UAAU,GAAGD,YAAH,GAAkBD,WAApC;;AACA,MAAIM,iBAAiB,GAAG,UAAUC,MAAV,EAAkB;AACtC,QAAI3H,KAAK,GAAG2H,MAAM,CAAC7H,SAAP,GAAmB6H,MAAM,CAAC3H,KAA1B,GAAkC,CAA9C;AACA0G,IAAAA,uBAAuB,CAACrG,SAAD,EAAYL,KAAZ,CAAvB;;AACA,QAAI2H,MAAM,CAAC7H,SAAP,IAAoB,CAAC6G,YAAzB,EAAuC;AACnC9F,MAAAA,GAAG,CAAC+G,OAAJ,CAAYvH,SAAS,GAAG,CAAxB,EAA2BlB,IAA3B,CAAgC,UAAU0I,OAAV,EAAmB;AAC/C,YAAIpG,QAAQ,GAAGoG,OAAO,CAACnG,WAAR,CAAoB;AAAElB,UAAAA,KAAK,EAAE;AAAT,SAApB,CAAf;AACAuG,QAAAA,WAAW,CAAC;AACRJ,UAAAA,YAAY,EAAE,IADN;AAERtF,UAAAA,IAAI,EAAEwG,OAFE;AAGRjB,UAAAA,UAAU,EAAEnF,QAAQ,CAACxP,MAHb;AAIR4U,UAAAA,SAAS,EAAEpF,QAAQ,CAACzP;AAJZ,SAAD,CAAX;AAMH,OARD;AASH;AACJ,GAdD;;AAeA,MAAI8V,WAAW,GAAG,UAAUC,WAAV,EAAuB1O,GAAvB,EAA4BC,IAA5B,EAAkC;AAChDgI,IAAAA,YAAY,CAACyG,WAAD,EAAcnB,UAAU,GAAGvN,GAA3B,EAAgCmH,KAAhC,CAAZ;AACH,GAFD;;AAGA,SAAQrQ,KAAK,CAACwB,aAAN,CAAoB2N,QAApB,EAA8B;AAAEE,IAAAA,mBAAmB,EAAEkI,iBAAvB;AAA0CnI,IAAAA,SAAS,EAAEyH;AAArD,GAA9B,EACJ7W,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,aAAjC;AAAgDkC,IAAAA,KAAK,EAAE;AAC1EV,MAAAA,MAAM,EAAEwV,CAAC,GAAG,IAD8D;AAE1EzV,MAAAA,KAAK,EAAEwV,CAAC,GAAG;AAF+D;AAAvD,GAA3B,EAGS,CAACnG,IAAD,GACHlR,KAAK,CAACwB,aAAN,CAAoBkB,OAApB,EAA6B,IAA7B,CADG,GAEF1C,KAAK,CAACwB,aAAN,CAAoBxB,KAAK,CAACsI,QAA1B,EAAoC,IAApC,EACCtI,KAAK,CAACwB,aAAN,CAAoB8Q,WAApB,EAAiC;AAAExQ,IAAAA,MAAM,EAAEwV,CAAV;AAAapG,IAAAA,IAAI,EAAEA,IAAnB;AAAyBF,IAAAA,QAAQ,EAAEA,QAAnC;AAA6CX,IAAAA,KAAK,EAAEA,KAApD;AAA2DxO,IAAAA,KAAK,EAAEwV;AAAlE,GAAjC,CADD,EAECrX,KAAK,CAACwB,aAAN,CAAoBkT,SAApB,EAA+B;AAAEC,IAAAA,aAAa,EAAEA,aAAjB;AAAgCC,IAAAA,KAAK,EAAEA,KAAvC;AAA8C1D,IAAAA,IAAI,EAAEA,IAApD;AAA0DhB,IAAAA,SAAS,EAAEA,SAArE;AAAgFc,IAAAA,QAAQ,EAAEA,QAA1F;AAAoGX,IAAAA,KAAK,EAAEA,KAA3G;AAAkHwE,IAAAA,aAAa,EAAE8C;AAAjI,GAA/B,CAFD,EAGC3X,KAAK,CAACwB,aAAN,CAAoByP,eAApB,EAAqC;AAAEP,IAAAA,GAAG,EAAEA,GAAP;AAAYQ,IAAAA,IAAI,EAAEA,IAAlB;AAAwBF,IAAAA,QAAQ,EAAEA,QAAlC;AAA4CX,IAAAA,KAAK,EAAEA,KAAnD;AAA0Dc,IAAAA,YAAY,EAAEA;AAAxE,GAArC,CAHD,CALP,CADI,CAAR;AAUH,CA5CD;;AA8CA,IAAI0G,mBAAmB,GAAG7X,KAAK,CAACK,aAAN,CAAoB,EAApB,CAA1B;;AAEA,IAAIyX,QAAQ,GAAG,YAAY;AACvB,MAAIC,IAAI,GAAG/X,KAAK,CAACuB,UAAN,CAAiBsW,mBAAjB,CAAX;AACA,MAAIvW,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,SAAQJ,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAA4EyX,IAAI,CAACrT,IAAL,CAAUsT,YAAtF,CAAR;AACH,CAJD;;AAMA,IAAIC,aAAa,GAAG,UAAUjX,EAAV,EAAc;AAC9B,MAAIkX,cAAc,GAAGlX,EAAE,CAACkX,cAAxB;AAAA,MAAwC9S,QAAQ,GAAGpE,EAAE,CAACoE,QAAtD;AAAA,MAAgE+S,QAAQ,GAAGnX,EAAE,CAACmX,QAA9E;AAAA,MAAwFC,eAAe,GAAGpX,EAAE,CAACoX,eAA7G;AACA,MAAIL,IAAI,GAAG/X,KAAK,CAACuB,UAAN,CAAiBsW,mBAAjB,CAAX;AACA,MAAIvW,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,MAAImC,QAAQ,GAAGQ,IAAI,CAACsV,KAAL,CAAWH,cAAc,GAAG,GAAjB,GAAuB9S,QAAlC,CAAf;AACApF,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxB,QAAI8R,cAAc,KAAK9S,QAAvB,EAAiC;AAC7BgT,MAAAA,eAAe;AAClB;AACJ,GAJD,EAIG,CAACF,cAAD,CAJH;AAKA,SAAQlY,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACJN,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAAyFyX,IAAI,CAACO,aAAL,CAAmBC,iBAA5G,CADJ,EAEIvY,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoBc,WAApB,EAAiC;AAAEC,IAAAA,QAAQ,EAAEA;AAAZ,GAAjC,CADJ,CAFJ,EAIIvC,KAAK,CAACwB,aAAN,CAAoBa,aAApB,EAAmC;AAAEhB,IAAAA,OAAO,EAAE8W;AAAX,GAAnC,EAA0DJ,IAAI,CAACO,aAAL,CAAmB3F,MAA7E,CAJJ,CADI,CAAR;AAMH,CAhBD;;AAkBA,IAAI6F,WAAJ;;AACA,CAAC,UAAUA,WAAV,EAAuB;AACpBA,EAAAA,WAAW,CAAC,UAAD,CAAX,GAA0B,UAA1B;AACAA,EAAAA,WAAW,CAAC,WAAD,CAAX,GAA2B,WAA3B;AACAA,EAAAA,WAAW,CAAC,WAAD,CAAX,GAA2B,WAA3B;AACAA,EAAAA,WAAW,CAAC,OAAD,CAAX,GAAuB,OAAvB;AACH,CALD,EAKGA,WAAW,KAAKA,WAAW,GAAG,EAAnB,CALd;;AAMA,IAAIC,aAAa,GAAGD,WAApB;;AAEA,IAAIE,aAAa,GAAG,UAAU1X,EAAV,EAAc;AAC9B,MAAIkQ,IAAI,GAAGlQ,EAAE,CAACkQ,IAAd;AAAA,MAAoBuF,UAAU,GAAGzV,EAAE,CAACyV,UAApC;AAAA,MAAgDC,SAAS,GAAG1V,EAAE,CAAC0V,SAA/D;AAAA,MAA0E1F,QAAQ,GAAGhQ,EAAE,CAACgQ,QAAxF;AAAA,MAAkG2H,MAAM,GAAG3X,EAAE,CAAC2X,MAA9G;AACA,MAAIrX,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,MAAIoS,UAAU,GAAGxS,KAAK,CAAC8L,MAAN,EAAjB;;AACA,MAAI7K,EAAE,GAAGjB,KAAK,CAAC2H,QAAN,CAAe,EAAf,CAAT;AAAA,MAA6BiR,GAAG,GAAG3X,EAAE,CAAC,CAAD,CAArC;AAAA,MAA0C4X,MAAM,GAAG5X,EAAE,CAAC,CAAD,CAArD;;AACAjB,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxB,QAAIsM,IAAI,GAAGF,UAAU,CAACnI,OAAtB;;AACA,QAAIqI,IAAJ,EAAU;AACNA,MAAAA,IAAI,CAACC,MAAL;AACH;;AACD,QAAImG,MAAM,GAAGzS,QAAQ,CAAC7E,aAAT,CAAuB,QAAvB,CAAb;AACA,QAAIuX,SAAS,GAAG,MAAM,EAAtB;AACAD,IAAAA,MAAM,CAAChX,MAAP,GAAgBiB,IAAI,CAACsV,KAAL,CAAW5B,UAAU,GAAGsC,SAAxB,CAAhB;AACAD,IAAAA,MAAM,CAACjX,KAAP,GAAekB,IAAI,CAACsV,KAAL,CAAW3B,SAAS,GAAGqC,SAAvB,CAAf;AACA,QAAIlG,aAAa,GAAGiG,MAAM,CAAChG,UAAP,CAAkB,IAAlB,CAApB;AACAD,IAAAA,aAAa,CAACmG,IAAd;AACAnG,IAAAA,aAAa,CAACoG,SAAd,GAA0B,oBAA1B;AACApG,IAAAA,aAAa,CAACqG,QAAd,CAAuB,CAAvB,EAA0B,CAA1B,EAA6BJ,MAAM,CAACjX,KAApC,EAA2CiX,MAAM,CAAChX,MAAlD;AACA+Q,IAAAA,aAAa,CAACsG,OAAd;AACA,QAAI7H,QAAQ,GAAGJ,IAAI,CAACK,WAAL,CAAiB;AAAEP,MAAAA,QAAQ,EAAEA,QAAZ;AAAsBX,MAAAA,KAAK,EAAE;AAA7B,KAAjB,CAAf;AACAmC,IAAAA,UAAU,CAACnI,OAAX,GAAqB6G,IAAI,CAACkB,MAAL,CAAY;AAC7BS,MAAAA,aAAa,EAAEA,aADc;AAE7BpB,MAAAA,MAAM,EAAE,OAFqB;AAG7B2H,MAAAA,SAAS,EAAE,CAACL,SAAD,EAAY,CAAZ,EAAe,CAAf,EAAkBA,SAAlB,EAA6B,CAA7B,EAAgC,CAAhC,CAHkB;AAI7BzH,MAAAA,QAAQ,EAAEA;AAJmB,KAAZ,CAArB;AAMAkB,IAAAA,UAAU,CAACnI,OAAX,CAAmB0I,OAAnB,CAA2B/D,IAA3B,CAAgC,YAAY;AACvC,kBAAY8J,MAAb,GACMA,MAAM,CAACO,MAAP,CAAc,UAAUC,IAAV,EAAgB;AAC5BT,QAAAA,MAAM,CAACU,GAAG,CAACC,eAAJ,CAAoBF,IAApB,CAAD,CAAN;AACH,OAFC,CADN,GAIMT,MAAM,CAACC,MAAM,CAACW,SAAP,EAAD,CAJZ;AAKH,KAND,EAMG,YAAY,CAAG,CANlB;AAOH,GA5BD,EA4BG,EA5BH;AA6BA,SAAQ,CAACb,GAAD,GACF5Y,KAAK,CAACwB,aAAN,CAAoBkB,OAApB,EAA6B,IAA7B,CADE,GAED1C,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,uBAAjC;AAA0DkC,IAAAA,KAAK,EAAE;AACvFV,MAAAA,MAAM,EAAEiB,IAAI,CAACsV,KAAL,CAAW5B,UAAU,GAAG,EAAb,GAAkB,EAA7B,IAAmC,IAD4C;AAEvF5U,MAAAA,KAAK,EAAEkB,IAAI,CAACsV,KAAL,CAAW3B,SAAS,GAAG,EAAZ,GAAiB,EAA5B,IAAkC;AAF8C;AAAjE,GAA3B,EAIC1W,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEoX,IAAAA,GAAG,EAAEA,GAAP;AAAYpW,IAAAA,KAAK,EAAE;AACtCV,MAAAA,MAAM,EAAEiB,IAAI,CAACsV,KAAL,CAAW5B,UAAU,GAAG,EAAb,GAAkB,EAA7B,IAAmC,IADL;AAEtC5U,MAAAA,KAAK,EAAEkB,IAAI,CAACsV,KAAL,CAAW3B,SAAS,GAAG,EAAZ,GAAiB,EAA5B,IAAkC;AAFH,KAAnB;AAGpBiC,IAAAA,MAAM,EAAEA;AAHY,GAA3B,CAJD,CAFP;AAUH,CA5CD;;AA8CA,IAAIe,sBAAsB,GAAG,UAAU1Y,EAAV,EAAc;AACvC,MAAI0P,GAAG,GAAG1P,EAAE,CAAC0P,GAAb;AAAA,MAAkB+F,UAAU,GAAGzV,EAAE,CAACyV,UAAlC;AAAA,MAA8CvG,SAAS,GAAGlP,EAAE,CAACkP,SAA7D;AAAA,MAAwEwG,SAAS,GAAG1V,EAAE,CAAC0V,SAAvF;AAAA,MAAkG1F,QAAQ,GAAGhQ,EAAE,CAACgQ,QAAhH;AAAA,MAA0H2H,MAAM,GAAG3X,EAAE,CAAC2X,MAAtI;;AACA,MAAI1X,EAAE,GAAGjB,KAAK,CAAC2H,QAAN,CAAe;AACpB7F,IAAAA,MAAM,EAAE2U,UADY;AAEpBvF,IAAAA,IAAI,EAAE,IAFc;AAGpBrP,IAAAA,KAAK,EAAE6U;AAHa,GAAf,CAAT;AAAA,MAIIC,QAAQ,GAAG1V,EAAE,CAAC,CAAD,CAJjB;AAAA,MAIsB2V,WAAW,GAAG3V,EAAE,CAAC,CAAD,CAJtC;;AAKA,MAAIiQ,IAAI,GAAGyF,QAAQ,CAACzF,IAApB;AAAA,MAA0BpP,MAAM,GAAG6U,QAAQ,CAAC7U,MAA5C;AAAA,MAAoDD,KAAK,GAAG8U,QAAQ,CAAC9U,KAArE;AACA,MAAIsV,UAAU,GAAGpU,IAAI,CAACqU,GAAL,CAASpG,QAAT,IAAqB,GAArB,KAA6B,CAA9C;AACAhR,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxBsK,IAAAA,GAAG,CAAC+G,OAAJ,CAAYvH,SAAS,GAAG,CAAxB,EAA2BlB,IAA3B,CAAgC,UAAU0I,OAAV,EAAmB;AAC/C,UAAIpG,QAAQ,GAAGoG,OAAO,CAACnG,WAAR,CAAoB;AAAElB,QAAAA,KAAK,EAAE;AAAT,OAApB,CAAf;AACAuG,MAAAA,WAAW,CAAC;AACR9U,QAAAA,MAAM,EAAEwP,QAAQ,CAACxP,MADT;AAERoP,QAAAA,IAAI,EAAEwG,OAFE;AAGR7V,QAAAA,KAAK,EAAEyP,QAAQ,CAACzP;AAHR,OAAD,CAAX;AAKH,KAPD;AAQH,GATD,EASG,EATH;AAUA,SAAQ,CAACqP,IAAD,GACFlR,KAAK,CAACwB,aAAN,CAAoBkB,OAApB,EAA6B,IAA7B,CADE,GAED1C,KAAK,CAACwB,aAAN,CAAoBkX,aAApB,EAAmC;AAAExH,IAAAA,IAAI,EAAEA,IAAR;AAAcuF,IAAAA,UAAU,EAAEU,UAAU,GAAGrV,MAAH,GAAYD,KAAhD;AAAuD6U,IAAAA,SAAS,EAAES,UAAU,GAAGtV,KAAH,GAAWC,MAAvF;AAA+FkP,IAAAA,QAAQ,EAAEA,QAAzG;AAAmH2H,IAAAA,MAAM,EAAEA;AAA3H,GAAnC,CAFP;AAGH,CAtBD;;AAwBA,IAAIgB,SAAS,GAAG,UAAU3Y,EAAV,EAAc;AAC1B,MAAI0P,GAAG,GAAG1P,EAAE,CAAC0P,GAAb;AAAA,MAAkB+F,UAAU,GAAGzV,EAAE,CAACyV,UAAlC;AAAA,MAA8CC,SAAS,GAAG1V,EAAE,CAAC0V,SAA7D;AAAA,MAAwEkD,WAAW,GAAG5Y,EAAE,CAAC4Y,WAAzF;AAAA,MAAsG5I,QAAQ,GAAGhQ,EAAE,CAACgQ,QAApH;AAAA,MAA8HmH,QAAQ,GAAGnX,EAAE,CAACmX,QAA5I;AAAA,MAAsJQ,MAAM,GAAG3X,EAAE,CAAC2X,MAAlK;AACA,MAAIrX,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;;AACA,MAAIa,EAAE,GAAGjB,KAAK,CAAC2H,QAAN,CAAe,CAAf,CAAT;AAAA,MAA4BuQ,cAAc,GAAGjX,EAAE,CAAC,CAAD,CAA/C;AAAA,MAAoD4Y,iBAAiB,GAAG5Y,EAAE,CAAC,CAAD,CAA1E;;AACAjB,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxB,QAAIwT,WAAW,KAAKnB,aAAa,CAACqB,KAAlC,EAAyC;AACrCzT,MAAAA,QAAQ,CAACO,IAAT,CAAc0F,SAAd,CAAwBC,GAAxB,CAA4BjL,KAAK,CAAChB,WAAN,GAAoB,gBAAhD;AACAoG,MAAAA,MAAM,CAACqT,KAAP;AACH;;AACD,QAAI/T,OAAO,GAAG,YAAY;AACtB,UAAI4T,WAAW,KAAKnB,aAAa,CAACqB,KAAlC,EAAyC;AACrCzT,QAAAA,QAAQ,CAACO,IAAT,CAAc0F,SAAd,CAAwBE,MAAxB,CAA+BlL,KAAK,CAAChB,WAAN,GAAoB,gBAAnD;AACA6X,QAAAA,QAAQ;AACX;AACJ,KALD;;AAMA9R,IAAAA,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,EAAuCN,OAAvC;AACA,WAAO,YAAY;AAAE,aAAOK,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,EAA0CP,OAA1C,CAAP;AAA4D,KAAjF;AACH,GAbD,EAaG,CAAC4T,WAAD,CAbH;AAcA,MAAIxU,QAAQ,GAAGsL,GAAG,CAACtL,QAAnB;;AACA,MAAI4U,QAAQ,GAAG,YAAY;AACvB,QAAIlE,KAAK,GAAGoC,cAAc,GAAG,CAA7B;AACA2B,IAAAA,iBAAiB,CAAC/D,KAAD,CAAjB;AACA6C,IAAAA,MAAM,CAAC7C,KAAD,CAAN;AACH,GAJD;;AAKA,SAAQ5V,QAAQ,CAACqI,YAAT,CAAuBvI,KAAK,CAACwB,aAAN,CAAoBxB,KAAK,CAACsI,QAA1B,EAAoC,IAApC,EAC3BtI,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAA6E+C,KAAK,CAAC+B,QAAD,CAAL,CAAgB0R,IAAhB,CAAqB,CAArB,EAAwBC,GAAxB,CAA4B,UAAUC,CAAV,EAAaiD,KAAb,EAAoB;AACzH,WAAQja,KAAK,CAACwB,aAAN,CAAoBkY,sBAApB,EAA4C;AAAEQ,MAAAA,GAAG,EAAED,KAAP;AAAcvJ,MAAAA,GAAG,EAAEA,GAAnB;AAAwB+F,MAAAA,UAAU,EAAEA,UAApC;AAAgDvG,MAAAA,SAAS,EAAE+J,KAA3D;AAAkEvD,MAAAA,SAAS,EAAEA,SAA7E;AAAwF1F,MAAAA,QAAQ,EAAEA,QAAlG;AAA4G2H,MAAAA,MAAM,EAAEqB;AAApH,KAA5C,CAAR;AACH,GAF4E,CAA7E,CAD2B,EAI3Bha,KAAK,CAACwB,aAAN,CAAoB,OAApB,EAA6B;AAAE2Y,IAAAA,uBAAuB,EAAE;AAChDC,MAAAA,MAAM,EAAE,6HAA6H1D,SAA7H,GAAyI,KAAzI,GAAiJD,UAAjJ,GAA8J;AADtH;AAA3B,GAA7B,CAJ2B,CAAvB,EAMQpQ,QAAQ,CAACO,IANjB,CAAR;AAOH,CA/BD;;AAiCA,IAAIyT,cAAc,GAAG,UAAUrZ,EAAV,EAAc;AAC/B,MAAI0P,GAAG,GAAG1P,EAAE,CAAC0P,GAAb;AAAA,MAAkB+F,UAAU,GAAGzV,EAAE,CAACyV,UAAlC;AAAA,MAA8CC,SAAS,GAAG1V,EAAE,CAAC0V,SAA7D;AAAA,MAAwEkD,WAAW,GAAG5Y,EAAE,CAAC4Y,WAAzF;AAAA,MAAsG5I,QAAQ,GAAGhQ,EAAE,CAACgQ,QAApH;AAAA,MAA8HmH,QAAQ,GAAGnX,EAAE,CAACmX,QAA5I;AAAA,MAAsJC,eAAe,GAAGpX,EAAE,CAACoX,eAA3K;;AACA,MAAInX,EAAE,GAAGjB,KAAK,CAAC2H,QAAN,CAAe,CAAf,CAAT;AAAA,MAA4B2S,sBAAsB,GAAGrZ,EAAE,CAAC,CAAD,CAAvD;AAAA,MAA4DsZ,yBAAyB,GAAGtZ,EAAE,CAAC,CAAD,CAA1F;;AACA,MAAIuZ,cAAc,GAAG,YAAY;AAC7BD,IAAAA,yBAAyB,CAAC,CAAD,CAAzB;AACApC,IAAAA,QAAQ;AACX,GAHD;;AAIA,MAAIsC,aAAa,GAAG,YAAY;AAC5BF,IAAAA,yBAAyB,CAAC,CAAD,CAAzB;AACAnC,IAAAA,eAAe;AAClB,GAHD;;AAIA,SAAQpY,KAAK,CAACwB,aAAN,CAAoBxB,KAAK,CAACsI,QAA1B,EAAoC,IAApC,EACJsR,WAAW,KAAKnB,aAAa,CAACiC,SAA9B,IAA4C1a,KAAK,CAACwB,aAAN,CAAoByW,aAApB,EAAmC;AAAEC,IAAAA,cAAc,EAAEoC,sBAAlB;AAA0ClV,IAAAA,QAAQ,EAAEsL,GAAG,CAACtL,QAAxD;AAAkE+S,IAAAA,QAAQ,EAAEqC,cAA5E;AAA4FpC,IAAAA,eAAe,EAAEqC;AAA7G,GAAnC,CADxC,EAEJ,CAACb,WAAW,KAAKnB,aAAa,CAACiC,SAA9B,IAA2Cd,WAAW,KAAKnB,aAAa,CAACqB,KAA1E,KAAqF9Z,KAAK,CAACwB,aAAN,CAAoBmY,SAApB,EAA+B;AAAEjJ,IAAAA,GAAG,EAAEA,GAAP;AAAY+F,IAAAA,UAAU,EAAEA,UAAxB;AAAoCC,IAAAA,SAAS,EAAEA,SAA/C;AAA0DkD,IAAAA,WAAW,EAAEA,WAAvE;AAAoF5I,IAAAA,QAAQ,EAAEA,QAA9F;AAAwGmH,IAAAA,QAAQ,EAAEqC,cAAlH;AAAkI7B,IAAAA,MAAM,EAAE4B;AAA1I,GAA/B,CAFjF,CAAR;AAGH,CAdD;;AAgBA,IAAII,QAAQ,GAAG,UAAUC,GAAV,EAAe;AAC1B,MAAIC,GAAG,GAAGD,GAAG,CAACE,KAAJ,CAAU,GAAV,EAAeC,GAAf,EAAV;AACA,SAAOF,GAAG,GAAGA,GAAG,CAACC,KAAJ,CAAU,GAAV,EAAe,CAAf,EAAkBA,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,CAAH,GAAqCF,GAA/C;AACH,CAHD;;AAKA,IAAII,YAAY,GAAG,UAAUJ,GAAV,EAAeK,IAAf,EAAqB;AACpC,MAAIC,OAAO,GAAI,OAAOD,IAAP,KAAgB,QAAjB,GACR,EADQ,GAER1B,GAAG,CAACC,eAAJ,CAAoB,IAAI2B,IAAJ,CAAS,CAACF,IAAD,CAAT,EAAiB;AAAEG,IAAAA,IAAI,EAAE;AAAR,GAAjB,CAApB,CAFN;AAGA,MAAIC,IAAI,GAAGhV,QAAQ,CAAC7E,aAAT,CAAuB,GAAvB,CAAX;AACA6Z,EAAAA,IAAI,CAAC7Y,KAAL,CAAW8Y,OAAX,GAAqB,MAArB;AACAD,EAAAA,IAAI,CAACE,IAAL,GAAYL,OAAO,IAAIN,GAAvB;AACAS,EAAAA,IAAI,CAACG,YAAL,CAAkB,UAAlB,EAA8Bb,QAAQ,CAACC,GAAD,CAAtC;AACAvU,EAAAA,QAAQ,CAACO,IAAT,CAAc6U,WAAd,CAA0BJ,IAA1B;AACAA,EAAAA,IAAI,CAACK,KAAL;AACArV,EAAAA,QAAQ,CAACO,IAAT,CAAc2M,WAAd,CAA0B8H,IAA1B;;AACA,MAAIH,OAAJ,EAAa;AACT3B,IAAAA,GAAG,CAACoC,eAAJ,CAAoBT,OAApB;AACH;AACJ,CAdD;;AAgBA,IAAIU,UAAU,GAAG,UAAUhB,GAAV,EAAe;AAC5B,MAAIC,GAAG,GAAGD,GAAG,CAACE,KAAJ,CAAU,IAAV,EAAgBC,GAAhB,EAAV;AACA,SAAOF,GAAG,GAAGA,GAAG,CAACgB,WAAJ,EAAH,GAAuB,EAAjC;AACH,CAHD;;AAKA,IAAIC,kBAAkB,GAAG,YAAY;AACjC,SAAQ9b,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAIyL,cAAc,GAAG,UAAU1M,EAAV,EAAc;AAC/B,MAAIK,OAAO,GAAGL,EAAE,CAACK,OAAjB;AACA,MAAIC,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,SAAQJ,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACJN,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,IAAAA,OAAO,EAAEA;AAAX,GAA5B,EACIrB,KAAK,CAACwB,aAAN,CAAoBsa,kBAApB,EAAwC,IAAxC,CADJ,CADJ,CADI,CAAR;AAIH,CAPD;;AASA,IAAIC,cAAc,GAAG,UAAU/a,EAAV,EAAc;AAC/B,MAAIoM,KAAK,GAAGpM,EAAE,CAACoM,KAAf;AACA,MAAI2K,IAAI,GAAG/X,KAAK,CAACuB,UAAN,CAAiBsW,mBAAjB,CAAX;AACA,MAAIvW,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;;AACA,MAAI4b,UAAU,GAAG,UAAUC,IAAV,EAAgB;AAC7B,QAAI5a,OAAO,GAAG,YAAY;AAAE,aAAO2Z,YAAY,CAACiB,IAAI,CAACtB,QAAN,EAAgBsB,IAAI,CAAChB,IAArB,CAAnB;AAAgD,KAA5E;;AACA,WAAQjb,KAAK,CAACwB,aAAN,CAAoB,IAApB,EAA0B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,kBAAjC;AAAqD4Z,MAAAA,GAAG,EAAE,gBAAgB+B,IAAI,CAACtB,QAA/E;AAAyFuB,MAAAA,KAAK,EAAE,KAAKnE,IAAI,CAACoE,UAAL,CAAgBC,eAArH;AAAsI/a,MAAAA,OAAO,EAAEA;AAA/I,KAA1B,EAAoL4a,IAAI,CAACtB,QAAzL,CAAR;AACH,GAHD;;AAIA,SAAQvN,KAAK,CAAChJ,MAAN,KAAiB,CAAjB,GACFpE,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAAwFyX,IAAI,CAACoE,UAAL,CAAgBE,YAAxG,CADE,GAEDrc,KAAK,CAACwB,aAAN,CAAoB,IAApB,EAA0B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA1B,EAAiF8M,KAAK,CAAC2J,GAAN,CAAUiF,UAAV,CAAjF,CAFP;AAGH,CAXD;;AAaA,IAAIM,gBAAgB,GAAG,UAAUtb,EAAV,EAAc;AACjC,MAAI0P,GAAG,GAAG1P,EAAE,CAAC0P,GAAb;;AACA,MAAIzP,EAAE,GAAGjB,KAAK,CAAC2H,QAAN,CAAe;AACpByF,IAAAA,KAAK,EAAE,EADa;AAEpBmP,IAAAA,QAAQ,EAAE;AAFU,GAAf,CAAT;AAAA,MAGIC,WAAW,GAAGvb,EAAE,CAAC,CAAD,CAHpB;AAAA,MAGyBwb,cAAc,GAAGxb,EAAE,CAAC,CAAD,CAH5C;;AAIAjB,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxBsK,IAAAA,GAAG,CAACgM,cAAJ,GAAqB1N,IAArB,CAA0B,UAAU2N,QAAV,EAAoB;AAC1C,UAAIvP,KAAK,GAAGuP,QAAQ,GACdjd,MAAM,CAACgB,IAAP,CAAYic,QAAZ,EAAsB5F,GAAtB,CAA0B,UAAUkF,IAAV,EAAgB;AACxC,eAAO;AACHhB,UAAAA,IAAI,EAAE0B,QAAQ,CAACV,IAAD,CAAR,CAAe5T,OADlB;AAEHsS,UAAAA,QAAQ,EAAEgC,QAAQ,CAACV,IAAD,CAAR,CAAeW;AAFtB,SAAP;AAIH,OALC,CADc,GAOd,EAPN;AAQAH,MAAAA,cAAc,CAAC;AACXrP,QAAAA,KAAK,EAAEA,KADI;AAEXmP,QAAAA,QAAQ,EAAE;AAFC,OAAD,CAAd;AAIH,KAbD;AAcH,GAfD,EAeG,EAfH;AAgBA,SAAQ,CAACC,WAAW,CAACD,QAAb,GACFvc,KAAK,CAACwB,aAAN,CAAoBkB,OAApB,EAA6B,IAA7B,CADE,GAEF1C,KAAK,CAACwB,aAAN,CAAoBua,cAApB,EAAoC;AAAE3O,IAAAA,KAAK,EAAEoP,WAAW,CAACpP;AAArB,GAApC,CAFN;AAGH,CAzBD;;AA2BA,IAAIyP,YAAY,GAAG,UAAU7b,EAAV,EAAc;AAC7B,MAAI8b,QAAQ,GAAG9b,EAAE,CAAC8b,QAAlB;AAAA,MAA4BC,KAAK,GAAG/b,EAAE,CAAC+b,KAAvC;AAAA,MAA8CrM,GAAG,GAAG1P,EAAE,CAAC0P,GAAvD;AAAA,MAA4DrP,OAAO,GAAGL,EAAE,CAACK,OAAzE;AAAA,MAAkF8P,YAAY,GAAGnQ,EAAE,CAACmQ,YAApG;AACA,MAAI7P,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,MAAI4c,SAAS,GAAGhd,KAAK,CAACkH,SAAN,EAAhB;AACA,MAAI+V,UAAU,GAAGjd,KAAK,CAACkH,SAAN,EAAjB;AACA,MAAIgW,iBAAiB,GAAGld,KAAK,CAAC8L,MAAN,CAAa,IAAb,CAAxB;AACA,MAAIqR,WAAW,GAAGL,QAAQ,CAACM,KAAT,IAAkBN,QAAQ,CAACM,KAAT,CAAehZ,MAAf,GAAwB,CAA5D;;AACA,MAAIiZ,cAAc,GAAG,YAAY;AAC7BH,IAAAA,iBAAiB,CAAC7S,OAAlB,GAA4B,CAAC6S,iBAAiB,CAAC7S,OAA/C;AACA,QAAIiT,WAAW,GAAGL,UAAU,CAAC5S,OAA7B;AACA,QAAIkT,SAAS,GAAGP,SAAS,CAAC3S,OAA1B;;AACA,QAAI,CAACiT,WAAD,IAAgB,CAACC,SAArB,EAAgC;AAC5B;AACH;;AACDD,IAAAA,WAAW,CAAC9a,KAAZ,CAAkB8Y,OAAlB,GAA4B4B,iBAAiB,CAAC7S,OAAlB,GAA4B,OAA5B,GAAsC,MAAlE;AACAkT,IAAAA,SAAS,CAACjR,SAAV,CAAoBxE,MAApB,CAA2BxG,KAAK,CAAChB,WAAN,GAAoB,2BAA/C;AACH,GATD;;AAUA,MAAIkd,YAAY,GAAG,YAAY;AAC3B,QAAIL,WAAJ,EAAiB;AACb9b,MAAAA,OAAO,CAACyb,QAAQ,CAACnM,IAAV,CAAP;AACH;AACJ,GAJD;;AAKA,MAAI8M,SAAS,GAAG,YAAY;AACxB,QAAI,CAACN,WAAL,EAAkB;AACd9b,MAAAA,OAAO,CAACyb,QAAQ,CAACnM,IAAV,CAAP;AACH;AACJ,GAJD;;AAKA,SAAQ3Q,KAAK,CAACwB,aAAN,CAAoBxB,KAAK,CAACsI,QAA1B,EAAoC,IAApC,EACJtI,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,gBAAjC;AAAmDkC,IAAAA,KAAK,EAAE;AAC7Ekb,MAAAA,WAAW,EAAEX,KAAK,GAAG,EAAR,GAAa,CAAb,GAAiB;AAD+C,KAA1D;AAEpB1b,IAAAA,OAAO,EAAEoc;AAFW,GAA3B,EAGIN,WAAW,IAAKnd,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAE2F,IAAAA,GAAG,EAAE6V,SAAP;AAAkBvb,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,kBAAjD;AAAqEe,IAAAA,OAAO,EAAEgc;AAA9E,GAA5B,EAA4H,QAA5H,CAHpB,EAIIrd,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,iBAAjC;AAAoDe,IAAAA,OAAO,EAAEmc;AAA7D,GAA3B,EAAwGV,QAAQ,CAACZ,KAAjH,CAJJ,CADI,EAMJiB,WAAW,IAAKnd,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAE2F,IAAAA,GAAG,EAAE8V;AAAP,GAA3B,EACZjd,KAAK,CAACwB,aAAN,CAAoBmc,YAApB,EAAkC;AAAEC,IAAAA,SAAS,EAAEd,QAAQ,CAACM,KAAtB;AAA6BL,IAAAA,KAAK,EAAEA,KAAK,GAAG,CAA5C;AAA+CrM,IAAAA,GAAG,EAAEA,GAApD;AAAyDS,IAAAA,YAAY,EAAEA;AAAvE,GAAlC,CADY,CANZ,CAAR;AAQH,CAnCD;;AAqCA,IAAIwM,YAAY,GAAG,UAAU3c,EAAV,EAAc;AAC7B,MAAI4c,SAAS,GAAG5c,EAAE,CAAC4c,SAAnB;AAAA,MAA8B3c,EAAE,GAAGD,EAAE,CAAC+b,KAAtC;AAAA,MAA6CA,KAAK,GAAG9b,EAAE,KAAK,KAAK,CAAZ,GAAgB,CAAhB,GAAoBA,EAAzE;AAAA,MAA6EyP,GAAG,GAAG1P,EAAE,CAAC0P,GAAtF;AAAA,MAA2FS,YAAY,GAAGnQ,EAAE,CAACmQ,YAA7G;AACA,MAAI7P,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;;AACA,MAAIyd,UAAU,GAAG,UAAUlN,IAAV,EAAgB;AAC7BF,IAAAA,cAAc,CAACC,GAAD,EAAMC,IAAN,CAAd,CAA0B3B,IAA1B,CAA+B,UAAUzH,MAAV,EAAkB;AAC7C,UAAI2I,SAAS,GAAG3I,MAAM,CAAC2I,SAAvB;AAAA,UAAkCE,YAAY,GAAG7I,MAAM,CAAC6I,YAAxD;AAAA,UAAsEG,OAAO,GAAGhJ,MAAM,CAACgJ,OAAvF;AACAY,MAAAA,YAAY,CAACjB,SAAS,GAAG,CAAb,EAAgBE,YAAhB,EAA8BG,OAA9B,CAAZ;AACH,KAHD;AAIH,GALD;;AAMA,SAAQvQ,KAAK,CAACwB,aAAN,CAAoB,IAApB,EAA0B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA1B,EAA+Esd,SAAS,CAAC7G,GAAV,CAAc,UAAU+F,QAAV,EAAoB7C,KAApB,EAA2B;AAC5H,WAAQja,KAAK,CAACwB,aAAN,CAAoB,IAApB,EAA0B;AAAE0Y,MAAAA,GAAG,EAAED;AAAP,KAA1B,EACJja,KAAK,CAACwB,aAAN,CAAoBqb,YAApB,EAAkC;AAAEC,MAAAA,QAAQ,EAAEA,QAAZ;AAAsBC,MAAAA,KAAK,EAAEA,KAA7B;AAAoCrM,MAAAA,GAAG,EAAEA,GAAzC;AAA8CrP,MAAAA,OAAO,EAAEwc,UAAvD;AAAmE1M,MAAAA,YAAY,EAAEA;AAAjF,KAAlC,CADI,CAAR;AAEH,GAHsF,CAA/E,CAAR;AAIH,CAbD;;AAeA,IAAI2M,cAAc,GAAG,UAAU9c,EAAV,EAAc;AAC/B,MAAI0P,GAAG,GAAG1P,EAAE,CAAC0P,GAAb;AAAA,MAAkBS,YAAY,GAAGnQ,EAAE,CAACmQ,YAApC;AACA,MAAI4G,IAAI,GAAG/X,KAAK,CAACuB,UAAN,CAAiBsW,mBAAjB,CAAX;AACA,MAAIvW,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;;AACA,MAAIa,EAAE,GAAGjB,KAAK,CAAC2H,QAAN,CAAe;AACpB4U,IAAAA,QAAQ,EAAE,KADU;AAEpBa,IAAAA,KAAK,EAAE;AAFa,GAAf,CAAT;AAAA,MAGIQ,SAAS,GAAG3c,EAAE,CAAC,CAAD,CAHlB;AAAA,MAGuB8c,YAAY,GAAG9c,EAAE,CAAC,CAAD,CAHxC;;AAIAjB,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxBsK,IAAAA,GAAG,CAACsN,UAAJ,GAAiBhP,IAAjB,CAAsB,UAAUiP,OAAV,EAAmB;AACrCF,MAAAA,YAAY,CAAC;AACTxB,QAAAA,QAAQ,EAAE,IADD;AAETa,QAAAA,KAAK,EAAEa,OAAO,IAAI;AAFT,OAAD,CAAZ;AAIH,KALD;AAMH,GAPD,EAOG,EAPH;AAQA,SAAQ,CAACL,SAAS,CAACrB,QAAX,GACFvc,KAAK,CAACwB,aAAN,CAAoBkB,OAApB,EAA6B,IAA7B,CADE,GAEDkb,SAAS,CAACR,KAAV,CAAgBhZ,MAAhB,KAA2B,CAA3B,GACGpE,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAAiFyX,IAAI,CAAC+E,QAAL,CAAcoB,UAA/F,CADH,GAEIle,KAAK,CAACwB,aAAN,CAAoBmc,YAApB,EAAkC;AAAEC,IAAAA,SAAS,EAAEA,SAAS,CAACR,KAAvB;AAA8BL,IAAAA,KAAK,EAAE,CAArC;AAAwCrM,IAAAA,GAAG,EAAEA,GAA7C;AAAkDS,IAAAA,YAAY,EAAEA;AAAhE,GAAlC,CAJX;AAKH,CArBD;;AAuBA,IAAIgN,YAAY,GAAG,YAAY;AAC3B,SAAQne,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAImc,QAAQ,GAAG,YAAY;AACvB,SAAQpe,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAIoc,oBAAoB,GAAG,YAAY;AACnC,SAAQre,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAIqc,aAAa,GAAG,UAAUtd,EAAV,EAAc;AAC9B,MAAIkQ,IAAI,GAAGlQ,EAAE,CAACkQ,IAAd;AAAA,MAAoBuF,UAAU,GAAGzV,EAAE,CAACyV,UAApC;AAAA,MAAgDC,SAAS,GAAG1V,EAAE,CAAC0V,SAA/D;AAAA,MAA0E1F,QAAQ,GAAGhQ,EAAE,CAACgQ,QAAxF;AAAA,MAAkGuN,eAAe,GAAGvd,EAAE,CAACud,eAAvH;AAAA,MAAwIC,cAAc,GAAGxd,EAAE,CAACwd,cAA5J;AACA,MAAIhM,UAAU,GAAGxS,KAAK,CAAC8L,MAAN,EAAjB;;AACA,MAAI7K,EAAE,GAAGjB,KAAK,CAAC2H,QAAN,CAAe,EAAf,CAAT;AAAA,MAA6BiR,GAAG,GAAG3X,EAAE,CAAC,CAAD,CAArC;AAAA,MAA0C4X,MAAM,GAAG5X,EAAE,CAAC,CAAD,CAArD;;AACAjB,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxB,QAAIsM,IAAI,GAAGF,UAAU,CAACnI,OAAtB;;AACA,QAAIqI,IAAJ,EAAU;AACNA,MAAAA,IAAI,CAACC,MAAL;AACH;;AACD,QAAImG,MAAM,GAAGzS,QAAQ,CAAC7E,aAAT,CAAuB,QAAvB,CAAb;AACA,QAAIqR,aAAa,GAAGiG,MAAM,CAAChG,UAAP,CAAkB,IAAlB,EAAwB;AAAE2L,MAAAA,KAAK,EAAE;AAAT,KAAxB,CAApB;AACA,QAAIpH,CAAC,GAAGmH,cAAR;AACA,QAAIlH,CAAC,GAAGD,CAAC,IAAIX,SAAS,GAAGD,UAAhB,CAAT;AACA,QAAIpG,KAAK,GAAGgH,CAAC,GAAGX,SAAhB;AACAoC,IAAAA,MAAM,CAAChX,MAAP,GAAgBwV,CAAhB;AACAwB,IAAAA,MAAM,CAACjX,KAAP,GAAewV,CAAf;AACAyB,IAAAA,MAAM,CAACtW,KAAP,CAAaV,MAAb,GAAsBwV,CAAC,GAAG,IAA1B;AACAwB,IAAAA,MAAM,CAACtW,KAAP,CAAaX,KAAb,GAAqBwV,CAAC,GAAG,IAAzB;AACA,QAAI/F,QAAQ,GAAGJ,IAAI,CAACK,WAAL,CAAiB;AAAEP,MAAAA,QAAQ,EAAEA,QAAZ;AAAsBX,MAAAA,KAAK,EAAEA;AAA7B,KAAjB,CAAf;AACAmC,IAAAA,UAAU,CAACnI,OAAX,GAAqB6G,IAAI,CAACkB,MAAL,CAAY;AAAES,MAAAA,aAAa,EAAEA,aAAjB;AAAgCvB,MAAAA,QAAQ,EAAEA;AAA1C,KAAZ,CAArB;AACAkB,IAAAA,UAAU,CAACnI,OAAX,CAAmB0I,OAAnB,CAA2B/D,IAA3B,CAAgC,YAAY;AAAE,aAAO6J,MAAM,CAACC,MAAM,CAACW,SAAP,EAAD,CAAb;AAAoC,KAAlF,EAAoF,YAAY,CAAG,CAAnG;AACH,GAjBD,EAiBG,CAACzI,QAAD,CAjBH;AAkBA,SAAQ,CAAC4H,GAAD,GACF5Y,KAAK,CAACwB,aAAN,CAAoBkB,OAApB,EAA6B,IAA7B,CADE,GAEF1C,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEoX,IAAAA,GAAG,EAAEA,GAAP;AAAY9W,IAAAA,MAAM,EAAEyc,eAAe,GAAG,IAAtC;AAA4C1c,IAAAA,KAAK,EAAE2c,cAAc,GAAG;AAApE,GAA3B,CAFN;AAGH,CAzBD;;AA2BA,IAAIE,eAAe,GAAG,GAAtB;;AACA,IAAIC,kBAAkB,GAAG,UAAU3d,EAAV,EAAc;AACnC,MAAI0P,GAAG,GAAG1P,EAAE,CAAC0P,GAAb;AAAA,MAAkB+F,UAAU,GAAGzV,EAAE,CAACyV,UAAlC;AAAA,MAA8CvG,SAAS,GAAGlP,EAAE,CAACkP,SAA7D;AAAA,MAAwEwG,SAAS,GAAG1V,EAAE,CAAC0V,SAAvF;AAAA,MAAkG1F,QAAQ,GAAGhQ,EAAE,CAACgQ,QAAhH;AACA,MAAI1P,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;;AACA,MAAIa,EAAE,GAAGjB,KAAK,CAAC2H,QAAN,CAAe;AACpB7F,IAAAA,MAAM,EAAE2U,UADY;AAEpBD,IAAAA,YAAY,EAAE,KAFM;AAGpBtF,IAAAA,IAAI,EAAE,IAHc;AAIpBrP,IAAAA,KAAK,EAAE6U;AAJa,GAAf,CAAT;AAAA,MAKIC,QAAQ,GAAG1V,EAAE,CAAC,CAAD,CALjB;AAAA,MAKsB2V,WAAW,GAAG3V,EAAE,CAAC,CAAD,CALtC;;AAMA,MAAIuV,YAAY,GAAGG,QAAQ,CAACH,YAA5B;AAAA,MAA0CtF,IAAI,GAAGyF,QAAQ,CAACzF,IAA1D;AAAA,MAAgEpP,MAAM,GAAG6U,QAAQ,CAAC7U,MAAlF;AAAA,MAA0FD,KAAK,GAAG8U,QAAQ,CAAC9U,KAA3G;AACA,MAAIwO,KAAK,GAAGxO,KAAK,GAAGC,MAApB;AACA,MAAIqV,UAAU,GAAGpU,IAAI,CAACqU,GAAL,CAASpG,QAAT,IAAqB,GAArB,KAA6B,CAA9C;AACA,MAAIqG,CAAC,GAAGF,UAAU,GAAGuH,eAAH,GAAsBA,eAAe,GAAGrO,KAA1D;AACA,MAAIiH,CAAC,GAAGH,UAAU,GAAIuH,eAAe,GAAGrO,KAAtB,GAA+BqO,eAAjD;;AACA,MAAIrP,mBAAmB,GAAG,UAAUmI,MAAV,EAAkB;AACxC,QAAIA,MAAM,CAAC7H,SAAP,IAAoB,CAAC6G,YAAzB,EAAuC;AACnC9F,MAAAA,GAAG,CAAC+G,OAAJ,CAAYvH,SAAS,GAAG,CAAxB,EAA2BlB,IAA3B,CAAgC,UAAU0I,OAAV,EAAmB;AAC/C,YAAIpG,QAAQ,GAAGoG,OAAO,CAACnG,WAAR,CAAoB;AAAElB,UAAAA,KAAK,EAAE;AAAT,SAApB,CAAf;AACAuG,QAAAA,WAAW,CAAC;AACR9U,UAAAA,MAAM,EAAEwP,QAAQ,CAACxP,MADT;AAER0U,UAAAA,YAAY,EAAE,IAFN;AAGRtF,UAAAA,IAAI,EAAEwG,OAHE;AAIR7V,UAAAA,KAAK,EAAEyP,QAAQ,CAACzP;AAJR,SAAD,CAAX;AAMH,OARD;AASH;AACJ,GAZD;;AAaA,SAAQ7B,KAAK,CAACwB,aAAN,CAAoB2N,QAApB,EAA8B;AAAEE,IAAAA,mBAAmB,EAAEA;AAAvB,GAA9B,EACJrP,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,sBAAjC;AAAyDkC,IAAAA,KAAK,EAAE;AACnFV,MAAAA,MAAM,EAAEwV,CAAC,GAAG,IADuE;AAEnFzV,MAAAA,KAAK,EAAEwV,CAAC,GAAG;AAFwE;AAAhE,GAA3B,EAGS,CAACnG,IAAD,GACHlR,KAAK,CAACwB,aAAN,CAAoBkB,OAApB,EAA6B,IAA7B,CADG,GAEF1C,KAAK,CAACwB,aAAN,CAAoB8c,aAApB,EAAmC;AAAEpN,IAAAA,IAAI,EAAEA,IAAR;AAAcuF,IAAAA,UAAU,EAAEU,UAAU,GAAGrV,MAAH,GAAYD,KAAhD;AAAuD6U,IAAAA,SAAS,EAAES,UAAU,GAAGtV,KAAH,GAAWC,MAAvF;AAA+FkP,IAAAA,QAAQ,EAAEA,QAAzG;AAAmHuN,IAAAA,eAAe,EAAEjH,CAApI;AAAuIkH,IAAAA,cAAc,EAAEnH;AAAvJ,GAAnC,CALP,CADI,CAAR;AAOH,CAlCD;;AAoCA,IAAIuH,aAAa,GAAG,UAAU5d,EAAV,EAAc;AAC9B,MAAI6d,WAAW,GAAG7d,EAAE,CAAC6d,WAArB;AAAA,MAAkCnO,GAAG,GAAG1P,EAAE,CAAC0P,GAA3C;AAAA,MAAgD+F,UAAU,GAAGzV,EAAE,CAACyV,UAAhE;AAAA,MAA4EC,SAAS,GAAG1V,EAAE,CAAC0V,SAA3F;AAAA,MAAsG1F,QAAQ,GAAGhQ,EAAE,CAACgQ,QAApH;AAAA,MAA8H8N,YAAY,GAAG9d,EAAE,CAAC8d,YAAhJ;AACA,MAAIxd,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,MAAIgF,QAAQ,GAAGsL,GAAG,CAACtL,QAAnB;AACA,SAAQpF,KAAK,CAACwB,aAAN,CAAoBxB,KAAK,CAACsI,QAA1B,EAAoC,IAApC,EAA0CjF,KAAK,CAAC+B,QAAD,CAAL,CAAgB0R,IAAhB,CAAqB,CAArB,EAAwBC,GAAxB,CAA4B,UAAUC,CAAV,EAAaiD,KAAb,EAAoB;AAC9F,QAAIjZ,EAAJ;;AACA,QAAIK,OAAO,GAAG,YAAY;AAAE,aAAOyd,YAAY,CAAC7E,KAAD,CAAnB;AAA6B,KAAzD;;AACA,WAAQja,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAE0Y,MAAAA,GAAG,EAAE,eAAeD;AAAtB,KAA3B,EACJja,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,MAAAA,SAAS,EAAElB,UAAU,EAAES,EAAE,GAAG,EAAL,EAC5CA,EAAE,CAACM,KAAK,CAAChB,WAAN,GAAoB,YAArB,CAAF,GAAuC,IADK,EAE5CU,EAAE,CAACM,KAAK,CAAChB,WAAN,GAAoB,qBAArB,CAAF,GAAgDue,WAAW,KAAK5E,KAFpB,EAG5CjZ,EAH0C,EAAvB;AAGbK,MAAAA,OAAO,EAAEA;AAHI,KAA3B,EAIIrB,KAAK,CAACwB,aAAN,CAAoBmd,kBAApB,EAAwC;AAAEjO,MAAAA,GAAG,EAAEA,GAAP;AAAY+F,MAAAA,UAAU,EAAEA,UAAxB;AAAoCvG,MAAAA,SAAS,EAAE+J,KAA/C;AAAsDvD,MAAAA,SAAS,EAAEA,SAAjE;AAA4E1F,MAAAA,QAAQ,EAAEA;AAAtF,KAAxC,CAJJ,CADI,CAAR;AAMH,GATiD,CAA1C,CAAR;AAUH,CAdD;;AAgBA,IAAI+N,GAAJ;;AACA,CAAC,UAAUA,GAAV,EAAe;AACZA,EAAAA,GAAG,CAAC,YAAD,CAAH,GAAoB,YAApB;AACAA,EAAAA,GAAG,CAAC,UAAD,CAAH,GAAkB,UAAlB;AACAA,EAAAA,GAAG,CAAC,WAAD,CAAH,GAAmB,WAAnB;AACH,CAJD,EAIGA,GAAG,KAAKA,GAAG,GAAG,EAAX,CAJN;;AAKA,IAAIC,cAAc,GAAG;AAAE7V,EAAAA,IAAI,EAAE,CAAR;AAAWD,EAAAA,GAAG,EAAE;AAAhB,CAArB;;AACA,IAAI+V,OAAO,GAAG,UAAUje,EAAV,EAAc;AACxB,MAAIC,EAAJ;;AACA,MAAI4d,WAAW,GAAG7d,EAAE,CAAC6d,WAArB;AAAA,MAAkCnO,GAAG,GAAG1P,EAAE,CAAC0P,GAA3C;AAAA,MAAgD5O,MAAM,GAAGd,EAAE,CAACc,MAA5D;AAAA,MAAoEkP,QAAQ,GAAGhQ,EAAE,CAACgQ,QAAlF;AAAA,MAA4FnP,KAAK,GAAGb,EAAE,CAACa,KAAvG;AAAA,MAA8GsP,YAAY,GAAGnQ,EAAE,CAACmQ,YAAhI;AAAA,MAA8I2N,YAAY,GAAG9d,EAAE,CAAC8d,YAAhK;AACA,MAAI/G,IAAI,GAAG/X,KAAK,CAACuB,UAAN,CAAiBsW,mBAAjB,CAAX;AACA,MAAIvW,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;;AACA,MAAIe,EAAE,GAAGnB,KAAK,CAAC2H,QAAN,CAAeoX,GAAG,CAACG,SAAnB,CAAT;AAAA,MAAwCC,GAAG,GAAGhe,EAAE,CAAC,CAAD,CAAhD;AAAA,MAAqDie,MAAM,GAAGje,EAAE,CAAC,CAAD,CAAhE;;AACA,MAAIke,iBAAiB,GAAG,YAAY;AAAE,WAAOD,MAAM,CAACL,GAAG,CAACG,SAAL,CAAb;AAA+B,GAArE;;AACA,MAAII,gBAAgB,GAAG,YAAY;AAAE,WAAOF,MAAM,CAACL,GAAG,CAACQ,QAAL,CAAb;AAA8B,GAAnE;;AACA,MAAIC,kBAAkB,GAAG,YAAY;AAAE,WAAOJ,MAAM,CAACL,GAAG,CAACU,UAAL,CAAb;AAAgC,GAAvE;;AACA,MAAIC,mBAAmB,GAAG,YAAY;AAAE,WAAO3H,IAAI,CAACnT,OAAL,CAAauX,UAApB;AAAiC,GAAzE;;AACA,MAAIwD,iBAAiB,GAAG,YAAY;AAAE,WAAO5H,IAAI,CAACnT,OAAL,CAAakY,QAApB;AAA+B,GAArE;;AACA,MAAI8C,kBAAkB,GAAG,YAAY;AAAE,WAAO7H,IAAI,CAACnT,OAAL,CAAaib,SAApB;AAAgC,GAAvE;;AACA,SAAQ7f,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACJN,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,IAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,IAAAA,MAAM,EAAGvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,MAAAA,OAAO,EAAEge,iBAAX;AAA8Bje,MAAAA,UAAU,EAAE+d,GAAG,KAAKJ,GAAG,CAACG;AAAtD,KAA5B,EACnElf,KAAK,CAACwB,aAAN,CAAoB6c,oBAApB,EAA0C,IAA1C,CADmE,CAA9C;AAC8BhW,IAAAA,OAAO,EAAEuX,kBADvC;AAC2D9W,IAAAA,MAAM,EAAEkW;AADnE,GAA7B,CADJ,CADJ,EAIIhf,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,IAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,IAAAA,MAAM,EAAGvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,MAAAA,OAAO,EAAEie,gBAAX;AAA6Ble,MAAAA,UAAU,EAAE+d,GAAG,KAAKJ,GAAG,CAACQ;AAArD,KAA5B,EACnEvf,KAAK,CAACwB,aAAN,CAAoB2c,YAApB,EAAkC,IAAlC,CADmE,CAA9C;AACsB9V,IAAAA,OAAO,EAAEsX,iBAD/B;AACkD7W,IAAAA,MAAM,EAAEkW;AAD1D,GAA7B,CADJ,CAJJ,EAOIhf,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,IAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,IAAAA,MAAM,EAAGvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,MAAAA,OAAO,EAAEme,kBAAX;AAA+Bpe,MAAAA,UAAU,EAAE+d,GAAG,KAAKJ,GAAG,CAACU;AAAvD,KAA5B,EACnEzf,KAAK,CAACwB,aAAN,CAAoB4c,QAApB,EAA8B,IAA9B,CADmE,CAA9C;AACkB/V,IAAAA,OAAO,EAAEqX,mBAD3B;AACgD5W,IAAAA,MAAM,EAAEkW;AADxD,GAA7B,CADJ,CAPJ,CADI,EAWJhf,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAElB,UAAU,EAAEU,EAAE,GAAG,EAAL,EAC5CA,EAAE,CAACK,KAAK,CAAChB,WAAN,GAAoB,kBAArB,CAAF,GAA6C,IADD,EAE5CW,EAAE,CAACK,KAAK,CAAChB,WAAN,GAAoB,qBAArB,CAAF,GAAgD6e,GAAG,KAAKJ,GAAG,CAACG,SAFhB,EAG5Cje,EAH0C;AAAvB,GAA3B,EAIIke,GAAG,KAAKJ,GAAG,CAACG,SAAZ,IAA0Blf,KAAK,CAACwB,aAAN,CAAoBod,aAApB,EAAmC;AAAEC,IAAAA,WAAW,EAAEA,WAAf;AAA4BnO,IAAAA,GAAG,EAAEA,GAAjC;AAAsC+F,IAAAA,UAAU,EAAE3U,MAAlD;AAA0D4U,IAAAA,SAAS,EAAE7U,KAArE;AAA4EmP,IAAAA,QAAQ,EAAEA,QAAtF;AAAgG8N,IAAAA,YAAY,EAAEA;AAA9G,GAAnC,CAJ9B,EAKIK,GAAG,KAAKJ,GAAG,CAACQ,QAAZ,IAAwBvf,KAAK,CAACwB,aAAN,CAAoBsc,cAApB,EAAoC;AAAEpN,IAAAA,GAAG,EAAEA,GAAP;AAAYS,IAAAA,YAAY,EAAEA;AAA1B,GAApC,CAL5B,EAMIgO,GAAG,KAAKJ,GAAG,CAACU,UAAZ,IAA0Bzf,KAAK,CAACwB,aAAN,CAAoB8a,gBAApB,EAAsC;AAAE5L,IAAAA,GAAG,EAAEA;AAAP,GAAtC,CAN9B,CAXI,CAAR;AAkBH,CA9BD;;AAgCA,IAAIoP,aAAa,GAAG,YAAY;AAC5B,SAAQ9f,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAI8d,YAAY,GAAG,YAAY;AAC3B,SAAQ/f,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAI+d,cAAc,GAAG,YAAY;AAC7B,SAAQhgB,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAIge,YAAY,GAAG,YAAY;AAC3B,SAAQjgB,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAIie,uBAAuB,GAAG,YAAY;AACtC,SAAQlgB,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAIke,QAAQ,GAAG,YAAY;AACvB,SAAQngB,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAIme,eAAe,GAAG,YAAY;AAC9B,SAAQpgB,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAIoe,QAAQ,GAAG,YAAY;AACvB,SAAQrgB,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAIqe,YAAY,GAAG,YAAY;AAC3B,SAAQtgB,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAIse,SAAS,GAAG,YAAY;AACxB,SAAQvgB,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAIue,kBAAkB,GAAG,YAAY;AACjC,SAAQxgB,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAIwe,iBAAiB,GAAG,YAAY;AAChC,SAAQzgB,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAIye,iBAAiB,GAAG,YAAY;AAChC,SAAQ1gB,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAI0e,WAAW,GAAG,YAAY;AAC1B,SAAQ3gB,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAI2e,qBAAqB,GAAG,YAAY;AACpC,SAAQ5gB,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAI4e,UAAU,GAAG,YAAY;AACzB,SAAQ7gB,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAI6e,WAAW,GAAG,YAAY;AAC1B,SAAQ9gB,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAI8e,YAAY,GAAG,YAAY;AAC3B,SAAQ/gB,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAI+e,gBAAgB,GAAG;AAAE7X,EAAAA,IAAI,EAAE,CAAR;AAAWD,EAAAA,GAAG,EAAE;AAAhB,CAAvB;;AACA,IAAI+X,cAAc,GAAG,UAAUjgB,EAAV,EAAc;AAC/B,MAAIkgB,WAAW,GAAGlgB,EAAE,CAACkgB,WAArB;AACA,MAAInJ,IAAI,GAAG/X,KAAK,CAACuB,UAAN,CAAiBsW,mBAAjB,CAAX;AACA,MAAIvW,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;;AACA,MAAI+gB,SAAS,GAAG,UAAUjb,CAAV,EAAa;AACzB,QAAIkH,KAAK,GAAGlH,CAAC,CAACqB,MAAF,CAAS6F,KAArB;;AACA,QAAIA,KAAJ,EAAW;AACP8T,MAAAA,WAAW,CAAC9T,KAAD,CAAX;AACH;AACJ,GALD;;AAMA,MAAI3E,aAAa,GAAG,YAAY;AAAE,WAAOsP,IAAI,CAACpT,OAAL,CAAayc,QAApB;AAA+B,GAAjE;;AACA,SAAQphB,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,IAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,IAAAA,MAAM,EAAGvH,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,KAA3B,EAC3EN,KAAK,CAACwB,aAAN,CAAoB,OAApB,EAA6B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,kBAAjC;AAAqD+gB,MAAAA,QAAQ,EAAE,KAA/D;AAAsEjG,MAAAA,IAAI,EAAE,MAA5E;AAAoFc,MAAAA,KAAK,EAAE,EAA3F;AAA+FoF,MAAAA,QAAQ,EAAEH;AAAzG,KAA7B,CAD2E,EAE3EnhB,KAAK,CAACwB,aAAN,CAAoBuf,YAApB,EAAkC,IAAlC,CAF2E,CAA9C;AAEc1Y,IAAAA,OAAO,EAAEI,aAFvB;AAEsCK,IAAAA,MAAM,EAAEkY;AAF9C,GAA7B,CAAR;AAGH,CAdD;;AAgBA,IAAIO,SAAS,GAAG,IAAIC,MAAJ,CAAW,QACvB,UADuB,GAEvB,WAFuB,GAGvB,WAHuB,GAIvB,WAJuB,GAKvB,WALuB,GAMvB,WANuB,GAOvB,YAPuB,GAQvB,WARuB,GASvB,KATuB,GAUvB,WAVuB,GAWvB,KAXY,CAAhB;;AAYA,IAAIC,OAAO,GAAG,UAAU5hB,KAAV,EAAiB6hB,GAAjB,EAAsBC,GAAtB,EAA2BC,YAA3B,EAAyC;AACnD,MAAIC,MAAM,GAAGC,QAAQ,CAACjiB,KAAD,EAAQ,EAAR,CAArB;AACA,SAAQgiB,MAAM,IAAIH,GAAV,IAAiBG,MAAM,IAAIF,GAA5B,GAAmCE,MAAnC,GAA4CD,YAAnD;AACH,CAHD;;AAIA,IAAIG,WAAW,GAAG,UAAUC,KAAV,EAAiB;AAC/B,MAAIC,OAAO,GAAGV,SAAS,CAACW,IAAV,CAAeF,KAAf,CAAd;;AACA,MAAI,CAACC,OAAL,EAAc;AACV,WAAO,IAAP;AACH;;AACD,MAAIE,IAAI,GAAGL,QAAQ,CAACG,OAAO,CAAC,CAAD,CAAR,EAAa,EAAb,CAAnB;AACA,MAAIG,KAAK,GAAGX,OAAO,CAACQ,OAAO,CAAC,CAAD,CAAR,EAAa,CAAb,EAAgB,EAAhB,EAAoB,CAApB,CAAP,GAAgC,CAA5C;AACA,MAAII,GAAG,GAAGZ,OAAO,CAACQ,OAAO,CAAC,CAAD,CAAR,EAAa,CAAb,EAAgB,EAAhB,EAAoB,CAApB,CAAjB;AACA,MAAIK,IAAI,GAAGb,OAAO,CAACQ,OAAO,CAAC,CAAD,CAAR,EAAa,CAAb,EAAgB,EAAhB,EAAoB,CAApB,CAAlB;AACA,MAAIM,MAAM,GAAGd,OAAO,CAACQ,OAAO,CAAC,CAAD,CAAR,EAAa,CAAb,EAAgB,EAAhB,EAAoB,CAApB,CAApB;AACA,MAAIO,MAAM,GAAGf,OAAO,CAACQ,OAAO,CAAC,CAAD,CAAR,EAAa,CAAb,EAAgB,EAAhB,EAAoB,CAApB,CAApB;AACA,MAAIQ,qBAAqB,GAAGR,OAAO,CAAC,CAAD,CAAP,IAAc,GAA1C;AACA,MAAIS,UAAU,GAAGjB,OAAO,CAACQ,OAAO,CAAC,CAAD,CAAR,EAAa,CAAb,EAAgB,EAAhB,EAAoB,CAApB,CAAxB;AACA,MAAIU,YAAY,GAAGlB,OAAO,CAACQ,OAAO,CAAC,CAAD,CAAR,EAAa,CAAb,EAAgB,EAAhB,EAAoB,CAApB,CAA1B;;AACA,UAAQQ,qBAAR;AACI,SAAK,GAAL;AACIH,MAAAA,IAAI,IAAII,UAAR;AACAH,MAAAA,MAAM,IAAII,YAAV;AACA;;AACJ,SAAK,GAAL;AACIL,MAAAA,IAAI,IAAII,UAAR;AACAH,MAAAA,MAAM,IAAII,YAAV;AACA;AARR;;AAUA,SAAO,IAAIC,IAAJ,CAASA,IAAI,CAACC,GAAL,CAASV,IAAT,EAAeC,KAAf,EAAsBC,GAAtB,EAA2BC,IAA3B,EAAiCC,MAAjC,EAAyCC,MAAzC,CAAT,CAAP;AACH,CAzBD;;AA2BA,IAAIM,QAAQ,GAAG,UAAUC,KAAV,EAAiB;AAC5B,MAAIC,OAAO,GAAG,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,EAAkB,IAAlB,EAAwB,IAAxB,CAAd;AACA,MAAI/e,CAAC,GAAGlB,IAAI,CAACsV,KAAL,CAAWtV,IAAI,CAACkgB,GAAL,CAASF,KAAT,IAAkBhgB,IAAI,CAACkgB,GAAL,CAAS,IAAT,CAA7B,CAAR;AACA,SAAO,CAACF,KAAK,GAAGhgB,IAAI,CAACmgB,GAAL,CAAS,IAAT,EAAejf,CAAf,CAAT,EAA4Bkf,OAA5B,CAAoC,CAApC,IAAyC,GAAzC,GAA+CH,OAAO,CAAC/e,CAAD,CAA7D;AACH,CAJD;;AAMA,IAAImf,gBAAgB,GAAG,UAAUpiB,EAAV,EAAc;AACjC,MAAI0P,GAAG,GAAG1P,EAAE,CAAC0P,GAAb;AAAA,MAAkB0B,MAAM,GAAGpR,EAAE,CAACoR,MAA9B;AACA,MAAI9Q,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;;AACA,MAAIa,EAAE,GAAGjB,KAAK,CAAC2H,QAAN,EAAT;AAAA,MAA2BsT,IAAI,GAAGha,EAAE,CAAC,CAAD,CAApC;AAAA,MAAyCoiB,OAAO,GAAGpiB,EAAE,CAAC,CAAD,CAArD;;AACAjB,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxBsK,IAAAA,GAAG,CAAC4S,WAAJ,GAAkBtU,IAAlB,CAAuB,UAAUuU,IAAV,EAAgB;AACnC,aAAOhV,OAAO,CAACC,OAAR,CAAgB+U,IAAhB,CAAP;AACH,KAFD,EAEGvU,IAFH,CAEQ,UAAUuU,IAAV,EAAgB;AACpB,aAAO7S,GAAG,CAAC8S,eAAJ,GAAsBxU,IAAtB,CAA2B,UAAU/M,CAAV,EAAa;AAC3C,eAAOsM,OAAO,CAACC,OAAR,CAAgB;AACnBmM,UAAAA,QAAQ,EAAE4I,IAAI,CAACE,0BAAL,IAAmC,EAD1B;AAEnBC,UAAAA,IAAI,EAAEH,IAAI,CAACG,IAFQ;AAGnBtf,UAAAA,MAAM,EAAEnC,CAAC,CAACmC;AAHS,SAAhB,CAAP;AAKH,OANM,CAAP;AAOH,KAVD,EAUG4K,IAVH,CAUQ,UAAU2N,QAAV,EAAoB;AACxB0G,MAAAA,OAAO,CAAC1G,QAAD,CAAP;AACH,KAZD;AAaH,GAdD,EAcG,EAdH;AAeA,SAAQ1B,IAAI,GAAG7I,MAAM,CAAC6I,IAAD,CAAT,GAAkBjb,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EAC1BN,KAAK,CAACwB,aAAN,CAAoBkB,OAApB,EAA6B,IAA7B,CAD0B,CAA9B;AAEH,CArBD;;AAuBA,IAAIihB,YAAY,GAAG,UAAU3iB,EAAV,EAAc;AAC7B,MAAI4iB,KAAK,GAAG5iB,EAAE,CAAC4iB,KAAf;AAAA,MAAsB/jB,KAAK,GAAGmB,EAAE,CAACnB,KAAjC;AACA,MAAIyB,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,SAAQJ,KAAK,CAACwB,aAAN,CAAoB,IAApB,EAA0B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA1B,EACJN,KAAK,CAACwB,aAAN,CAAoB,IAApB,EAA0B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA1B,EACIsjB,KADJ,EAEI,GAFJ,CADI,EAIJ5jB,KAAK,CAACwB,aAAN,CAAoB,IAApB,EAA0B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA1B,EAAqFT,KAAK,IAAI,GAA9F,CAJI,CAAR;AAKH,CARD;;AAUA,IAAIgkB,eAAe,GAAG,UAAU7iB,EAAV,EAAc;AAChC,MAAI0P,GAAG,GAAG1P,EAAE,CAAC0P,GAAb;AAAA,MAAkBoT,UAAU,GAAG9iB,EAAE,CAAC2Z,QAAlC;AAAA,MAA4C3T,QAAQ,GAAGhG,EAAE,CAACgG,QAA1D;AACA,MAAI+Q,IAAI,GAAG/X,KAAK,CAACuB,UAAN,CAAiBsW,mBAAjB,CAAX;AACA,MAAIvW,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;;AACA,MAAI2jB,UAAU,GAAG,UAAU/B,KAAV,EAAiB;AAC9B,QAAIgC,IAAI,GAAGjC,WAAW,CAACC,KAAD,CAAtB;AACA,WAAOgC,IAAI,GAAGA,IAAI,CAACC,kBAAL,KAA4B,IAA5B,GAAmCD,IAAI,CAACE,kBAAL,EAAtC,GAAkE,EAA7E;AACH,GAHD;;AAIA,MAAIC,UAAU,GAAG,UAAUlJ,IAAV,EAAgB;AAAE,WAAQjb,KAAK,CAACwB,aAAN,CAAoBxB,KAAK,CAACsI,QAA1B,EAAoC,IAApC,EACvCtI,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,KAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoBmiB,YAApB,EAAkC;AAAEC,MAAAA,KAAK,EAAE,KAAK7L,IAAI,CAACqM,QAAL,CAAczJ,QAA5B;AAAsC9a,MAAAA,KAAK,EAAEob,IAAI,CAACN,QAAL,IAAiBA,QAAQ,CAACmJ,UAAD;AAAtE,KAAlC,CADJ,EAEI9jB,KAAK,CAACwB,aAAN,CAAoBmiB,YAApB,EAAkC;AAAEC,MAAAA,KAAK,EAAE,KAAK7L,IAAI,CAACqM,QAAL,CAActB,QAA5B;AAAsCjjB,MAAAA,KAAK,EAAEijB,QAAQ,CAAC7H,IAAI,CAAC7W,MAAN;AAArD,KAAlC,CAFJ,CADuC,EAIvCpE,KAAK,CAACwB,aAAN,CAAoBiB,SAApB,EAA+B,IAA/B,CAJuC,EAKvCzC,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,KAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoBmiB,YAApB,EAAkC;AAAEC,MAAAA,KAAK,EAAE,KAAK7L,IAAI,CAACqM,QAAL,CAAclI,KAA5B;AAAmCrc,MAAAA,KAAK,EAAEob,IAAI,CAACyI,IAAL,CAAUW;AAApD,KAAlC,CADJ,EAEIrkB,KAAK,CAACwB,aAAN,CAAoBmiB,YAApB,EAAkC;AAAEC,MAAAA,KAAK,EAAE,KAAK7L,IAAI,CAACqM,QAAL,CAAcE,MAA5B;AAAoCzkB,MAAAA,KAAK,EAAEob,IAAI,CAACyI,IAAL,CAAUa;AAArD,KAAlC,CAFJ,EAGIvkB,KAAK,CAACwB,aAAN,CAAoBmiB,YAApB,EAAkC;AAAEC,MAAAA,KAAK,EAAE,KAAK7L,IAAI,CAACqM,QAAL,CAAcI,OAA5B;AAAqC3kB,MAAAA,KAAK,EAAEob,IAAI,CAACyI,IAAL,CAAUe;AAAtD,KAAlC,CAHJ,EAIIzkB,KAAK,CAACwB,aAAN,CAAoBmiB,YAApB,EAAkC;AAAEC,MAAAA,KAAK,EAAE,KAAK7L,IAAI,CAACqM,QAAL,CAAcM,QAA5B;AAAsC7kB,MAAAA,KAAK,EAAEob,IAAI,CAACyI,IAAL,CAAUiB;AAAvD,KAAlC,CAJJ,EAKI3kB,KAAK,CAACwB,aAAN,CAAoBmiB,YAApB,EAAkC;AAAEC,MAAAA,KAAK,EAAE,KAAK7L,IAAI,CAACqM,QAAL,CAAcQ,OAA5B;AAAqC/kB,MAAAA,KAAK,EAAEob,IAAI,CAACyI,IAAL,CAAUmB;AAAtD,KAAlC,CALJ,EAMI7kB,KAAK,CAACwB,aAAN,CAAoBmiB,YAApB,EAAkC;AAAEC,MAAAA,KAAK,EAAE,KAAK7L,IAAI,CAACqM,QAAL,CAAcU,YAA5B;AAA0CjlB,MAAAA,KAAK,EAAEkkB,UAAU,CAAC9I,IAAI,CAACyI,IAAL,CAAUqB,YAAX;AAA3D,KAAlC,CANJ,EAOI/kB,KAAK,CAACwB,aAAN,CAAoBmiB,YAApB,EAAkC;AAAEC,MAAAA,KAAK,EAAE,KAAK7L,IAAI,CAACqM,QAAL,CAAcY,gBAA5B;AAA8CnlB,MAAAA,KAAK,EAAEkkB,UAAU,CAAC9I,IAAI,CAACyI,IAAL,CAAUuB,OAAX;AAA/D,KAAlC,CAPJ,CALuC,EAavCjlB,KAAK,CAACwB,aAAN,CAAoBiB,SAApB,EAA+B,IAA/B,CAbuC,EAcvCzC,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,KAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoBmiB,YAApB,EAAkC;AAAEC,MAAAA,KAAK,EAAE,KAAK7L,IAAI,CAACqM,QAAL,CAAcc,WAA5B;AAAyCrlB,MAAAA,KAAK,EAAEob,IAAI,CAACyI,IAAL,CAAUyB;AAA1D,KAAlC,CADJ,EAEInlB,KAAK,CAACwB,aAAN,CAAoBmiB,YAApB,EAAkC;AAAEC,MAAAA,KAAK,EAAE,KAAK7L,IAAI,CAACqM,QAAL,CAAcgB,UAA5B;AAAwCvlB,MAAAA,KAAK,EAAEob,IAAI,CAACyI,IAAL,CAAU2B;AAAzD,KAAlC,CAFJ,EAGIrlB,KAAK,CAACwB,aAAN,CAAoBmiB,YAApB,EAAkC;AAAEC,MAAAA,KAAK,EAAE,KAAK7L,IAAI,CAACqM,QAAL,CAAckB,SAA5B;AAAuCzlB,MAAAA,KAAK,EAAE,KAAK6Q,GAAG,CAACtL;AAAvD,KAAlC,CAHJ,CAduC,CAAR;AAiB+E,GAjBlH;;AAkBA,SAAQpF,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACJN,KAAK,CAACwB,aAAN,CAAoB4hB,gBAApB,EAAsC;AAAE1S,IAAAA,GAAG,EAAEA,GAAP;AAAY0B,IAAAA,MAAM,EAAE+R;AAApB,GAAtC,CADI,EAEJnkB,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoBa,aAApB,EAAmC;AAAEhB,IAAAA,OAAO,EAAE2F;AAAX,GAAnC,EAA0D+Q,IAAI,CAACqM,QAAL,CAAcmB,KAAxE,CADJ,CAFI,CAAR;AAIH,CA9BD;;AAgCA,IAAIC,UAAU,GAAG,YAAY;AACzB,SAAQxlB,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAIwjB,oBAAoB,GAAG,IAAIjE,MAAJ,CAAW,GAAX,CAA3B;AACA,IAAIkE,aAAa,GAAG;AAAEvc,EAAAA,IAAI,EAAE,CAAR;AAAWD,EAAAA,GAAG,EAAE;AAAhB,CAApB;;AACA,IAAIyc,aAAa,GAAG,UAAU3kB,EAAV,EAAc;AAC9B,MAAI0P,GAAG,GAAG1P,EAAE,CAAC0P,GAAb;AAAA,MAAkBmE,aAAa,GAAG7T,EAAE,CAAC6T,aAArC;AAAA,MAAoD+Q,WAAW,GAAG5kB,EAAE,CAAC4kB,WAArE;AACA,MAAItkB,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,MAAIgF,QAAQ,GAAGsL,GAAG,CAACtL,QAAnB;AACA,MAAIygB,QAAQ,GAAGxiB,KAAK,CAAC+B,QAAD,CAAL,CAAgB0R,IAAhB,CAAqB,CAArB,EAAwBC,GAAxB,CAA4B,UAAUC,CAAV,EAAa/S,CAAb,EAAgB;AAAE,WAAOA,CAAP;AAAW,GAAzD,CAAf;AACA,MAAI8T,IAAI,GAAG/X,KAAK,CAACuB,UAAN,CAAiBsW,mBAAjB,CAAX;;AACA,MAAI5W,EAAE,GAAGjB,KAAK,CAAC2H,QAAN,CAAe,EAAf,CAAT;AAAA,MAA6Bme,OAAO,GAAG7kB,EAAE,CAAC,CAAD,CAAzC;AAAA,MAA8C8kB,UAAU,GAAG9kB,EAAE,CAAC,CAAD,CAA7D;;AACA,MAAIE,EAAE,GAAGnB,KAAK,CAAC2H,QAAN,CAAe,EAAf,CAAT;AAAA,MAA6Bqe,KAAK,GAAG7kB,EAAE,CAAC,CAAD,CAAvC;AAAA,MAA4C8kB,QAAQ,GAAG9kB,EAAE,CAAC,CAAD,CAAzD;;AACA,MAAI+kB,EAAE,GAAGlmB,KAAK,CAAC2H,QAAN,CAAe,CAAf,CAAT;AAAA,MAA4Bwe,YAAY,GAAGD,EAAE,CAAC,CAAD,CAA7C;AAAA,MAAkDE,eAAe,GAAGF,EAAE,CAAC,CAAD,CAAtE;;AACA,MAAIG,EAAE,GAAGrmB,KAAK,CAAC2H,QAAN,CAAe,KAAf,CAAT;AAAA,MAAgC2e,SAAS,GAAGD,EAAE,CAAC,CAAD,CAA9C;AAAA,MAAmDE,YAAY,GAAGF,EAAE,CAAC,CAAD,CAApE;;AACA,MAAIG,EAAE,GAAGxmB,KAAK,CAAC2H,QAAN,CAAe,KAAf,CAAT;AAAA,MAAgC8e,UAAU,GAAGD,EAAE,CAAC,CAAD,CAA/C;AAAA,MAAoDE,aAAa,GAAGF,EAAE,CAAC,CAAD,CAAtE;;AACA,MAAIG,YAAY,GAAG3mB,KAAK,CAAC8L,MAAN,CAAa,EAAb,CAAnB;;AACA,MAAI8a,aAAa,GAAG,UAAU1gB,CAAV,EAAa;AAC7B6f,IAAAA,UAAU,CAAC7f,CAAC,CAACqB,MAAF,CAAS1H,KAAV,CAAV;AACH,GAFD;;AAGA,MAAIgnB,eAAe,GAAG,YAAY;AAC9B,QAAIC,QAAQ,GAAGjB,QAAQ,CAAC9O,GAAT,CAAa,UAAU7G,SAAV,EAAqB;AAC7C,aAAOQ,GAAG,CAAC+G,OAAJ,CAAYvH,SAAS,GAAG,CAAxB,EAA2BlB,IAA3B,CAAgC,UAAUkC,IAAV,EAAgB;AACnD,eAAOA,IAAI,CAACiF,cAAL,EAAP;AACH,OAFM,EAEJnH,IAFI,CAEC,UAAU3G,OAAV,EAAmB;AACvB,YAAI0e,WAAW,GAAG1e,OAAO,CAAC+U,KAAR,CAAcrG,GAAd,CAAkB,UAAUiQ,IAAV,EAAgB;AAAE,iBAAOA,IAAI,CAACnM,GAAL,IAAY,EAAnB;AAAwB,SAA5D,EAA8D/Z,IAA9D,CAAmE,EAAnE,CAAlB;AACA,eAAOyN,OAAO,CAACC,OAAR,CAAgB;AACnBuY,UAAAA,WAAW,EAAEA,WADM;AAEnB7W,UAAAA,SAAS,EAAEA;AAFQ,SAAhB,CAAP;AAIH,OARM,CAAP;AASH,KAVc,CAAf;AAWA,WAAO3B,OAAO,CAAC0Y,GAAR,CAAYH,QAAZ,EAAsB9X,IAAtB,CAA2B,UAAUiM,IAAV,EAAgB;AAC9CA,MAAAA,IAAI,CAACiM,IAAL,CAAU,UAAUC,CAAV,EAAajkB,CAAb,EAAgB;AAAE,eAAOikB,CAAC,CAACjX,SAAF,GAAchN,CAAC,CAACgN,SAAvB;AAAmC,OAA/D;AACA,aAAO3B,OAAO,CAACC,OAAR,CAAgByM,IAAI,CAAClE,GAAL,CAAS,UAAUiQ,IAAV,EAAgB;AAAE,eAAOA,IAAI,CAACD,WAAZ;AAA0B,OAArD,CAAhB,CAAP;AACH,KAHM,CAAP;AAIH,GAhBD;;AAiBA,MAAIK,iBAAiB,GAAG,UAAUC,YAAV,EAAwBC,cAAxB,EAAwCC,eAAxC,EAAyD;AAC7E,QAAI/R,MAAM,GAAG+R,eAAe,GAAG,MAAMF,YAAN,GAAqB,GAAxB,GAA8BA,YAA1D;AACA,QAAIG,KAAK,GAAGF,cAAc,GAAG,GAAH,GAAS,IAAnC;AACA,WAAO,IAAI9F,MAAJ,CAAWhM,MAAX,EAAmBgS,KAAnB,CAAP;AACH,GAJD;;AAKA,MAAI9R,MAAM,GAAG,UAAU2R,YAAV,EAAwBC,cAAxB,EAAwCC,eAAxC,EAAyD;AAClE,QAAIE,MAAM,GAAGL,iBAAiB,CAACC,YAAD,EAAeC,cAAf,EAA+BC,eAA/B,CAA9B;AACA3B,IAAAA,WAAW,CAAC6B,MAAD,CAAX;AACArB,IAAAA,eAAe,CAAC,CAAD,CAAf;AACAH,IAAAA,QAAQ,CAAC,EAAD,CAAR;AACA,QAAIlT,OAAO,GAAI4T,YAAY,CAACtc,OAAb,CAAqBjG,MAArB,KAAgC,CAAjC,GACRyiB,eAAe,GAAG7X,IAAlB,CAAuB,UAAU2N,QAAV,EAAoB;AACzCgK,MAAAA,YAAY,CAACtc,OAAb,GAAuBsS,QAAvB;AACA,aAAOpO,OAAO,CAACC,OAAR,CAAgBmO,QAAhB,CAAP;AACH,KAHC,CADQ,GAKRpO,OAAO,CAACC,OAAR,CAAgBmY,YAAY,CAACtc,OAA7B,CALN;AAMA0I,IAAAA,OAAO,CAAC/D,IAAR,CAAa,UAAU2N,QAAV,EAAoB;AAC7B,UAAI+K,GAAG,GAAG,EAAV;AACA/K,MAAAA,QAAQ,CAAChc,OAAT,CAAiB,UAAUqmB,IAAV,EAAgB9W,SAAhB,EAA2B;AACxC,YAAIyX,UAAU,GAAG,CAACX,IAAI,CAACpS,KAAL,CAAW6S,MAAX,KAAsB,EAAvB,EAA2BrjB,MAA5C;;AACA,aAAK,IAAI4R,UAAU,GAAG,CAAtB,EAAyBA,UAAU,GAAG2R,UAAtC,EAAkD3R,UAAU,EAA5D,EAAgE;AAC5D0R,UAAAA,GAAG,CAAC7mB,IAAJ,CAAS;AACLmV,YAAAA,UAAU,EAAEA,UADP;AAEL9F,YAAAA,SAAS,EAAEA;AAFN,WAAT;AAIH;AACJ,OARD;AASA+V,MAAAA,QAAQ,CAACyB,GAAD,CAAR;;AACA,UAAIA,GAAG,CAACtjB,MAAJ,GAAa,CAAjB,EAAoB;AAChBgiB,QAAAA,eAAe,CAAC,CAAD,CAAf;AACAvR,QAAAA,aAAa,CAAC6S,GAAG,CAAC,CAAD,CAAJ,CAAb;AACH;AACJ,KAhBD;AAiBH,GA5BD;;AA6BA,MAAIE,aAAa,GAAG,UAAU1hB,CAAV,EAAa;AAC7B,QAAIA,CAAC,CAACC,OAAF,KAAc,EAAd,IAAoB,CAAC2f,OAAzB,EAAkC;AAC9B;AACH;;AACDpQ,IAAAA,MAAM,CAACoQ,OAAD,EAAUQ,SAAV,EAAqBG,UAArB,CAAN;AACH,GALD;;AAMA,MAAIoB,mBAAmB,GAAG,YAAY;AAClC,QAAIC,IAAI,GAAG3B,YAAY,GAAG,CAA1B;AACA,QAAI4B,OAAO,GAAGD,IAAI,GAAG,CAAP,GAAWA,IAAX,GAAkB9B,KAAK,CAAC5hB,MAAtC;AACAgiB,IAAAA,eAAe,CAAC2B,OAAD,CAAf;AACAlT,IAAAA,aAAa,CAACmR,KAAK,CAAC+B,OAAO,GAAG,CAAX,CAAN,CAAb;AACH,GALD;;AAMA,MAAIC,eAAe,GAAG,YAAY;AAC9B,QAAIC,IAAI,GAAG9B,YAAY,GAAG,CAA1B;AACA,QAAI4B,OAAO,GAAGE,IAAI,IAAIjC,KAAK,CAAC5hB,MAAd,GAAuB6jB,IAAvB,GAA8B,CAA5C;AACA7B,IAAAA,eAAe,CAAC2B,OAAD,CAAf;AACAlT,IAAAA,aAAa,CAACmR,KAAK,CAAC+B,OAAO,GAAG,CAAX,CAAN,CAAb;AACH,GALD;;AAMA,MAAIG,eAAe,GAAG,UAAUhiB,CAAV,EAAa;AAC/B,QAAIiiB,SAAS,GAAGjiB,CAAC,CAACqB,MAAF,CAASpF,OAAzB;AACAokB,IAAAA,YAAY,CAAC4B,SAAD,CAAZ;;AACA,QAAIrC,OAAJ,EAAa;AACTpQ,MAAAA,MAAM,CAACoQ,OAAD,EAAUqC,SAAV,EAAqB1B,UAArB,CAAN;AACH;AACJ,GAND;;AAOA,MAAI2B,gBAAgB,GAAG,UAAUliB,CAAV,EAAa;AAChC,QAAIiiB,SAAS,GAAGjiB,CAAC,CAACqB,MAAF,CAASpF,OAAzB;AACAukB,IAAAA,aAAa,CAACyB,SAAD,CAAb;;AACA,QAAIrC,OAAJ,EAAa;AACTpQ,MAAAA,MAAM,CAACoQ,OAAD,EAAUQ,SAAV,EAAqB6B,SAArB,CAAN;AACH;AACJ,GAND;;AAOA,MAAIE,YAAY,GAAG,YAAY;AAC3BzC,IAAAA,WAAW,CAACH,oBAAD,CAAX;AACAM,IAAAA,UAAU,CAAC,EAAD,CAAV;AACAK,IAAAA,eAAe,CAAC,CAAD,CAAf;AACAH,IAAAA,QAAQ,CAAC,EAAD,CAAR;AACAM,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACAG,IAAAA,aAAa,CAAC,KAAD,CAAb;AACH,GAPD;;AAQA,MAAI4B,YAAY,GAAG,YAAY;AAAE,WAAOvQ,IAAI,CAACpT,OAAL,CAAa+Q,MAApB;AAA6B,GAA9D;;AACA,MAAI7K,YAAY,GAAG,UAAU/C,MAAV,EAAkBF,MAAlB,EAA0B;AAAE,WAAQ5H,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAEyG,MAAX;AAAmB1G,QAAAA,UAAU,EAAEwG;AAA/B,OAA5B,EACzH5H,KAAK,CAACwB,aAAN,CAAoBgkB,UAApB,EAAgC,IAAhC,CADyH,CAA7C;AACpCnd,MAAAA,OAAO,EAAEigB,YAD2B;AACbxf,MAAAA,MAAM,EAAE4c;AADK,KAA7B,CAAR;AACoD,GADnG;;AAEA,MAAI6C,mBAAmB,GAAG,YAAY;AAAE,WAAOxQ,IAAI,CAACrC,MAAL,CAAY8S,aAAnB;AAAmC,GAA3E;;AACA,MAAIC,eAAe,GAAG,YAAY;AAAE,WAAO1Q,IAAI,CAACrC,MAAL,CAAYgT,SAAnB;AAA+B,GAAnE;;AACA,MAAIjgB,aAAa,GAAG,UAAUX,MAAV,EAAkB;AAClC,QAAIyd,KAAK,GAAG,YAAY;AACpBzd,MAAAA,MAAM;AACNugB,MAAAA,YAAY;AACf,KAHD;;AAIA,WAAQroB,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,KAA3B,EACJN,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,KAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoB,OAApB,EAA6B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,uBAAjC;AAA0DqoB,MAAAA,WAAW,EAAE,KAAK5Q,IAAI,CAACrC,MAAL,CAAYkT,aAAxF;AAAuGxN,MAAAA,IAAI,EAAE,MAA7G;AAAqHvb,MAAAA,KAAK,EAAEimB,OAA5H;AAAqIxE,MAAAA,QAAQ,EAAEsF,aAA/I;AAA8JiC,MAAAA,SAAS,EAAEjB;AAAzK,KAA7B,CADJ,EAEI5nB,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,KAA3B,EACI6lB,YADJ,EAEI,GAFJ,EAGIH,KAAK,CAAC5hB,MAHV,CAFJ,CADI,EAOJpE,KAAK,CAACwB,aAAN,CAAoB,OAApB,EAA6B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,KAA7B,EACIN,KAAK,CAACwB,aAAN,CAAoB,OAApB,EAA6B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,gCAAjC;AAAmE6B,MAAAA,OAAO,EAAEmkB,SAA5E;AAAuFlL,MAAAA,IAAI,EAAE,UAA7F;AAAyGkG,MAAAA,QAAQ,EAAE4G;AAAnH,KAA7B,CADJ,EAEI,GAFJ,EAGInQ,IAAI,CAACrC,MAAL,CAAY4Q,SAHhB,CAPI,EAWJtmB,KAAK,CAACwB,aAAN,CAAoB,OAApB,EAA6B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,KAA7B,EACIN,KAAK,CAACwB,aAAN,CAAoB,OAApB,EAA6B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,gCAAjC;AAAmE6B,MAAAA,OAAO,EAAEskB,UAA5E;AAAwFrL,MAAAA,IAAI,EAAE,UAA9F;AAA0GkG,MAAAA,QAAQ,EAAE8G;AAApH,KAA7B,CADJ,EAEI,GAFJ,EAGIrQ,IAAI,CAACrC,MAAL,CAAY+Q,UAHhB,CAXI,EAeJzmB,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,KAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,KAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAEwmB;AAAX,OAA5B,EAClE7nB,KAAK,CAACwB,aAAN,CAAoB8e,YAApB,EAAkC,IAAlC,CADkE,CAA7C;AACqBjY,MAAAA,OAAO,EAAEkgB,mBAD9B;AACmDzf,MAAAA,MAAM,EAAE4c;AAD3D,KAA7B,CADJ,CADJ,EAII1lB,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,KAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAE2mB;AAAX,OAA5B,EAClEhoB,KAAK,CAACwB,aAAN,CAAoB6e,QAApB,EAA8B,IAA9B,CADkE,CAA7C;AACiBhY,MAAAA,OAAO,EAAEogB,eAD1B;AAC2C3f,MAAAA,MAAM,EAAE4c;AADnD,KAA7B,CADJ,CAJJ,EAOI1lB,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,KAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoBa,aAApB,EAAmC;AAAEhB,MAAAA,OAAO,EAAEkkB;AAAX,KAAnC,EAAuDxN,IAAI,CAACrC,MAAL,CAAY6P,KAAnE,CADJ,CAPJ,CAfI,CAAR;AAwBH,GA7BD;;AA8BA,SAAQvlB,KAAK,CAACwB,aAAN,CAAoBoJ,OAApB,EAA6B;AAAE/B,IAAAA,QAAQ,EAAEF,UAAU,CAACe,UAAvB;AAAmCnC,IAAAA,MAAM,EAAEsD,YAA3C;AAAyDxC,IAAAA,OAAO,EAAEI,aAAlE;AAAiFK,IAAAA,MAAM,EAAE4c,aAAzF;AAAwGre,IAAAA,mBAAmB,EAAE,KAA7H;AAAoIN,IAAAA,aAAa,EAAE;AAAnJ,GAA7B,CAAR;AACH,CA9ID;;AAgJA,IAAI+hB,MAAM,GAAG,CACT,GADS,EACJ,GADI,EACC,GADD,EACM,GADN,EACW,GADX,EACgB,GADhB,EACqB,GADrB,EAC0B,GAD1B,EAC+B,GAD/B,EAET,CAFS,EAEN,GAFM,EAED,GAFC,EAEI,GAFJ,EAES,GAFT,EAEc,GAFd,EAGT,GAHS,EAGJ,GAHI,EAGC,GAHD,EAIT,GAJS,EAIJ,GAJI,EAIC,GAJD,EAKT,GALS,EAKJ,GALI,EAMT,GANS,EAMJ,GANI,EAOT,GAPS,EAQT,GARS,EAQJ,GARI,EAST,GATS,EAUT,GAVS,EAWT,EAXS,CAAb;;AAaA,IAAIC,QAAQ,GAAG,UAAUC,YAAV,EAAwB;AACnC,MAAIhD,KAAK,GAAG8C,MAAM,CAACG,IAAP,CAAY,UAAUjC,IAAV,EAAgB;AAAE,WAAOA,IAAI,GAAGgC,YAAd;AAA6B,GAA3D,CAAZ;AACA,SAAOhD,KAAK,IAAIgD,YAAhB;AACH,CAHD;;AAIA,IAAIE,QAAQ,GAAG,UAAUF,YAAV,EAAwB;AACnC,MAAIhD,KAAK,GAAG8C,MAAM,CAACK,SAAP,CAAiB,UAAUnC,IAAV,EAAgB;AAAE,WAAOA,IAAI,IAAIgC,YAAf;AAA8B,GAAjE,CAAZ;AACA,SAAOhD,KAAK,KAAK,CAAC,CAAX,IAAgBA,KAAK,KAAK,CAA1B,GAA8BgD,YAA9B,GAA6CF,MAAM,CAAC9C,KAAK,GAAG,CAAT,CAA1D;AACH,CAHD;;AAKA,IAAIoD,IAAI,GAAG,UAAUpoB,EAAV,EAAc;AACrB,MAAIE,QAAQ,GAAGF,EAAE,CAACE,QAAlB;AACA,MAAII,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,SAAQJ,KAAK,CAACwB,aAAN,CAAoB,IAApB,EAA0B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA1B,EAAsEY,QAAtE,CAAR;AACH,CAJD;;AAMA,IAAImoB,QAAQ,GAAG,CAAC,GAAD,EAAM,IAAN,EAAY,CAAZ,EAAe,IAAf,EAAqB,GAArB,EAA0B,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,CAAf;AACA,IAAIC,eAAe,GAAG;AAAEngB,EAAAA,IAAI,EAAE,CAAR;AAAWD,EAAAA,GAAG,EAAE;AAAhB,CAAtB;;AACA,IAAIqgB,WAAW,GAAG,UAAUvoB,EAAV,EAAc;AAC5B,MAAIqP,KAAK,GAAGrP,EAAE,CAACqP,KAAf;AAAA,MAAsBmZ,MAAM,GAAGxoB,EAAE,CAACwoB,MAAlC;AACA,MAAIzR,IAAI,GAAG/X,KAAK,CAACuB,UAAN,CAAiBsW,mBAAjB,CAAX;AACA,MAAIvW,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;;AACA,MAAIqpB,mBAAmB,GAAG,UAAUC,KAAV,EAAiB;AACvC,YAAQA,KAAR;AACI,WAAKje,kBAAkB,CAACke,UAAxB;AAAoC,eAAO5R,IAAI,CAAC6R,IAAL,CAAUC,UAAjB;;AACpC,WAAKpe,kBAAkB,CAAC+E,OAAxB;AAAiC,eAAOuH,IAAI,CAAC6R,IAAL,CAAUE,OAAjB;;AACjC,WAAKre,kBAAkB,CAACse,SAAxB;AAAmC,eAAOhS,IAAI,CAAC6R,IAAL,CAAUlT,SAAjB;AAHvC;AAKH,GAND;;AAOA,MAAI7L,YAAY,GAAG,UAAU/C,MAAV,EAAkB;AACjC,QAAI4T,KAAK,GAAG,YAAY;AAAE5T,MAAAA,MAAM;AAAK,KAArC;;AACA,WAAQ9H,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,sBAAjC;AAAyDe,MAAAA,OAAO,EAAEqa;AAAlE,KAA5B,EACJ1b,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,KAA5B,EACIyC,IAAI,CAACinB,KAAL,CAAW3Z,KAAK,GAAG,GAAnB,CADJ,EAEI,GAFJ,CADI,EAIJrQ,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,KAA5B,CAJI,CAAR;AAKH,GAPD;;AAQA,MAAImI,aAAa,GAAG,UAAUX,MAAV,EAAkB;AAAE,WAAQ9H,KAAK,CAACwB,aAAN,CAAoB4nB,IAApB,EAA0B,IAA1B,EAC5C1pB,MAAM,CAACgB,IAAP,CAAY+K,kBAAZ,EAAgCsL,GAAhC,CAAoC,UAAUkT,CAAV,EAAa;AAC7C,UAAIP,KAAK,GAAGO,CAAZ;;AACA,UAAIC,aAAa,GAAG,YAAY;AAAEpiB,QAAAA,MAAM;AAAI0hB,QAAAA,MAAM,CAACE,KAAD,CAAN;AAAgB,OAA5D;;AACA,aAAQ1pB,KAAK,CAACwB,aAAN,CAAoBU,QAApB,EAA8B;AAAEgY,QAAAA,GAAG,EAAEwP,KAAP;AAAcroB,QAAAA,OAAO,EAAE6oB;AAAvB,OAA9B,EAAsET,mBAAmB,CAACC,KAAD,CAAzF,CAAR;AACH,KAJD,CAD4C,EAM5C1pB,KAAK,CAACwB,aAAN,CAAoBE,WAApB,EAAiC,IAAjC,CAN4C,EAO5C2nB,QAAQ,CAACtS,GAAT,CAAa,UAAU2S,KAAV,EAAiB;AAC1B,UAAIQ,aAAa,GAAG,YAAY;AAAEpiB,QAAAA,MAAM;AAAI0hB,QAAAA,MAAM,CAACE,KAAD,CAAN;AAAgB,OAA5D;;AACA,aAAQ1pB,KAAK,CAACwB,aAAN,CAAoBU,QAApB,EAA8B;AAAEgY,QAAAA,GAAG,EAAEwP,KAAP;AAAcroB,QAAAA,OAAO,EAAE6oB;AAAvB,OAA9B,EAAsEnnB,IAAI,CAACinB,KAAL,CAAWN,KAAK,GAAG,GAAnB,IAA0B,GAAhG,CAAR;AACH,KAHD,CAP4C,CAAR;AAU7B,GAVX;;AAWA,SAAQ1pB,KAAK,CAACwB,aAAN,CAAoBoJ,OAApB,EAA6B;AAAE/B,IAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,IAAAA,MAAM,EAAEsD,YAA7C;AAA2DxC,IAAAA,OAAO,EAAEI,aAApE;AAAmFK,IAAAA,MAAM,EAAEwgB,eAA3F;AAA4GjiB,IAAAA,mBAAmB,EAAE,IAAjI;AAAuIN,IAAAA,aAAa,EAAE;AAAtJ,GAA7B,CAAR;AACH,CA/BD;;AAiCA,IAAIojB,QAAQ,GAAG,YAAY;AACvB,SAAQnqB,KAAK,CAACwB,aAAN,CAAoBG,IAApB,EAA0B;AAAEC,IAAAA,IAAI,EAAE;AAAR,GAA1B,EACJ5B,KAAK,CAACwB,aAAN,CAAoB,MAApB,EAA4B;AAAES,IAAAA,CAAC,EAAE;AAAL,GAA5B,CADI,CAAR;AAEH,CAHD;;AAKA,IAAImoB,eAAe,GAAG;AAAEjhB,EAAAA,IAAI,EAAE,CAAR;AAAWD,EAAAA,GAAG,EAAE;AAAhB,CAAtB;;AACA,IAAImhB,kBAAkB,GAAG,UAAUrpB,EAAV,EAAc;AACnC,MAAI0P,GAAG,GAAG1P,EAAE,CAAC0P,GAAb;AAAA,MAAkBiK,QAAQ,GAAG3Z,EAAE,CAAC2Z,QAAhC;AAAA,MAA0C2P,UAAU,GAAGtpB,EAAE,CAACspB,UAA1D;AAAA,MAAsEC,aAAa,GAAGvpB,EAAE,CAACupB,aAAzF;AAAA,MAAwGC,kBAAkB,GAAGxpB,EAAE,CAACwpB,kBAAhI;AAAA,MAAoJC,qBAAqB,GAAGzpB,EAAE,CAACypB,qBAA/K;AAAA,MAAsMC,iBAAiB,GAAG1pB,EAAE,CAAC0pB,iBAA7N;AAAA,MAAgPC,gBAAgB,GAAG3pB,EAAE,CAAC2pB,gBAAtQ;AAAA,MAAwRC,QAAQ,GAAG5pB,EAAE,CAAC4pB,QAAtS;AACA,MAAI7S,IAAI,GAAG/X,KAAK,CAACuB,UAAN,CAAiBsW,mBAAjB,CAAX;;AACA,MAAIgT,iBAAiB,GAAG,YAAY;AAAE,WAAO9S,IAAI,CAACpT,OAAL,CAAammB,WAApB;AAAkC,GAAxE;;AACA,MAAIjgB,YAAY,GAAG,UAAU/C,MAAV,EAAkBF,MAAlB,EAA0B;AAAE,WAAQ5H,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACiB,WAAvB;AAAoCrC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAEyG,MAAX;AAAmB1G,QAAAA,UAAU,EAAEwG;AAA/B,OAA5B,EACxH5H,KAAK,CAACwB,aAAN,CAAoB2oB,QAApB,EAA8B,IAA9B,CADwH,CAA5C;AACtC9hB,MAAAA,OAAO,EAAEwiB,iBAD6B;AACV/hB,MAAAA,MAAM,EAAEshB;AADE,KAA7B,CAAR;AACyD,GADxG;;AAEA,MAAIW,kBAAkB,GAAG,UAAUjjB,MAAV,EAAkB;AAAE,WAAQ9H,KAAK,CAACwB,aAAN,CAAoBU,QAApB,EAA8B;AAAEE,MAAAA,IAAI,EAAEpC,KAAK,CAACwB,aAAN,CAAoB2e,QAApB,EAA8B,IAA9B,CAAR;AAA6C9e,MAAAA,OAAO,EAAEyG;AAAtD,KAA9B,EAA8FiQ,IAAI,CAACpT,OAAL,CAAaqmB,kBAA3G,CAAR;AAA0I,GAAvL;;AACA,MAAIC,qBAAqB,GAAG,UAAUnjB,MAAV,EAAkB;AAAE,WAAQ9H,KAAK,CAACwB,aAAN,CAAoBqiB,eAApB,EAAqC;AAAEnT,MAAAA,GAAG,EAAEA,GAAP;AAAYiK,MAAAA,QAAQ,EAAEA,QAAtB;AAAgC3T,MAAAA,QAAQ,EAAEc;AAA1C,KAArC,CAAR;AAAoG,GAApJ;;AACA,MAAIW,aAAa,GAAG,UAAUX,MAAV,EAAkB;AAClC,QAAIojB,eAAe,GAAG,YAAY;AAC9BpjB,MAAAA,MAAM;AACN4iB,MAAAA,iBAAiB;AACpB,KAHD;;AAIA,QAAIS,cAAc,GAAG,YAAY;AAC7BrjB,MAAAA,MAAM;AACN6iB,MAAAA,gBAAgB;AACnB,KAHD;;AAIA,QAAIS,aAAa,GAAG,YAAY;AAC5BtjB,MAAAA,MAAM;AACN8iB,MAAAA,QAAQ,CAAC,EAAD,CAAR;AACH,KAHD;;AAIA,QAAIS,cAAc,GAAG,YAAY;AAC7BvjB,MAAAA,MAAM;AACN8iB,MAAAA,QAAQ,CAAC,CAAC,EAAF,CAAR;AACH,KAHD;;AAIA,QAAIU,yBAAyB,GAAG,YAAY;AACxCxjB,MAAAA,MAAM;AACN2iB,MAAAA,qBAAqB,CAAClf,eAAe,CAACggB,IAAjB,CAArB;AACH,KAHD;;AAIA,QAAIC,gBAAgB,GAAG,YAAY;AAC/B1jB,MAAAA,MAAM;AACN2iB,MAAAA,qBAAqB,CAAClf,eAAe,CAACkgB,IAAjB,CAArB;AACH,KAHD;;AAIA,QAAIC,kBAAkB,GAAG,UAAUC,IAAV,EAAgB;AACrC7jB,MAAAA,MAAM;AACN0iB,MAAAA,kBAAkB,CAACmB,IAAD,CAAlB;AACH,KAHD;;AAIA,QAAIC,qBAAqB,GAAG,YAAY;AAAE,aAAOF,kBAAkB,CAACrgB,YAAY,CAACwgB,QAAd,CAAzB;AAAmD,KAA7F;;AACA,QAAIC,uBAAuB,GAAG,YAAY;AAAE,aAAOJ,kBAAkB,CAACrgB,YAAY,CAAC0gB,UAAd,CAAzB;AAAqD,KAAjG;;AACA,QAAIC,oBAAoB,GAAG,YAAY;AAAE,aAAON,kBAAkB,CAACrgB,YAAY,CAAC4gB,OAAd,CAAzB;AAAkD,KAA3F;;AACA,WAAQjsB,KAAK,CAACwB,aAAN,CAAoB4nB,IAApB,EAA0B,IAA1B,EACJppB,KAAK,CAACwB,aAAN,CAAoBU,QAApB,EAA8B;AAAEE,MAAAA,IAAI,EAAEpC,KAAK,CAACwB,aAAN,CAAoBmf,WAApB,EAAiC,IAAjC,CAAR;AAAgDtf,MAAAA,OAAO,EAAE6pB;AAAzD,KAA9B,EAA0GnT,IAAI,CAACpT,OAAL,CAAaunB,aAAvH,CADI,EAEJlsB,KAAK,CAACwB,aAAN,CAAoBU,QAApB,EAA8B;AAAEE,MAAAA,IAAI,EAAEpC,KAAK,CAACwB,aAAN,CAAoBse,aAApB,EAAmC,IAAnC,CAAR;AAAkDze,MAAAA,OAAO,EAAE8pB;AAA3D,KAA9B,EAA2GpT,IAAI,CAACpT,OAAL,CAAawnB,YAAxH,CAFI,EAGJnsB,KAAK,CAACwB,aAAN,CAAoBE,WAApB,EAAiC,IAAjC,CAHI,EAIJ1B,KAAK,CAACwB,aAAN,CAAoBU,QAApB,EAA8B;AAAEE,MAAAA,IAAI,EAAEpC,KAAK,CAACwB,aAAN,CAAoBif,iBAApB,EAAuC,IAAvC,CAAR;AAAsDpf,MAAAA,OAAO,EAAE+pB;AAA/D,KAA9B,EAA8GrT,IAAI,CAACpT,OAAL,CAAaymB,aAA3H,CAJI,EAKJprB,KAAK,CAACwB,aAAN,CAAoBU,QAApB,EAA8B;AAAEE,MAAAA,IAAI,EAAEpC,KAAK,CAACwB,aAAN,CAAoBgf,kBAApB,EAAwC,IAAxC,CAAR;AAAuDnf,MAAAA,OAAO,EAAEgqB;AAAhE,KAA9B,EAAgHtT,IAAI,CAACpT,OAAL,CAAa0mB,cAA7H,CALI,EAMJrrB,KAAK,CAACwB,aAAN,CAAoBE,WAApB,EAAiC,IAAjC,CANI,EAOJ1B,KAAK,CAACwB,aAAN,CAAoBU,QAApB,EAA8B;AAAEC,MAAAA,OAAO,EAAEooB,aAAa,KAAKhf,eAAe,CAACggB,IAA7C;AAAmDnpB,MAAAA,IAAI,EAAEpC,KAAK,CAACwB,aAAN,CAAoBkf,iBAApB,EAAuC,IAAvC,CAAzD;AAAuGrf,MAAAA,OAAO,EAAEiqB;AAAhH,KAA9B,EAA2KvT,IAAI,CAACpT,OAAL,CAAaynB,iBAAxL,CAPI,EAQJpsB,KAAK,CAACwB,aAAN,CAAoBU,QAApB,EAA8B;AAAEC,MAAAA,OAAO,EAAEooB,aAAa,KAAKhf,eAAe,CAACkgB,IAA7C;AAAmDrpB,MAAAA,IAAI,EAAEpC,KAAK,CAACwB,aAAN,CAAoBye,YAApB,EAAkC,IAAlC,CAAzD;AAAkG5e,MAAAA,OAAO,EAAEmqB;AAA3G,KAA9B,EAA6JzT,IAAI,CAACpT,OAAL,CAAa0nB,QAA1K,CARI,EASJrsB,KAAK,CAACwB,aAAN,CAAoBE,WAApB,EAAiC,IAAjC,CATI,EAUJ1B,KAAK,CAACwB,aAAN,CAAoBU,QAApB,EAA8B;AAAEC,MAAAA,OAAO,EAAEmoB,UAAU,KAAKjf,YAAY,CAACwgB,QAAvC;AAAiDzpB,MAAAA,IAAI,EAAEpC,KAAK,CAACwB,aAAN,CAAoBof,qBAApB,EAA2C,IAA3C,CAAvD;AAAyGvf,MAAAA,OAAO,EAAEuqB;AAAlH,KAA9B,EAAyK7T,IAAI,CAACpT,OAAL,CAAa2nB,iBAAtL,CAVI,EAWJtsB,KAAK,CAACwB,aAAN,CAAoBU,QAApB,EAA8B;AAAEC,MAAAA,OAAO,EAAEmoB,UAAU,KAAKjf,YAAY,CAAC0gB,UAAvC;AAAmD3pB,MAAAA,IAAI,EAAEpC,KAAK,CAACwB,aAAN,CAAoB0e,uBAApB,EAA6C,IAA7C,CAAzD;AAA6G7e,MAAAA,OAAO,EAAEyqB;AAAtH,KAA9B,EAA+K/T,IAAI,CAACpT,OAAL,CAAa4nB,mBAA5L,CAXI,EAYJvsB,KAAK,CAACwB,aAAN,CAAoBU,QAApB,EAA8B;AAAEC,MAAAA,OAAO,EAAEmoB,UAAU,KAAKjf,YAAY,CAAC4gB,OAAvC;AAAgD7pB,MAAAA,IAAI,EAAEpC,KAAK,CAACwB,aAAN,CAAoB6c,oBAApB,EAA0C,IAA1C,CAAtD;AAAuGhd,MAAAA,OAAO,EAAE2qB;AAAhH,KAA9B,EAAsKjU,IAAI,CAACpT,OAAL,CAAa6nB,gBAAnL,CAZI,EAaJxsB,KAAK,CAACwB,aAAN,CAAoBE,WAApB,EAAiC,IAAjC,CAbI,EAcJ1B,KAAK,CAACwB,aAAN,CAAoBgH,KAApB,EAA2B;AAAEjB,MAAAA,MAAM,EAAEwjB,kBAAV;AAA8B1iB,MAAAA,OAAO,EAAE4iB,qBAAvC;AAA8D5jB,MAAAA,mBAAmB,EAAE,IAAnF;AAAyFN,MAAAA,aAAa,EAAE;AAAxG,KAA3B,CAdI,CAAR;AAeH,GA/CD;;AAgDA,SAAQ/G,KAAK,CAACwB,aAAN,CAAoBoJ,OAApB,EAA6B;AAAE/B,IAAAA,QAAQ,EAAEF,UAAU,CAACiB,WAAvB;AAAoCrC,IAAAA,MAAM,EAAEsD,YAA5C;AAA0DxC,IAAAA,OAAO,EAAEI,aAAnE;AAAkFK,IAAAA,MAAM,EAAEshB,eAA1F;AAA2G/iB,IAAAA,mBAAmB,EAAE,IAAhI;AAAsIN,IAAAA,aAAa,EAAE;AAArJ,GAA7B,CAAR;AACH,CAzDD;;AA2DA,IAAI0lB,gBAAgB,GAAG;AAAEtjB,EAAAA,IAAI,EAAE,CAAR;AAAWD,EAAAA,GAAG,EAAE;AAAhB,CAAvB;;AACA,IAAIwjB,OAAO,GAAG,UAAU1rB,EAAV,EAAc;AACxB,MAAI6d,WAAW,GAAG7d,EAAE,CAAC6d,WAArB;AAAA,MAAkCnO,GAAG,GAAG1P,EAAE,CAAC0P,GAA3C;AAAA,MAAgDiK,QAAQ,GAAG3Z,EAAE,CAAC2Z,QAA9D;AAAA,MAAwEtK,KAAK,GAAGrP,EAAE,CAACqP,KAAnF;AAAA,MAA0Fia,UAAU,GAAGtpB,EAAE,CAACspB,UAA1G;AAAA,MAAsHC,aAAa,GAAGvpB,EAAE,CAACupB,aAAzI;AAAA,MAAwJC,kBAAkB,GAAGxpB,EAAE,CAACwpB,kBAAhL;AAAA,MAAoMC,qBAAqB,GAAGzpB,EAAE,CAACypB,qBAA/N;AAAA,MAAsPkC,UAAU,GAAG3rB,EAAE,CAAC2rB,UAAtQ;AAAA,MAAkRC,YAAY,GAAG5rB,EAAE,CAAC4rB,YAApS;AAAA,MAAkTC,QAAQ,GAAG7rB,EAAE,CAAC6rB,QAAhU;AAAA,MAA0UhY,aAAa,GAAG7T,EAAE,CAAC6T,aAA7V;AAAA,MAA4WqM,WAAW,GAAGlgB,EAAE,CAACkgB,WAA7X;AAAA,MAA0Y4L,OAAO,GAAG9rB,EAAE,CAAC8rB,OAAvZ;AAAA,MAAgalC,QAAQ,GAAG5pB,EAAE,CAAC4pB,QAA9a;AAAA,MAAwbhF,WAAW,GAAG5kB,EAAE,CAAC4kB,WAAzc;AAAA,MAAsdmH,eAAe,GAAG/rB,EAAE,CAAC+rB,eAA3e;AAAA,MAA4fvD,MAAM,GAAGxoB,EAAE,CAACwoB,MAAxgB;AAAA,MAAghBwD,aAAa,GAAGhsB,EAAE,CAACgsB,aAAniB;AACA,MAAIjV,IAAI,GAAG/X,KAAK,CAACuB,UAAN,CAAiBsW,mBAAjB,CAAX;AACA,MAAIvW,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;;AACA,MAAIa,EAAE,GAAGjB,KAAK,CAAC2H,QAAN,CAAe,KAAf,CAAT;AAAA,MAAgCslB,kBAAkB,GAAGhsB,EAAE,CAAC,CAAD,CAAvD;AAAA,MAA4DisB,qBAAqB,GAAGjsB,EAAE,CAAC,CAAD,CAAtF;;AACA,MAAIE,EAAE,GAAGnB,KAAK,CAAC2H,QAAN,CAAekX,WAAf,CAAT;AAAA,MAAsCsO,WAAW,GAAGhsB,EAAE,CAAC,CAAD,CAAtD;AAAA,MAA2DisB,cAAc,GAAGjsB,EAAE,CAAC,CAAD,CAA9E;;AACA,MAAI+kB,EAAE,GAAGlmB,KAAK,CAAC2H,QAAN,CAAe,KAAf,CAAT;AAAA,MAAgCnD,eAAe,GAAG0hB,EAAE,CAAC,CAAD,CAApD;AAAA,MAAyDmH,gBAAgB,GAAGnH,EAAE,CAAC,CAAD,CAA9E;;AACA,MAAI9gB,QAAQ,GAAGsL,GAAG,CAACtL,QAAnB;;AACA,MAAIkoB,OAAO,GAAG,YAAY;AACtB,QAAIC,QAAQ,GAAGrE,QAAQ,CAAC7Y,KAAD,CAAvB;AACAmZ,IAAAA,MAAM,CAAC+D,QAAD,CAAN;AACH,GAHD;;AAIA,MAAIC,MAAM,GAAG,YAAY;AACrB,QAAID,QAAQ,GAAGxE,QAAQ,CAAC1Y,KAAD,CAAvB;AACAmZ,IAAAA,MAAM,CAAC+D,QAAD,CAAN;AACH,GAHD;;AAIA,MAAIE,YAAY,GAAG,YAAY;AAC3B,QAAIC,QAAQ,GAAG7O,WAAW,GAAG,CAA7B;;AACA,QAAI6O,QAAQ,GAAGtoB,QAAf,EAAyB;AACrBgoB,MAAAA,cAAc,CAACM,QAAD,CAAd;AACAb,MAAAA,QAAQ,CAACa,QAAD,CAAR;AACH;AACJ,GAND;;AAOA,MAAIC,gBAAgB,GAAG,YAAY;AAC/B,QAAIC,YAAY,GAAG/O,WAAW,GAAG,CAAjC;;AACA,QAAI+O,YAAY,IAAI,CAApB,EAAuB;AACnBR,MAAAA,cAAc,CAACQ,YAAD,CAAd;AACAf,MAAAA,QAAQ,CAACe,YAAD,CAAR;AACH;AACJ,GAND;;AAOA,MAAIC,UAAU,GAAG,UAAU3nB,CAAV,EAAa;AAC1B,QAAI4nB,OAAO,GAAGhM,QAAQ,CAAC5b,CAAC,CAACqB,MAAF,CAAS1H,KAAV,EAAiB,EAAjB,CAAtB;;AACA,QAAIiuB,OAAO,GAAG,CAAV,IAAeA,OAAO,IAAI1oB,QAA9B,EAAwC;AACpCgoB,MAAAA,cAAc,CAACU,OAAO,GAAG,CAAX,CAAd;AACH;AACJ,GALD;;AAMA,MAAIC,gBAAgB,GAAG,YAAY;AAC/Bb,IAAAA,qBAAqB,CAAC,IAAD,CAArB;AACAE,IAAAA,cAAc,CAACvO,WAAD,CAAd;AACH,GAHD;;AAIA,MAAImP,eAAe,GAAG,YAAY;AAC9Bd,IAAAA,qBAAqB,CAAC,KAAD,CAArB;AACH,GAFD;;AAGA,MAAIe,WAAW,GAAG,UAAU/nB,CAAV,EAAa;AAC3B,YAAQA,CAAC,CAACC,OAAV;AACI,WAAK,EAAL;AACIwnB,QAAAA,gBAAgB;AAChB;;AACJ,WAAK,EAAL;AACIF,QAAAA,YAAY;AACZ;;AACJ,WAAK,EAAL;AACIZ,QAAAA,QAAQ,CAACM,WAAD,CAAR;AACA;AATR;AAWH,GAZD;;AAaA,MAAIjC,eAAe,GAAG,YAAY;AAAE,WAAO2B,QAAQ,CAAC,CAAD,CAAf;AAAqB,GAAzD;;AACA,MAAI1B,cAAc,GAAG,YAAY;AAAE,WAAO0B,QAAQ,CAACznB,QAAQ,GAAG,CAAZ,CAAf;AAAgC,GAAnE;;AACA,MAAI8oB,aAAa,GAAG,YAAY;AAC5Bb,IAAAA,gBAAgB,CAAC,CAAC7oB,eAAF,CAAhB;AACAuoB,IAAAA,eAAe;AAClB,GAHD;;AAIA,MAAI3B,aAAa,GAAG,YAAY;AAAE,WAAOR,QAAQ,CAAC,EAAD,CAAf;AAAsB,GAAxD;;AACA,MAAIS,cAAc,GAAG,YAAY;AAAE,WAAOT,QAAQ,CAAC,CAAC,EAAF,CAAf;AAAuB,GAA1D;;AACA,MAAIU,yBAAyB,GAAG,YAAY;AAAE,WAAOb,qBAAqB,CAAClf,eAAe,CAACggB,IAAjB,CAA5B;AAAqD,GAAnG;;AACA,MAAIC,gBAAgB,GAAG,YAAY;AAAE,WAAOf,qBAAqB,CAAClf,eAAe,CAACkgB,IAAjB,CAA5B;AAAqD,GAA1F;;AACA,MAAIG,qBAAqB,GAAG,YAAY;AAAE,WAAOpB,kBAAkB,CAACnf,YAAY,CAACwgB,QAAd,CAAzB;AAAmD,GAA7F;;AACA,MAAIC,uBAAuB,GAAG,YAAY;AAAE,WAAOtB,kBAAkB,CAACnf,YAAY,CAAC0gB,UAAd,CAAzB;AAAqD,GAAjG;;AACA,MAAIC,oBAAoB,GAAG,YAAY;AAAE,WAAOxB,kBAAkB,CAACnf,YAAY,CAAC4gB,OAAd,CAAzB;AAAkD,GAA3F;;AACA,MAAIkC,YAAY,GAAG,YAAY;AAAE,WAAOpW,IAAI,CAACpT,OAAL,CAAaupB,aAApB;AAAoC,GAArE;;AACA,MAAIE,kBAAkB,GAAG,YAAY;AAAE,WAAOrW,IAAI,CAACpT,OAAL,CAAaipB,YAApB;AAAmC,GAA1E;;AACA,MAAIS,cAAc,GAAG,YAAY;AAAE,WAAOtW,IAAI,CAACpT,OAAL,CAAa+oB,QAApB;AAA+B,GAAlE;;AACA,MAAIY,aAAa,GAAG,YAAY;AAAE,WAAOvW,IAAI,CAACpT,OAAL,CAAa2oB,OAApB;AAA8B,GAAhE;;AACA,MAAIiB,YAAY,GAAG,YAAY;AAAE,WAAOxW,IAAI,CAACpT,OAAL,CAAa6oB,MAApB;AAA6B,GAA9D;;AACA,MAAIgB,gBAAgB,GAAG,YAAY;AAAE,WAAOzW,IAAI,CAACpT,OAAL,CAAa8pB,UAApB;AAAiC,GAAtE;;AACA,MAAIC,cAAc,GAAG,YAAY;AAAE,WAAO3W,IAAI,CAACpT,OAAL,CAAagqB,QAApB;AAA+B,GAAlE;;AACA,MAAIC,WAAW,GAAG,YAAY;AAAE,WAAO7W,IAAI,CAACpT,OAAL,CAAaoV,KAApB;AAA4B,GAA5D;;AACA,MAAI8U,mBAAmB,GAAG,YAAY;AAAE,WAAO9W,IAAI,CAACpT,OAAL,CAAaunB,aAApB;AAAoC,GAA5E;;AACA,MAAI4C,kBAAkB,GAAG,YAAY;AAAE,WAAO/W,IAAI,CAACpT,OAAL,CAAawnB,YAApB;AAAmC,GAA1E;;AACA,MAAI4C,qBAAqB,GAAG,YAAY;AAAE,WAAOhX,IAAI,CAACpT,OAAL,CAAaymB,aAApB;AAAoC,GAA9E;;AACA,MAAI4D,4BAA4B,GAAG,YAAY;AAAE,WAAOjX,IAAI,CAACpT,OAAL,CAAa0mB,cAApB;AAAqC,GAAtF;;AACA,MAAI4D,mBAAmB,GAAG,YAAY;AAAE,WAAOlX,IAAI,CAACpT,OAAL,CAAaynB,iBAApB;AAAwC,GAAhF;;AACA,MAAI8C,cAAc,GAAG,YAAY;AAAE,WAAOnX,IAAI,CAACpT,OAAL,CAAa0nB,QAApB;AAA+B,GAAlE;;AACA,MAAI8C,uBAAuB,GAAG,YAAY;AAAE,WAAOpX,IAAI,CAACpT,OAAL,CAAa2nB,iBAApB;AAAwC,GAApF;;AACA,MAAI8C,yBAAyB,GAAG,YAAY;AAAE,WAAOrX,IAAI,CAACpT,OAAL,CAAa4nB,mBAApB;AAA0C,GAAxF;;AACA,MAAI8C,wBAAwB,GAAG,YAAY;AAAE,WAAOtX,IAAI,CAACpT,OAAL,CAAaqmB,kBAApB;AAAyC,GAAtF;;AACA,MAAIsE,sBAAsB,GAAG,YAAY;AAAE,WAAOvX,IAAI,CAACpT,OAAL,CAAa6nB,gBAApB;AAAuC,GAAlF;;AACA,MAAI+C,oBAAoB,GAAG,UAAUznB,MAAV,EAAkB;AAAE,WAAQ9H,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAEyG;AAAX,OAA5B,EACzH9H,KAAK,CAACwB,aAAN,CAAoB2e,QAApB,EAA8B,IAA9B,CADyH,CAA7C;AACtC9X,MAAAA,OAAO,EAAEgnB,wBAD6B;AACHvmB,MAAAA,MAAM,EAAE2jB;AADL,KAA7B,CAAR;AACiE,GADhH;;AAEA,MAAIxB,qBAAqB,GAAG,UAAUnjB,MAAV,EAAkB;AAAE,WAAQ9H,KAAK,CAACwB,aAAN,CAAoBqiB,eAApB,EAAqC;AAAEnT,MAAAA,GAAG,EAAEA,GAAP;AAAYiK,MAAAA,QAAQ,EAAEA,QAAtB;AAAgC3T,MAAAA,QAAQ,EAAEc;AAA1C,KAArC,CAAR;AAAoG,GAApJ;;AACA,SAAOklB,aAAa,CAAC;AACjBnO,IAAAA,WAAW,EAAEA,WADI;AAEjB1Z,IAAAA,gBAAgB,EAAGnF,KAAK,CAACwB,aAAN,CAAoB,OAApB,EAA6B;AAAEC,MAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,6BAAjC;AAAgE8a,MAAAA,IAAI,EAAE,MAAtE;AAA8Evb,MAAAA,KAAK,EAAEotB,kBAAkB,GAAIE,WAAW,GAAG,CAAlB,GAAwBtO,WAAW,GAAG,CAA7I;AAAiJyC,MAAAA,QAAQ,EAAEuM,UAA3J;AAAuK2B,MAAAA,OAAO,EAAEzB,gBAAhL;AAAkM0B,MAAAA,MAAM,EAAEzB,eAA1M;AAA2NnF,MAAAA,SAAS,EAAEoF;AAAtO,KAA7B,CAFF;AAGjByB,IAAAA,wBAAwB,EAAG1vB,KAAK,CAACwB,aAAN,CAAoBgH,KAApB,EAA2B;AAAEjB,MAAAA,MAAM,EAAEgoB,oBAAV;AAAgClnB,MAAAA,OAAO,EAAE4iB,qBAAzC;AAAgE5jB,MAAAA,mBAAmB,EAAE,IAArF;AAA2FN,MAAAA,aAAa,EAAE;AAA1G,KAA3B,CAHV;AAIjBpB,IAAAA,cAAc,EAAG3F,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAEsrB;AAAX,OAA5B,EACnF3sB,KAAK,CAACwB,aAAN,CAAoBue,YAApB,EAAkC,IAAlC,CADmF,CAA7C;AACI1X,MAAAA,OAAO,EAAEqmB,cADb;AAC6B5lB,MAAAA,MAAM,EAAE2jB;AADrC,KAA7B,CAJA;AAMjBhnB,IAAAA,gBAAgB,EAAGzF,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAEurB;AAAX,OAA5B,EACrF5sB,KAAK,CAACwB,aAAN,CAAoBwe,cAApB,EAAoC,IAApC,CADqF,CAA7C;AACI3X,MAAAA,OAAO,EAAEmmB,gBADb;AAC+B1lB,MAAAA,MAAM,EAAE2jB;AADvC,KAA7B,CANF;AAQjBkD,IAAAA,mBAAmB,EAAG3vB,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAE6pB;AAAX,OAA5B,EACxFlrB,KAAK,CAACwB,aAAN,CAAoBmf,WAApB,EAAiC,IAAjC,CADwF,CAA7C;AACFtY,MAAAA,OAAO,EAAEwmB,mBADP;AAC4B/lB,MAAAA,MAAM,EAAE2jB;AADpC,KAA7B,CARL;AAUjBmD,IAAAA,kBAAkB,EAAG5vB,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAE8pB;AAAX,OAA5B,EACvFnrB,KAAK,CAACwB,aAAN,CAAoBse,aAApB,EAAmC,IAAnC,CADuF,CAA7C;AACCzX,MAAAA,OAAO,EAAEymB,kBADV;AAC8BhmB,MAAAA,MAAM,EAAE2jB;AADtC,KAA7B,CAVJ;AAYjBoD,IAAAA,cAAc,EAAG7vB,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAEmqB,gBAAX;AAA6BpqB,QAAAA,UAAU,EAAEmpB,aAAa,KAAKhf,eAAe,CAACkgB;AAA3E,OAA5B,EACnFzrB,KAAK,CAACwB,aAAN,CAAoBye,YAApB,EAAkC,IAAlC,CADmF,CAA7C;AACI5X,MAAAA,OAAO,EAAE6mB,cADb;AAC6BpmB,MAAAA,MAAM,EAAE2jB;AADrC,KAA7B,CAZA;AAcjBqD,IAAAA,yBAAyB,EAAG9vB,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAEyqB,uBAAX;AAAoC1qB,QAAAA,UAAU,EAAEkpB,UAAU,KAAKjf,YAAY,CAAC0gB;AAA5E,OAA5B,EAC9F/rB,KAAK,CAACwB,aAAN,CAAoB0e,uBAApB,EAA6C,IAA7C,CAD8F,CAA7C;AACI7X,MAAAA,OAAO,EAAE+mB,yBADb;AACwCtmB,MAAAA,MAAM,EAAE2jB;AADhD,KAA7B,CAdX;AAgBjB5mB,IAAAA,kBAAkB,EAAG7F,KAAK,CAACwB,aAAN,CAAoB6oB,kBAApB,EAAwC;AAAE3Z,MAAAA,GAAG,EAAEA,GAAP;AAAYiK,MAAAA,QAAQ,EAAEA,QAAtB;AAAgC2P,MAAAA,UAAU,EAAEA,UAA5C;AAAwDC,MAAAA,aAAa,EAAEA,aAAvE;AAAsFC,MAAAA,kBAAkB,EAAEA,kBAA1G;AAA8HC,MAAAA,qBAAqB,EAAEA,qBAArJ;AAA4KC,MAAAA,iBAAiB,EAAEQ,eAA/L;AAAgNP,MAAAA,gBAAgB,EAAEQ,cAAlO;AAAkPP,MAAAA,QAAQ,EAAEA;AAA5P,KAAxC,CAhBJ;AAiBjBvlB,IAAAA,cAAc,EAAGrF,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAEosB;AAAX,OAA5B,EACnFztB,KAAK,CAACwB,aAAN,CAAoB6e,QAApB,EAA8B,IAA9B,CADmF,CAA7C;AACAhY,MAAAA,OAAO,EAAEgmB,cADT;AACyBvlB,MAAAA,MAAM,EAAE2jB;AADjC,KAA7B,CAjBA;AAmBjBrnB,IAAAA,QAAQ,EAAEA,QAnBO;AAoBjBM,IAAAA,cAAc,EAAG1F,KAAK,CAACwB,aAAN,CAAoByf,cAApB,EAAoC;AAAEC,MAAAA,WAAW,EAAEA;AAAf,KAApC,CApBA;AAqBjBhc,IAAAA,kBAAkB,EAAGlF,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAEssB;AAAX,OAA5B,EACvF3tB,KAAK,CAACwB,aAAN,CAAoB8e,YAApB,EAAkC,IAAlC,CADuF,CAA7C;AACAjY,MAAAA,OAAO,EAAE+lB,kBADT;AAC6BtlB,MAAAA,MAAM,EAAE2jB;AADrC,KAA7B,CArBJ;AAuBjB7mB,IAAAA,WAAW,EAAG5F,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAEyrB;AAAX,OAA5B,EAChF9sB,KAAK,CAACwB,aAAN,CAAoB+e,SAApB,EAA+B,IAA/B,CADgF,CAA7C;AACIlY,MAAAA,OAAO,EAAEumB,WADb;AAC0B9lB,MAAAA,MAAM,EAAE2jB;AADlC,KAA7B,CAvBG;AAyBjBsD,IAAAA,qBAAqB,EAAG/vB,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAE+pB;AAAX,OAA5B,EAC1FprB,KAAK,CAACwB,aAAN,CAAoBif,iBAApB,EAAuC,IAAvC,CAD0F,CAA7C;AACEpY,MAAAA,OAAO,EAAE0mB,qBADX;AACkCjmB,MAAAA,MAAM,EAAE2jB;AAD1C,KAA7B,CAzBP;AA2BjBuD,IAAAA,4BAA4B,EAAGhwB,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAEgqB;AAAX,OAA5B,EACjGrrB,KAAK,CAACwB,aAAN,CAAoBgf,kBAApB,EAAwC,IAAxC,CADiG,CAA7C;AACJnY,MAAAA,OAAO,EAAE2mB,4BADL;AACmClmB,MAAAA,MAAM,EAAE2jB;AAD3C,KAA7B,CA3Bd;AA6BjBxnB,IAAAA,aAAa,EAAGjF,KAAK,CAACwB,aAAN,CAAoBmkB,aAApB,EAAmC;AAAEjV,MAAAA,GAAG,EAAEA,GAAP;AAAYmE,MAAAA,aAAa,EAAEA,aAA3B;AAA0C+Q,MAAAA,WAAW,EAAEA;AAAvD,KAAnC,CA7BC;AA8BjBqK,IAAAA,mBAAmB,EAAGjwB,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAEiqB,yBAAX;AAAsClqB,QAAAA,UAAU,EAAEmpB,aAAa,KAAKhf,eAAe,CAACggB;AAApF,OAA5B,EACxFvrB,KAAK,CAACwB,aAAN,CAAoBkf,iBAApB,EAAuC,IAAvC,CADwF,CAA7C;AACIrY,MAAAA,OAAO,EAAE4mB,mBADb;AACkCnmB,MAAAA,MAAM,EAAE2jB;AAD1C,KAA7B,CA9BL;AAgCjBznB,IAAAA,mBAAmB,EAAGhF,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACe,UAAvB;AAAmCnC,MAAAA,MAAM,EAAGvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAE6sB,aAAX;AAA0B9sB,QAAAA,UAAU,EAAEoD;AAAtC,OAA5B,EACvFxE,KAAK,CAACwB,aAAN,CAAoB4e,eAApB,EAAqC,IAArC,CADuF,CAA5C;AACG/X,MAAAA,OAAO,EAAE8lB,YADZ;AAC0BrlB,MAAAA,MAAM,EAAE2jB;AADlC,KAA7B,CAhCL;AAkCjByD,IAAAA,uBAAuB,EAAGlwB,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAEuqB,qBAAX;AAAkCxqB,QAAAA,UAAU,EAAEkpB,UAAU,KAAKjf,YAAY,CAACwgB;AAA1E,OAA5B,EAC5F7rB,KAAK,CAACwB,aAAN,CAAoBof,qBAApB,EAA2C,IAA3C,CAD4F,CAA7C;AACIvY,MAAAA,OAAO,EAAE8mB,uBADb;AACsCrmB,MAAAA,MAAM,EAAE2jB;AAD9C,KAA7B,CAlCT;AAoCjBjnB,IAAAA,YAAY,EAAGxF,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAEmsB;AAAX,OAA5B,EACjFxtB,KAAK,CAACwB,aAAN,CAAoBqf,UAApB,EAAgC,IAAhC,CADiF,CAA7C;AACIxY,MAAAA,OAAO,EAAEkmB,YADb;AAC2BzlB,MAAAA,MAAM,EAAE2jB;AADnC,KAA7B,CApCE;AAsCjBnnB,IAAAA,aAAa,EAAGtF,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAEisB;AAAX,OAA5B,EAClFttB,KAAK,CAACwB,aAAN,CAAoBsf,WAApB,EAAiC,IAAjC,CADkF,CAA7C;AACIzY,MAAAA,OAAO,EAAEimB,aADb;AAC4BxlB,MAAAA,MAAM,EAAE2jB;AADpC,KAA7B,CAtCC;AAwCjBlnB,IAAAA,WAAW,EAAGvF,KAAK,CAACwB,aAAN,CAAoB+nB,WAApB,EAAiC;AAAElZ,MAAAA,KAAK,EAAEA,KAAT;AAAgBmZ,MAAAA,MAAM,EAAEA;AAAxB,KAAjC,CAxCG;AAyCjB2G,IAAAA,sBAAsB,EAAGnwB,KAAK,CAACwB,aAAN,CAAoBuJ,OAApB,EAA6B;AAAElC,MAAAA,QAAQ,EAAEF,UAAU,CAACgB,YAAvB;AAAqCpC,MAAAA,MAAM,EAAEvH,KAAK,CAACwB,aAAN,CAAoBT,MAApB,EAA4B;AAAEM,QAAAA,OAAO,EAAE2qB,oBAAX;AAAiC5qB,QAAAA,UAAU,EAAEkpB,UAAU,KAAKjf,YAAY,CAAC4gB;AAAzE,OAA5B,EAC3FjsB,KAAK,CAACwB,aAAN,CAAoB6c,oBAApB,EAA0C,IAA1C,CAD2F,CAA7C;AACIhW,MAAAA,OAAO,EAAEinB,sBADb;AACqCxmB,MAAAA,MAAM,EAAE2jB;AAD7C,KAA7B;AAzCR,GAAD,CAApB;AA4CH,CAtID;;AAwIA,IAAI2D,sBAAsB,GAAG,IAAI5O,MAAJ,CAAW,GAAX,CAA7B;AACA,IAAI6O,gBAAgB,GAAG,EAAvB;AACA,IAAIC,YAAY,GAAG,CAAnB;;AACA,IAAIC,KAAK,GAAG,UAAUvvB,EAAV,EAAc;AACtB,MAAI0P,GAAG,GAAG1P,EAAE,CAAC0P,GAAb;AAAA,MAAkBuL,IAAI,GAAGjb,EAAE,CAACib,IAA5B;AAAA,MAAkCuU,WAAW,GAAGxvB,EAAE,CAACwvB,WAAnD;AAAA,MAAgEC,MAAM,GAAGzvB,EAAE,CAACyvB,MAA5E;AAAA,MAAoF9Z,QAAQ,GAAG3V,EAAE,CAAC2V,QAAlG;AAAA,MAA4GvE,MAAM,GAAGpR,EAAE,CAACoR,MAAxH;AAAA,MAAgImY,aAAa,GAAGvpB,EAAE,CAACupB,aAAnJ;AAAA,MAAkKmG,cAAc,GAAG1vB,EAAE,CAAC0vB,cAAtL;AAAA,MAAsMC,UAAU,GAAG3vB,EAAE,CAAC2vB,UAAtN;AAAA,MAAkOnH,MAAM,GAAGxoB,EAAE,CAACwoB,MAA9O;AACA,MAAIloB,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,MAAIwwB,QAAQ,GAAG5wB,KAAK,CAAC8L,MAAN,CAAa,IAAb,CAAf;;AACA,MAAI7K,EAAE,GAAGjB,KAAK,CAAC2H,QAAN,CAAegP,QAAQ,CAACtG,KAAxB,CAAT;AAAA,MAAyCA,KAAK,GAAGpP,EAAE,CAAC,CAAD,CAAnD;AAAA,MAAwD4vB,QAAQ,GAAG5vB,EAAE,CAAC,CAAD,CAArE;;AACA,MAAIE,EAAE,GAAGnB,KAAK,CAAC2H,QAAN,CAAe,CAAf,CAAT;AAAA,MAA4BkX,WAAW,GAAG1d,EAAE,CAAC,CAAD,CAA5C;AAAA,MAAiD2vB,cAAc,GAAG3vB,EAAE,CAAC,CAAD,CAApE;;AACA,MAAI+kB,EAAE,GAAGlmB,KAAK,CAAC2H,QAAN,CAAe,CAAf,CAAT;AAAA,MAA4BqJ,QAAQ,GAAGkV,EAAE,CAAC,CAAD,CAAzC;AAAA,MAA8C6K,WAAW,GAAG7K,EAAE,CAAC,CAAD,CAA9D;;AACA,MAAIG,EAAE,GAAGrmB,KAAK,CAAC2H,QAAN,CAAeyoB,sBAAf,CAAT;AAAA,MAAiDzb,aAAa,GAAG0R,EAAE,CAAC,CAAD,CAAnE;AAAA,MAAwE2K,gBAAgB,GAAG3K,EAAE,CAAC,CAAD,CAA7F;;AACA,MAAIG,EAAE,GAAGxmB,KAAK,CAAC2H,QAAN,CAAe;AACpBqO,IAAAA,UAAU,EAAE,CAAC,CADO;AAEpB9F,IAAAA,SAAS,EAAE,CAAC;AAFQ,GAAf,CAAT;AAAA,MAGI0E,KAAK,GAAG4R,EAAE,CAAC,CAAD,CAHd;AAAA,MAGmByK,QAAQ,GAAGzK,EAAE,CAAC,CAAD,CAHhC;;AAIA,MAAI0K,EAAE,GAAGlxB,KAAK,CAAC2H,QAAN,CAAe0D,YAAY,CAACwgB,QAA5B,CAAT;AAAA,MAAgDvB,UAAU,GAAG4G,EAAE,CAAC,CAAD,CAA/D;AAAA,MAAoEC,aAAa,GAAGD,EAAE,CAAC,CAAD,CAAtF;;AACA,MAAIE,EAAE,GAAGpxB,KAAK,CAAC2H,QAAN,CAAe4iB,aAAf,CAAT;AAAA,MAAwC8G,WAAW,GAAGD,EAAE,CAAC,CAAD,CAAxD;AAAA,MAA6DE,cAAc,GAAGF,EAAE,CAAC,CAAD,CAAhF;;AACA,MAAIxkB,gBAAgB,GAAGlB,aAAa,CAACklB,QAAD,CAAb,CAAwBhkB,gBAA/C;;AACA,MAAI2kB,EAAE,GAAG5iB,aAAa,CAACiiB,QAAD,CAAtB;AAAA,MAAkChiB,YAAY,GAAG2iB,EAAE,CAAC3iB,YAApD;AAAA,MAAkEG,cAAc,GAAGwiB,EAAE,CAACxiB,cAAtF;AAAA,MAAsGE,eAAe,GAAGsiB,EAAE,CAACtiB,eAA3H;;AACA,MAAIif,aAAa,GAAGxmB,SAAS,EAA7B;AACA,MAAItC,QAAQ,GAAGsL,GAAG,CAACtL,QAAnB;AACA,MAAIsR,SAAS,GAAGC,QAAQ,CAACD,SAAzB;AAAA,MAAoCD,UAAU,GAAGE,QAAQ,CAACF,UAA1D;AACA,MAAIiR,GAAG,GAAGrkB,KAAK,CAAC+B,QAAD,CAAL,CAAgB0R,IAAhB,CAAqB,IAArB,CAAV;AACA,MAAI0a,cAAc,GAAG9J,GAAG,CAAC3Q,GAAJ,CAAQ,YAAY;AAAE,WAAO,CAAP;AAAW,GAAjC,CAArB;AACA,MAAI0a,QAAQ,GAAG/J,GAAG,CAAC3Q,GAAJ,CAAQ,YAAY;AAAE,WAAO/W,KAAK,CAAC8L,MAAN,EAAP;AAAwB,GAA9C,CAAf;;AACA,MAAIqV,SAAS,GAAG,UAAU/T,KAAV,EAAiB;AAC7B,QAAIA,KAAK,CAAChJ,MAAN,KAAiB,CAArB,EAAwB;AACpB;AACH;;AACD,QAAIstB,YAAY,GAAGtkB,KAAK,CAAC,CAAD,CAAxB;;AACA,QAAIwO,UAAU,CAACK,IAAI,CAAC3L,IAAN,CAAV,CAAsBuL,WAAtB,OAAwC,KAA5C,EAAmD;AAC/C;AACH;;AACD,QAAItN,OAAJ,CAAY,UAAUC,OAAV,EAAmB;AAC3B,UAAImjB,MAAM,GAAG,IAAIC,UAAJ,EAAb;AACAD,MAAAA,MAAM,CAACE,iBAAP,CAAyBH,YAAzB;;AACAC,MAAAA,MAAM,CAACG,MAAP,GAAgB,YAAY;AACxB,YAAI/O,KAAK,GAAG,IAAIgP,UAAJ,CAAeJ,MAAM,CAAClxB,MAAtB,CAAZ;AACA+N,QAAAA,OAAO,CAACuU,KAAD,CAAP;AACH,OAHD;AAIH,KAPD,EAOG/T,IAPH,CAOQ,UAAUiM,IAAV,EAAgB;AACpB0V,MAAAA,UAAU,CAACe,YAAY,CAACphB,IAAd,EAAoB2K,IAApB,CAAV;AACH,KATD;AAUH,GAlBD;;AAmBA,MAAIjO,UAAU,GAAGH,OAAO,CAAC+jB,QAAD,EAAW,UAAUxjB,KAAV,EAAiB;AAAE,WAAO+T,SAAS,CAAC/T,KAAD,CAAhB;AAA0B,GAAxD,CAAP,CAAiEJ,UAAlF;;AACA,MAAIglB,EAAE,GAAGhyB,KAAK,CAAC2H,QAAN,CAAe8Q,aAAa,CAACwZ,QAA7B,CAAT;AAAA,MAAiDrY,WAAW,GAAGoY,EAAE,CAAC,CAAD,CAAjE;AAAA,MAAsEE,cAAc,GAAGF,EAAE,CAAC,CAAD,CAAzF;;AACA,MAAIG,UAAU,GAAG,UAAUjiB,SAAV,EAAqB;AAClC,QAAIA,SAAS,GAAG,CAAZ,IAAiBA,SAAS,IAAI9K,QAAlC,EAA4C;AACxC;AACH;;AACD0rB,IAAAA,cAAc,CAAC5gB,SAAD,CAAd;AACA,QAAIkiB,cAAc,GAAGxB,QAAQ,CAACvmB,OAA9B;AACA,QAAIgoB,UAAU,GAAGZ,QAAQ,CAACvhB,SAAD,CAAR,CAAoB7F,OAArC;;AACA,QAAI+nB,cAAc,IAAIC,UAAtB,EAAkC;AAC9BD,MAAAA,cAAc,CAACnoB,SAAf,GAA2BooB,UAAU,CAACnf,SAAtC;AACH;AACJ,GAVD;;AAWAlT,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxBsqB,IAAAA,cAAc,CAAChgB,GAAD,CAAd;;AACA,QAAI8f,WAAJ,EAAiB;AACb2B,MAAAA,UAAU,CAAC3B,WAAD,CAAV;AACH;AACJ,GALD,EAKG,EALH;;AAMA,MAAI8B,mBAAmB,GAAG,UAAU3G,IAAV,EAAgB;AACtC/e,IAAAA,gBAAgB,CAAC+e,IAAI,KAAKpgB,eAAe,CAACkgB,IAA1B,CAAhB;AACA6F,IAAAA,cAAc,CAAC3F,IAAD,CAAd;AACH,GAHD;;AAIA3rB,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxB,QAAImkB,aAAa,KAAKhf,eAAe,CAACkgB,IAAtC,EAA4C;AACxC7e,MAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACH;AACJ,GAJD,EAIG,EAJH;;AAKA,MAAI+hB,QAAQ,GAAG,YAAY;AACvB3T,IAAAA,YAAY,CAACiB,IAAI,CAAC3L,IAAN,EAAY2L,IAAI,CAAChB,IAAjB,CAAZ;AACH,GAFD;;AAGA,MAAI2O,IAAI,GAAG,UAAU2I,QAAV,EAAoB;AAC3B,QAAIC,QAAQ,GAAG5B,QAAQ,CAACvmB,OAAxB;;AACA,QAAI,CAACmoB,QAAL,EAAe;AACX;AACH;;AACD,QAAIC,MAAM,GAAG,CAAb;;AACA,YAAQF,QAAR;AACI,WAAK9mB,kBAAkB,CAACke,UAAxB;AACI8I,QAAAA,MAAM,GAAG,CAAT;AACA;;AACJ,WAAKhnB,kBAAkB,CAAC+E,OAAxB;AACIiiB,QAAAA,MAAM,GAAG1vB,IAAI,CAAC2e,GAAL,CAAS,CAAC8Q,QAAQ,CAACE,WAAT,GAAuBrC,gBAAxB,IAA4C3Z,SAArD,EAAgE,CAAC8b,QAAQ,CAACG,YAAT,GAAwB,IAAIrC,YAA7B,IAA6C7Z,UAA7G,CAAT;AACA;;AACJ,WAAKhL,kBAAkB,CAACse,SAAxB;AACI0I,QAAAA,MAAM,GAAG,CAACD,QAAQ,CAACE,WAAT,GAAuBrC,gBAAxB,IAA4C3Z,SAArD;AACA;;AACJ;AACI+b,QAAAA,MAAM,GAAGF,QAAT;AACA;AAZR;;AAcA1B,IAAAA,QAAQ,CAAC4B,MAAD,CAAR;AACAjJ,IAAAA,MAAM,CAAC9Y,GAAD,EAAM+hB,MAAN,CAAN;AACH,GAtBD;;AAuBA,MAAIG,qBAAqB,GAAG,UAAU1iB,SAAV,EAAqBL,KAArB,EAA4B;AACpD2hB,IAAAA,cAAc,CAACthB,SAAD,CAAd,GAA4BL,KAA5B;AACA,QAAIgjB,YAAY,GAAGrB,cAAc,CAACsB,MAAf,CAAsB,UAAUC,QAAV,EAAoB/L,IAApB,EAA0B/M,KAA1B,EAAiC+Y,KAAjC,EAAwC;AAC7E,aAAOhM,IAAI,GAAGgM,KAAK,CAACD,QAAD,CAAZ,GAAyB9Y,KAAzB,GAAiC8Y,QAAxC;AACH,KAFkB,EAEhB,CAFgB,CAAnB;AAGAjC,IAAAA,cAAc,CAAC+B,YAAD,CAAd;AACH,GAND;;AAOA,MAAII,MAAM,GAAG,UAAUC,MAAV,EAAkB;AAC3B,QAAIC,cAAc,GAAIniB,QAAQ,KAAK,GAAb,IAAoBA,QAAQ,KAAK,CAAC,GAAnC,GAA0CkiB,MAA1C,GAAmDliB,QAAQ,GAAGkiB,MAAnF;AACAnC,IAAAA,WAAW,CAACoC,cAAD,CAAX;AACH,GAHD;;AAIA,MAAIC,gBAAgB,GAAG,UAAUzH,IAAV,EAAgB;AACnC,QAAIyG,cAAc,GAAGxB,QAAQ,CAACvmB,OAA9B;;AACA,QAAI,CAAC+nB,cAAL,EAAqB;AACjB;AACH;;AACD,YAAQzG,IAAR;AACI,WAAKtgB,YAAY,CAACwgB,QAAlB;AACIuG,QAAAA,cAAc,CAAC9lB,SAAf,CAAyBC,GAAzB,CAA6BjL,KAAK,CAAChB,WAAN,GAAoB,uBAAjD;AACA8xB,QAAAA,cAAc,CAAC9lB,SAAf,CAAyBE,MAAzB,CAAgClL,KAAK,CAAChB,WAAN,GAAoB,yBAApD;AACA8xB,QAAAA,cAAc,CAAC9lB,SAAf,CAAyBE,MAAzB,CAAgClL,KAAK,CAAChB,WAAN,GAAoB,sBAApD;AACA;;AACJ,WAAK+K,YAAY,CAAC0gB,UAAlB;AACIqG,QAAAA,cAAc,CAAC9lB,SAAf,CAAyBC,GAAzB,CAA6BjL,KAAK,CAAChB,WAAN,GAAoB,yBAAjD;AACA8xB,QAAAA,cAAc,CAAC9lB,SAAf,CAAyBE,MAAzB,CAAgClL,KAAK,CAAChB,WAAN,GAAoB,uBAApD;AACA8xB,QAAAA,cAAc,CAAC9lB,SAAf,CAAyBE,MAAzB,CAAgClL,KAAK,CAAChB,WAAN,GAAoB,sBAApD;AACA;;AACJ,WAAK+K,YAAY,CAAC4gB,OAAlB;AACImG,QAAAA,cAAc,CAAC9lB,SAAf,CAAyBC,GAAzB,CAA6BjL,KAAK,CAAChB,WAAN,GAAoB,sBAAjD;AACA8xB,QAAAA,cAAc,CAAC9lB,SAAf,CAAyBE,MAAzB,CAAgClL,KAAK,CAAChB,WAAN,GAAoB,uBAApD;AACA8xB,QAAAA,cAAc,CAAC9lB,SAAf,CAAyBE,MAAzB,CAAgClL,KAAK,CAAChB,WAAN,GAAoB,yBAApD;AACA;AAfR;;AAiBA6wB,IAAAA,aAAa,CAACxF,IAAD,CAAb;AACH,GAvBD;;AAwBA,MAAIhU,WAAW,GAAG,UAAUpQ,MAAV,EAAkB;AAChC4qB,IAAAA,UAAU,CAAC5qB,MAAM,CAAC2I,SAAR,CAAV;AACA+gB,IAAAA,QAAQ,CAAC1pB,MAAD,CAAR;AACH,GAHD;;AAIA,MAAIsW,UAAU,GAAG,UAAU3N,SAAV,EAAqBE,YAArB,EAAmCG,OAAnC,EAA4C;AACzD,QAAI6hB,cAAc,GAAGxB,QAAQ,CAACvmB,OAA9B;;AACA,QAAI,CAAC+nB,cAAL,EAAqB;AACjB;AACH;;AACD,QAAIiB,YAAY,GAAGnjB,SAAS,GAAG,CAA/B;AACAQ,IAAAA,GAAG,CAAC+G,OAAJ,CAAY4b,YAAZ,EAA0BrkB,IAA1B,CAA+B,UAAUkC,IAAV,EAAgB;AAC3C,UAAII,QAAQ,GAAGJ,IAAI,CAACK,WAAL,CAAiB;AAAElB,QAAAA,KAAK,EAAE;AAAT,OAAjB,CAAf;AACA,UAAInH,GAAG,GAAG,CAAV;AACA,UAAIoqB,MAAM,GAAGljB,YAAY,IAAI,CAA7B;;AACA,cAAQG,OAAR;AACI,aAAK9E,kBAAkB,CAAC+E,OAAxB;AACItH,UAAAA,GAAG,GAAG,CAAN;AACA0gB,UAAAA,IAAI,CAACne,kBAAkB,CAAC+E,OAApB,CAAJ;AACA;;AACJ;AACItH,UAAAA,GAAG,GAAG,CAACoI,QAAQ,CAACxP,MAAT,GAAkBwxB,MAAnB,IAA6BjjB,KAAnC;AACA;AAPR;;AASA,UAAIkjB,aAAa,GAAG9B,QAAQ,CAACvhB,SAAD,CAAR,CAAoB7F,OAAxC;;AACA,UAAIkpB,aAAJ,EAAmB;AACfnB,QAAAA,cAAc,CAACnoB,SAAf,GAA2BspB,aAAa,CAACrgB,SAAd,GAA0BhK,GAArD;AACH;AACJ,KAjBD;AAkBH,GAxBD;;AAyBA,MAAI6Q,KAAK,GAAG,YAAY;AAAE,WAAOmY,cAAc,CAACzZ,aAAa,CAACiC,SAAf,CAArB;AAAiD,GAA3E;;AACA,MAAIF,cAAc,GAAG,YAAY;AAAE,WAAO0X,cAAc,CAACzZ,aAAa,CAACwZ,QAAf,CAArB;AAAgD,GAAnF;;AACA,MAAIxX,aAAa,GAAG,YAAY;AAAE,WAAOyX,cAAc,CAACzZ,aAAa,CAACqB,KAAf,CAArB;AAA6C,GAA/E;;AACA,SAAO1H,MAAM,CAAC;AACVohB,IAAAA,MAAM,EAAE/C,MAAM,CAACvC,aAAa,CAACtmB,MAAf,EAAuB;AACjC/C,MAAAA,KAAK,EAAE;AACHrC,QAAAA,KAAK,EAAE;AACHqG,UAAAA,QAAQ,EAAE;AADP;AADJ,OAD0B;AAMjC3H,MAAAA,QAAQ,EAAGlB,KAAK,CAACwB,aAAN,CAAoB6Y,cAApB,EAAoC;AAAE3J,QAAAA,GAAG,EAAEA,GAAP;AAAY+F,QAAAA,UAAU,EAAEA,UAAxB;AAAoCC,QAAAA,SAAS,EAAEA,SAA/C;AAA0DkD,QAAAA,WAAW,EAAEA,WAAvE;AAAoF5I,QAAAA,QAAQ,EAAEA,QAA9F;AAAwGmH,QAAAA,QAAQ,EAAEqC,cAAlH;AAAkIpC,QAAAA,eAAe,EAAEqC;AAAnJ,OAApC;AANsB,KAAvB,EAOX;AACC5V,MAAAA,KAAK,EAAE;AACHsC,QAAAA,GAAG,EAAEypB,QADF;AAEHpuB,QAAAA,KAAK,EAAE;AACHqG,UAAAA,QAAQ,EAAE;AADP;AAFJ,OADR;AAOC3H,MAAAA,QAAQ,EAAGlB,KAAK,CAACwB,aAAN,CAAoBxB,KAAK,CAACsI,QAA1B,EAAoC,IAApC,EACP0E,UAAU,IAAIhN,KAAK,CAACwB,aAAN,CAAoBsW,QAApB,EAA8B,IAA9B,CADP,EAEPlJ,YAAY,IAAI5O,KAAK,CAACwB,aAAN,CAAoBkM,cAApB,EAAoC;AAAErM,QAAAA,OAAO,EAAE4N;AAAX,OAApC,CAFT,EAGP5L,KAAK,CAAC+B,QAAD,CAAL,CAAgB0R,IAAhB,CAAqB,CAArB,EAAwBC,GAAxB,CAA4B,UAAUC,CAAV,EAAaiD,KAAb,EAAoB;AAC5C,eAAQja,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,UAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,aAAjC;AAAgD4Z,UAAAA,GAAG,EAAE,eAAeD,KAApE;AAA2E9S,UAAAA,GAAG,EAAE,UAAUA,GAAV,EAAe;AAC1HsqB,YAAAA,QAAQ,CAACxX,KAAD,CAAR,CAAgB5P,OAAhB,GAA0BlD,GAA1B;AACH;AAF8B,SAA3B,EAGJnH,KAAK,CAACwB,aAAN,CAAoB8U,SAApB,EAA+B;AAAE5F,UAAAA,GAAG,EAAEA,GAAP;AAAYiE,UAAAA,aAAa,EAAEA,aAA3B;AAA0C7S,UAAAA,MAAM,EAAE2U,UAAlD;AAA8D7B,UAAAA,KAAK,EAAEA,KAArE;AAA4E1E,UAAAA,SAAS,EAAE+J,KAAvF;AAA8FjJ,UAAAA,QAAQ,EAAEA,QAAxG;AAAkHX,UAAAA,KAAK,EAAEA,KAAzH;AAAgIxO,UAAAA,KAAK,EAAE6U,SAAvI;AAAkJvF,UAAAA,YAAY,EAAE0M,UAAhK;AAA4KtH,UAAAA,uBAAuB,EAAEqc;AAArM,SAA/B,CAHI,CAAR;AAIH,OALD,CAHO;AAPZ,KAPW,EAuBX,UAAU5F,aAAV,EAAyB;AAAE,aAAQhtB,KAAK,CAACwB,aAAN,CAAoBkrB,OAApB,EAA6B;AAAE7N,QAAAA,WAAW,EAAEA,WAAf;AAA4BnO,QAAAA,GAAG,EAAEA,GAAjC;AAAsCiK,QAAAA,QAAQ,EAAEsB,IAAI,CAAC3L,IAArD;AAA2DD,QAAAA,KAAK,EAAEA,KAAlE;AAAyEia,QAAAA,UAAU,EAAEA,UAArF;AAAiGC,QAAAA,aAAa,EAAE8G,WAAhH;AAA6H7G,QAAAA,kBAAkB,EAAE4I,gBAAjJ;AAAmK3I,QAAAA,qBAAqB,EAAE6H,mBAA1L;AAA+M3F,QAAAA,UAAU,EAAEgC,QAA3N;AAAqO/B,QAAAA,YAAY,EAAE7d,cAAnP;AAAmQ8d,QAAAA,QAAQ,EAAEsF,UAA7Q;AAAyRtd,QAAAA,aAAa,EAAE8C,WAAxS;AAAqTuJ,QAAAA,WAAW,EAAEC,SAAlU;AAA6U2L,QAAAA,OAAO,EAAE/S,KAAtV;AAA6V6Q,QAAAA,QAAQ,EAAEqI,MAAvW;AAA+WrN,QAAAA,WAAW,EAAEoL,gBAA5X;AAA8YjE,QAAAA,eAAe,EAAEmB,aAAa,CAACpmB,MAA7a;AAAqb0hB,QAAAA,MAAM,EAAEI,IAA7b;AAAmcoD,QAAAA,aAAa,EAAEA;AAAld,OAA7B,CAAR;AAA2gB,KAvB3hB,EAuB6hB;AACviBnoB,MAAAA,KAAK,EAAE,EADgiB;AAEviB3D,MAAAA,QAAQ,EAAGlB,KAAK,CAACwB,aAAN,CAAoByd,OAApB,EAA6B;AAAEJ,QAAAA,WAAW,EAAEA,WAAf;AAA4BnO,QAAAA,GAAG,EAAEA,GAAjC;AAAsC5O,QAAAA,MAAM,EAAE2U,UAA9C;AAA0DzF,QAAAA,QAAQ,EAAEA,QAApE;AAA8EnP,QAAAA,KAAK,EAAE6U,SAArF;AAAgGvF,QAAAA,YAAY,EAAE0M,UAA9G;AAA0HiB,QAAAA,YAAY,EAAEqT;AAAxI,OAA7B;AAF4hB,KAvB7hB,CADJ;AA4BVzhB,IAAAA,GAAG,EAAEA,GA5BK;AA6BVie,IAAAA,QAAQ,EAAEA,QA7BA;AA8BVyE,IAAAA,gBAAgB,EAAEA,gBA9BR;AA+BVd,IAAAA,mBAAmB,EAAEA,mBA/BX;AAgCVH,IAAAA,UAAU,EAAEA,UAhCF;AAiCVpY,IAAAA,KAAK,EAAEA,KAjCG;AAkCVkZ,IAAAA,MAAM,EAAEA,MAlCE;AAmCVrJ,IAAAA,IAAI,EAAEA;AAnCI,GAAD,CAAb;AAqCH,CAvMD;;AAyMA,IAAI6J,kBAAkB,GAAG,UAAUzyB,EAAV,EAAc;AACnC,MAAI0P,GAAG,GAAG1P,EAAE,CAAC0P,GAAb;AAAA,MAAkB0B,MAAM,GAAGpR,EAAE,CAACoR,MAA9B;AACA,MAAI9Q,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;AACA,MAAIwwB,QAAQ,GAAG5wB,KAAK,CAAC8L,MAAN,CAAa,IAAb,CAAf;;AACA,MAAI7K,EAAE,GAAGjB,KAAK,CAAC2H,QAAN,CAAe;AACpB8O,IAAAA,UAAU,EAAE,CADQ;AAEpBC,IAAAA,SAAS,EAAE,CAFS;AAGpBrG,IAAAA,KAAK,EAAE;AAHa,GAAf,CAAT;AAAA,MAIIsG,QAAQ,GAAG1V,EAAE,CAAC,CAAD,CAJjB;AAAA,MAIsB2V,WAAW,GAAG3V,EAAE,CAAC,CAAD,CAJtC;;AAKAjB,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxBsK,IAAAA,GAAG,CAAC+G,OAAJ,CAAY,CAAZ,EAAezI,IAAf,CAAoB,UAAU0I,OAAV,EAAmB;AACnC,UAAIpG,QAAQ,GAAGoG,OAAO,CAACnG,WAAR,CAAoB;AAAElB,QAAAA,KAAK,EAAE;AAAT,OAApB,CAAf;AACA,UAAIgH,CAAC,GAAG/F,QAAQ,CAACzP,KAAjB;AACA,UAAIyV,CAAC,GAAGhG,QAAQ,CAACxP,MAAjB;AACA,UAAI0wB,QAAQ,GAAG5B,QAAQ,CAACvmB,OAAxB;;AACA,UAAI,CAACmoB,QAAL,EAAe;AACX;AACH;;AACD,UAAIC,MAAM,GAAGD,QAAQ,CAACE,WAAT,GAAuBrb,CAApC;AACA,UAAIhH,KAAK,GAAG6Y,QAAQ,CAACnmB,IAAI,CAAC4e,GAAL,CAAS,CAAT,EAAY8Q,MAAZ,CAAD,CAApB;AACA7b,MAAAA,WAAW,CAAC;AACRH,QAAAA,UAAU,EAAEa,CADJ;AAERZ,QAAAA,SAAS,EAAEW,CAFH;AAGRhH,QAAAA,KAAK,EAAEA;AAHC,OAAD,CAAX;AAKH,KAfD;AAgBH,GAjBD,EAiBG,CAACK,GAAD,CAjBH;AAkBA,MAAIgG,SAAS,GAAGC,QAAQ,CAACD,SAAzB;AACA,SAAQA,SAAS,KAAK,CAAd,GACD1W,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,uBAAjC;AAA0D6G,IAAAA,GAAG,EAAEypB;AAA/D,GAA3B,EACC5wB,KAAK,CAACwB,aAAN,CAAoBkB,OAApB,EAA6B,IAA7B,CADD,CADC,GAGF0P,MAAM,CAACuE,QAAD,CAHZ;AAIH,CAhCD;;AAkCA,IAAI+c,aAAa,GAAI,YAAY;AAC7B,WAASA,aAAT,GAAyB,CACxB;;AACD,SAAOA,aAAP;AACH,CAJoB,EAArB;;AAMA,IAAIC,mBAAmB,GAAI,UAAUC,MAAV,EAAkB;AACzCpwB,EAAAA,SAAS,CAACmwB,mBAAD,EAAsBC,MAAtB,CAAT;;AACA,WAASD,mBAAT,CAA6BE,gBAA7B,EAA+C;AAC3C,QAAIC,KAAK,GAAGF,MAAM,CAACvvB,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAyvB,IAAAA,KAAK,CAACD,gBAAN,GAAyBA,gBAAzB;AACA,WAAOC,KAAP;AACH;;AACD,SAAOH,mBAAP;AACH,CAR0B,CAQzBD,aARyB,CAA3B;;AAUA,IAAIK,cAAc,GAAG,UAAU/yB,EAAV,EAAc;AAC/B,MAAI6yB,gBAAgB,GAAG7yB,EAAE,CAAC6yB,gBAA1B;AACA,MAAI9b,IAAI,GAAG/X,KAAK,CAACuB,UAAN,CAAiBsW,mBAAjB,CAAX;AACA,MAAIvW,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;;AACA,MAAIa,EAAE,GAAGjB,KAAK,CAAC2H,QAAN,CAAe,EAAf,CAAT;AAAA,MAA6BqsB,QAAQ,GAAG/yB,EAAE,CAAC,CAAD,CAA1C;AAAA,MAA+CgzB,WAAW,GAAGhzB,EAAE,CAAC,CAAD,CAA/D;;AACA,MAAIizB,cAAc,GAAG,UAAUhuB,CAAV,EAAa;AAAE,WAAO+tB,WAAW,CAAC/tB,CAAC,CAACqB,MAAF,CAAS1H,KAAV,CAAlB;AAAqC,GAAzE;;AACA,MAAIs0B,MAAM,GAAG,YAAY;AAAE,WAAON,gBAAgB,CAACG,QAAD,CAAvB;AAAoC,GAA/D;;AACA,SAAQh0B,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACJN,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B,IAA3B,EACIxB,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACIyX,IAAI,CAACqc,cAAL,CAAoBC,qBADxB,EAEI,GAFJ,CADJ,EAIIr0B,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoB,OAApB,EAA6B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,wBAAjC;AAA2D8a,IAAAA,IAAI,EAAE,UAAjE;AAA6EkG,IAAAA,QAAQ,EAAE4S;AAAvF,GAA7B,CADJ,EAEIl0B,KAAK,CAACwB,aAAN,CAAoB,QAApB,EAA8B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,yBAAjC;AAA4De,IAAAA,OAAO,EAAE8yB;AAArE,GAA9B,EAA6Gpc,IAAI,CAACqc,cAAL,CAAoBD,MAAjI,CAFJ,CAJJ,CADI,CAAR;AAQH,CAfD;;AAiBA,IAAIG,cAAc,GAAI,UAAUV,MAAV,EAAkB;AACpCpwB,EAAAA,SAAS,CAAC8wB,cAAD,EAAiBV,MAAjB,CAAT;;AACA,WAASU,cAAT,CAAwB5jB,GAAxB,EAA6B;AACzB,QAAIojB,KAAK,GAAGF,MAAM,CAACvvB,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAyvB,IAAAA,KAAK,CAACpjB,GAAN,GAAYA,GAAZ;AACA,WAAOojB,KAAP;AACH;;AACD,SAAOQ,cAAP;AACH,CARqB,CAQpBZ,aARoB,CAAtB;;AAUA,IAAIa,YAAY,GAAI,UAAUX,MAAV,EAAkB;AAClCpwB,EAAAA,SAAS,CAAC+wB,YAAD,EAAeX,MAAf,CAAT;;AACA,WAASW,YAAT,CAAsBC,KAAtB,EAA6B;AACzB,QAAIV,KAAK,GAAGF,MAAM,CAACvvB,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAyvB,IAAAA,KAAK,CAACU,KAAN,GAAcA,KAAd;AACA,WAAOV,KAAP;AACH;;AACD,SAAOS,YAAP;AACH,CARmB,CAQlBb,aARkB,CAApB;;AAUA,IAAIe,YAAY,GAAI,UAAUb,MAAV,EAAkB;AAClCpwB,EAAAA,SAAS,CAACixB,YAAD,EAAeb,MAAf,CAAT;;AACA,WAASa,YAAT,CAAsBC,WAAtB,EAAmC;AAC/B,QAAIZ,KAAK,GAAGF,MAAM,CAACvvB,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAyvB,IAAAA,KAAK,CAACY,WAAN,GAAoBA,WAApB;AACA,WAAOZ,KAAP;AACH;;AACD,SAAOW,YAAP;AACH,CARmB,CAQlBf,aARkB,CAApB;;AAUA,IAAIiB,aAAa,GAAG,UAAU3zB,EAAV,EAAc;AAC9B,MAAI6yB,gBAAgB,GAAG7yB,EAAE,CAAC6yB,gBAA1B;AACA,MAAI9b,IAAI,GAAG/X,KAAK,CAACuB,UAAN,CAAiBsW,mBAAjB,CAAX;AACA,MAAIvW,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;;AACA,MAAIa,EAAE,GAAGjB,KAAK,CAAC2H,QAAN,CAAe,EAAf,CAAT;AAAA,MAA6BqsB,QAAQ,GAAG/yB,EAAE,CAAC,CAAD,CAA1C;AAAA,MAA+CgzB,WAAW,GAAGhzB,EAAE,CAAC,CAAD,CAA/D;;AACA,MAAIizB,cAAc,GAAG,UAAUhuB,CAAV,EAAa;AAAE,WAAO+tB,WAAW,CAAC/tB,CAAC,CAACqB,MAAF,CAAS1H,KAAV,CAAlB;AAAqC,GAAzE;;AACA,MAAIs0B,MAAM,GAAG,YAAY;AAAE,WAAON,gBAAgB,CAACG,QAAD,CAAvB;AAAoC,GAA/D;;AACA,SAAQh0B,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACJN,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B,IAA3B,EACIxB,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACIyX,IAAI,CAAC6c,aAAL,CAAmBC,QADvB,EAEI,GAFJ,CADJ,EAII70B,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,GAA3B,EACIN,KAAK,CAACwB,aAAN,CAAoB,OAApB,EAA6B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,wBAAjC;AAA2D8a,IAAAA,IAAI,EAAE,UAAjE;AAA6EkG,IAAAA,QAAQ,EAAE4S;AAAvF,GAA7B,CADJ,EAEIl0B,KAAK,CAACwB,aAAN,CAAoB,QAApB,EAA8B;AAAEC,IAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB,yBAAjC;AAA4De,IAAAA,OAAO,EAAE8yB;AAArE,GAA9B,EAA6Gpc,IAAI,CAAC6c,aAAL,CAAmBT,MAAhI,CAFJ,CAJJ,CADI,CAAR;AAQH,CAfD;;AAiBA,IAAIW,kBAAkB,GAAI,UAAUlB,MAAV,EAAkB;AACxCpwB,EAAAA,SAAS,CAACsxB,kBAAD,EAAqBlB,MAArB,CAAT;;AACA,WAASkB,kBAAT,CAA4BjB,gBAA5B,EAA8C;AAC1C,QAAIC,KAAK,GAAGF,MAAM,CAACvvB,IAAP,CAAY,IAAZ,KAAqB,IAAjC;;AACAyvB,IAAAA,KAAK,CAACD,gBAAN,GAAyBA,gBAAzB;AACA,WAAOC,KAAP;AACH;;AACD,SAAOgB,kBAAP;AACH,CARyB,CAQxBpB,aARwB,CAA1B;;AAUA,IAAIqB,cAAc,GAAG,UAAU/zB,EAAV,EAAc;AAC/B,MAAIib,IAAI,GAAGjb,EAAE,CAACib,IAAd;AAAA,MAAoB7J,MAAM,GAAGpR,EAAE,CAACoR,MAAhC;AACA,MAAI9Q,KAAK,GAAGtB,KAAK,CAACuB,UAAN,CAAiBnB,YAAjB,CAAZ;;AACA,MAAIa,EAAE,GAAGjB,KAAK,CAAC2H,QAAN,CAAe,IAAI8sB,YAAJ,CAAiB,CAAjB,CAAf,CAAT;AAAA,MAA8C1sB,MAAM,GAAG9G,EAAE,CAAC,CAAD,CAAzD;AAAA,MAA8D+zB,SAAS,GAAG/zB,EAAE,CAAC,CAAD,CAA5E;;AACAjB,EAAAA,KAAK,CAACoG,SAAN,CAAgB,YAAY;AACxB4uB,IAAAA,SAAS,CAAC,IAAIP,YAAJ,CAAiB,CAAjB,CAAD,CAAT;AACA,QAAIQ,WAAW,GAAG90B,KAAK,CAAC+0B,WAAN,CAAkBjZ,IAAlB,CAAlB;;AACAgZ,IAAAA,WAAW,CAACE,UAAZ,GAAyB,UAAUC,cAAV,EAA0BC,MAA1B,EAAkC;AACvD,cAAQA,MAAR;AACI,aAAKl1B,KAAK,CAACm1B,iBAAN,CAAwBC,aAA7B;AACIP,UAAAA,SAAS,CAAC,IAAIrB,mBAAJ,CAAwByB,cAAxB,CAAD,CAAT;AACA;;AACJ,aAAKj1B,KAAK,CAACm1B,iBAAN,CAAwBE,kBAA7B;AACIR,UAAAA,SAAS,CAAC,IAAIF,kBAAJ,CAAuBM,cAAvB,CAAD,CAAT;AACA;AANR;AAQH,KATD;;AAUAH,IAAAA,WAAW,CAACliB,OAAZ,CAAoB/D,IAApB,CAAyB,UAAU0B,GAAV,EAAe;AAAE,aAAOskB,SAAS,CAAC,IAAIV,cAAJ,CAAmB5jB,GAAnB,CAAD,CAAhB;AAA4C,KAAtF,EAAwF,UAAU+kB,GAAV,EAAe;AAAE,aAAOT,SAAS,CAAC,IAAIT,YAAJ,CAAiBkB,GAAG,CAACC,OAAJ,IAAe,sBAAhC,CAAD,CAAhB;AAA4E,KAArL;AACA,WAAO,YAAY;AACfT,MAAAA,WAAW,CAACU,OAAZ;AACH,KAFD;AAGH,GAjBD,EAiBG,CAAC1Z,IAAD,CAjBH;;AAkBA,UAAQ,IAAR;AACI,SAAMlU,MAAM,YAAY4rB,mBAAxB;AACI,aAAO3zB,KAAK,CAACwB,aAAN,CAAoBuyB,cAApB,EAAoC;AAAEF,QAAAA,gBAAgB,EAAE9rB,MAAM,CAAC8rB;AAA3B,OAApC,CAAP;;AACJ,SAAM9rB,MAAM,YAAY+sB,kBAAxB;AACI,aAAO90B,KAAK,CAACwB,aAAN,CAAoBmzB,aAApB,EAAmC;AAAEd,QAAAA,gBAAgB,EAAE9rB,MAAM,CAAC8rB;AAA3B,OAAnC,CAAP;;AACJ,SAAM9rB,MAAM,YAAYusB,cAAxB;AACI,aAAOliB,MAAM,CAACrK,MAAM,CAAC2I,GAAR,CAAb;;AACJ,SAAM3I,MAAM,YAAYwsB,YAAxB;AACI,aAAQv0B,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,QAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,OAA3B,EAA4EyH,MAAM,CAACysB,KAAnF,CAAR;;AACJ,SAAMzsB,MAAM,YAAY0sB,YAAxB;AACA;AACI,aAAQz0B,KAAK,CAACwB,aAAN,CAAoB,KAApB,EAA2B;AAAEC,QAAAA,SAAS,EAAEH,KAAK,CAAChB,WAAN,GAAoB;AAAjC,OAA3B,EACJN,KAAK,CAACwB,aAAN,CAAoBkB,OAApB,EAA6B,IAA7B,CADI,CAAR;AAXR;AAcH,CApCD;;AAsCA,IAAI0xB,cAAc,GAAG;AACpBC,EAAAA,qBAAqB,EAAE,2CADH;AAEpBF,EAAAA,MAAM,EAAE;AAFY,CAArB;AAIA,IAAIhY,UAAU,GAAG;AAChBC,EAAAA,eAAe,EAAE,mBADD;AAEhBC,EAAAA,YAAY,EAAE;AAFE,CAAjB;AAIA,IAAIS,QAAQ,GAAG;AACdoB,EAAAA,UAAU,EAAE;AADE,CAAf;AAGA,IAAIxZ,IAAI,GAAG;AACVsT,EAAAA,YAAY,EAAE;AADJ,CAAX;AAGA,IAAIM,aAAa,GAAG;AACnB3F,EAAAA,MAAM,EAAE,QADW;AAEnB4F,EAAAA,iBAAiB,EAAE;AAFA,CAApB;AAIA,IAAI6L,QAAQ,GAAG;AACdE,EAAAA,MAAM,EAAE,QADM;AAEdiB,EAAAA,KAAK,EAAE,OAFO;AAGdT,EAAAA,YAAY,EAAE,eAHA;AAIdF,EAAAA,OAAO,EAAE,SAJK;AAKdjK,EAAAA,QAAQ,EAAE,WALI;AAMdmI,EAAAA,QAAQ,EAAE,WANI;AAOd4B,EAAAA,QAAQ,EAAE,UAPI;AAQdM,EAAAA,gBAAgB,EAAE,mBARJ;AASdM,EAAAA,SAAS,EAAE,YATG;AAUdJ,EAAAA,WAAW,EAAE,cAVC;AAWdE,EAAAA,UAAU,EAAE,aAXE;AAYdZ,EAAAA,OAAO,EAAE,SAZK;AAadtI,EAAAA,KAAK,EAAE;AAbO,CAAf;AAeA,IAAIxG,MAAM,GAAG;AACZ6P,EAAAA,KAAK,EAAE,OADK;AAEZqD,EAAAA,aAAa,EAAE,iBAFH;AAGZtC,EAAAA,SAAS,EAAE,YAHC;AAIZoC,EAAAA,SAAS,EAAE,YAJC;AAKZF,EAAAA,aAAa,EAAE,gBALH;AAMZ/B,EAAAA,UAAU,EAAE;AANA,CAAb;AAQA,IAAI7hB,OAAO,GAAG;AACbuX,EAAAA,UAAU,EAAE,YADC;AAEbW,EAAAA,QAAQ,EAAE,UAFG;AAGb+C,EAAAA,SAAS,EAAE;AAHE,CAAd;AAKA,IAAIlb,OAAO,GAAG;AACbqmB,EAAAA,kBAAkB,EAAE,qBADP;AAEb2D,EAAAA,QAAQ,EAAE,UAFG;AAGbF,EAAAA,UAAU,EAAE,aAHC;AAIbvC,EAAAA,aAAa,EAAE,kBAJF;AAKbC,EAAAA,YAAY,EAAE,iBALD;AAMbE,EAAAA,QAAQ,EAAE,WANG;AAObE,EAAAA,mBAAmB,EAAE,sBAPR;AAQbzB,EAAAA,WAAW,EAAE,cARA;AASb4C,EAAAA,QAAQ,EAAE,WATG;AAUbtM,EAAAA,QAAQ,EAAE,WAVG;AAWbwM,EAAAA,YAAY,EAAE,eAXD;AAYb7T,EAAAA,KAAK,EAAE,OAZM;AAabsR,EAAAA,cAAc,EAAE,yBAbH;AAcbD,EAAAA,aAAa,EAAE,kBAdF;AAeb1V,EAAAA,MAAM,EAAE,QAfK;AAgBb0W,EAAAA,iBAAiB,EAAE,qBAhBN;AAiBb8B,EAAAA,aAAa,EAAE,gBAjBF;AAkBb5B,EAAAA,iBAAiB,EAAE,oBAlBN;AAmBbkB,EAAAA,MAAM,EAAE,SAnBK;AAoBbF,EAAAA,OAAO,EAAE,UApBI;AAqBbd,EAAAA,gBAAgB,EAAE;AArBL,CAAd;AAuBA,IAAIoI,aAAa,GAAG;AACnBT,EAAAA,MAAM,EAAE,QADW;AAEnBU,EAAAA,QAAQ,EAAE;AAFS,CAApB;AAIA,IAAIjL,IAAI,GAAG;AACVC,EAAAA,UAAU,EAAE,aADF;AAEVC,EAAAA,OAAO,EAAE,UAFC;AAGVpT,EAAAA,SAAS,EAAE;AAHD,CAAX;AAKA,IAAIkf,IAAI,GAAG;AACVxB,EAAAA,cAAc,EAAEA,cADN;AAEVjY,EAAAA,UAAU,EAAEA,UAFF;AAGVW,EAAAA,QAAQ,EAAEA,QAHA;AAIVpY,EAAAA,IAAI,EAAEA,IAJI;AAKV4T,EAAAA,aAAa,EAAEA,aALL;AAMV8L,EAAAA,QAAQ,EAAEA,QANA;AAOV1O,EAAAA,MAAM,EAAEA,MAPE;AAQV9Q,EAAAA,OAAO,EAAEA,OARC;AASVD,EAAAA,OAAO,EAAEA,OATC;AAUViwB,EAAAA,aAAa,EAAEA,aAVL;AAWVhL,EAAAA,IAAI,EAAEA;AAXI,CAAX;;AAcA,IAAIiM,oBAAoB,GAAG,UAAU70B,EAAV,EAAc;AACrC,MAAIE,QAAQ,GAAGF,EAAE,CAACE,QAAlB;AAAA,MAA4B40B,YAAY,GAAG90B,EAAE,CAAC80B,YAA9C;AACA,MAAIC,WAAW,GAAGH,IAAlB;AACA,MAAI7d,IAAI,GAAG+d,YAAY,IAAIC,WAA3B;AACA,SAAQ/1B,KAAK,CAACwB,aAAN,CAAoBqW,mBAAmB,CAACme,QAAxC,EAAkD;AAAEn2B,IAAAA,KAAK,EAAEkY;AAAT,GAAlD,EAAmE7W,QAAnE,CAAR;AACH,CALD;;AAOA,IAAI+0B,aAAa,GAAG,UAAUj1B,EAAV,EAAc;AAC9B,MAAIE,QAAQ,GAAGF,EAAE,CAACE,QAAlB;AAAA,MAA4BZ,WAAW,GAAGU,EAAE,CAACV,WAA7C;AACA,SAAQN,KAAK,CAACwB,aAAN,CAAoBpB,YAAY,CAAC41B,QAAjC,EAA2C;AAAEn2B,IAAAA,KAAK,EAAE;AAAES,MAAAA,WAAW,EAAEA,WAAW,IAAI;AAA9B;AAAT,GAA3C,EAAgGY,QAAhG,CAAR;AACH,CAHD;;AAKA,IAAIg1B,MAAM,GAAG,UAAUl1B,EAAV,EAAc;AACvB,MAAIm1B,YAAY,GAAGn1B,EAAE,CAACm1B,YAAtB;AAAA,MAAoCC,OAAO,GAAGp1B,EAAE,CAACo1B,OAAjD;AAAA,MAA0D5F,WAAW,GAAGxvB,EAAE,CAACwvB,WAA3E;AAAA,MAAwFC,MAAM,GAAGzvB,EAAE,CAACyvB,MAApG;AAAA,MAA4GqF,YAAY,GAAG90B,EAAE,CAAC80B,YAA9H;AAAA,MAA4Ix1B,WAAW,GAAGU,EAAE,CAACV,WAA7J;AAAA,MAA0K8R,MAAM,GAAGpR,EAAE,CAACoR,MAAtL;AAAA,MAA8LnR,EAAE,GAAGD,EAAE,CAACupB,aAAtM;AAAA,MAAqNA,aAAa,GAAGtpB,EAAE,KAAK,KAAK,CAAZ,GAAgBsK,eAAe,CAACggB,IAAhC,GAAuCtqB,EAA5Q;AAAA,MAAgRE,EAAE,GAAGH,EAAE,CAAC0vB,cAAxR;AAAA,MAAwSA,cAAc,GAAGvvB,EAAE,KAAK,KAAK,CAAZ,GAAgB,YAAY,CAAG,CAA/B,GAAkCA,EAA3V;AAAA,MAA+V+kB,EAAE,GAAGllB,EAAE,CAACwoB,MAAvW;AAAA,MAA+WA,MAAM,GAAGtD,EAAE,KAAK,KAAK,CAAZ,GAAgB,YAAY,CAAG,CAA/B,GAAkCA,EAA1Z;;AACA,MAAIG,EAAE,GAAGrmB,KAAK,CAAC2H,QAAN,CAAe;AACpBsT,IAAAA,IAAI,EAAEmb,OADc;AAEpB9lB,IAAAA,IAAI,EAAE8lB;AAFc,GAAf,CAAT;AAAA,MAGIna,IAAI,GAAGoK,EAAE,CAAC,CAAD,CAHb;AAAA,MAGkBgQ,OAAO,GAAGhQ,EAAE,CAAC,CAAD,CAH9B;;AAIA,MAAIiQ,YAAY,GAAG,UAAU9xB,eAAV,EAA2BC,SAA3B,EAAsCC,IAAtC,EAA4CC,OAA5C,EAAqDC,OAArD,EAA8D;AAC7E,WAAOL,aAAa,CAACC,eAAD,EAAkBC,SAAlB,EAA6BC,IAA7B,EAAmCC,OAAO,CAACG,cAAD,CAA1C,EAA4DF,OAA5D,CAApB;AACH,GAFD;;AAGA,MAAIwc,QAAQ,GAAG,UAAUzG,QAAV,EAAoBM,IAApB,EAA0B;AACrCob,IAAAA,OAAO,CAAC;AACJpb,MAAAA,IAAI,EAAEA,IADF;AAEJ3K,MAAAA,IAAI,EAAEqK;AAFF,KAAD,CAAP;AAIH,GALD;;AAMA,MAAI4b,SAAS,GAAG,UAAUC,YAAV,EAAwB;AAAE,WAAO,UAAU9lB,GAAV,EAAe;AAC5D,UAAI+lB,WAAW,GAAG,UAAUC,EAAV,EAAc;AAC5B,YAAI/f,QAAQ,GAAG+f,EAAf;AACA/f,QAAAA,QAAQ,CAACtG,KAAT,GAAiB8lB,YAAY,IAAIO,EAAE,CAACrmB,KAApC;AACA,eAAQrQ,KAAK,CAACwB,aAAN,CAAoB+uB,KAApB,EAA2B;AAAE7f,UAAAA,GAAG,EAAEA,GAAP;AAAYuL,UAAAA,IAAI,EAAEA,IAAlB;AAAwBuU,UAAAA,WAAW,EAAEA,WAArC;AAAkDC,UAAAA,MAAM,EAAEA,MAAM,IAAI6F,YAApE;AAAkF3f,UAAAA,QAAQ,EAAEA,QAA5F;AAAsGvE,UAAAA,MAAM,EAAEokB,YAA9G;AAA4HjM,UAAAA,aAAa,EAAEA,aAA3I;AAA0JmG,UAAAA,cAAc,EAAEA,cAA1K;AAA0LC,UAAAA,UAAU,EAAEvP,QAAtM;AAAgNoI,UAAAA,MAAM,EAAEA;AAAxN,SAA3B,CAAR;AACH,OAJD;;AAKA,aAAQxpB,KAAK,CAACwB,aAAN,CAAoBiyB,kBAApB,EAAwC;AAAE/iB,QAAAA,GAAG,EAAEA,GAAP;AAAY0B,QAAAA,MAAM,EAAEqkB;AAApB,OAAxC,CAAR;AACH,KAPyC;AAOtC,GAPJ;;AAQA,MAAIE,eAAe,GAAGvkB,MAAM,IAAK,UAAUwkB,KAAV,EAAiB;AAAE,WAAOA,KAAK,CAACpD,MAAb;AAAsB,GAA1E;;AACA,SAAQxzB,KAAK,CAACwB,aAAN,CAAoBy0B,aAApB,EAAmC;AAAE31B,IAAAA,WAAW,EAAEA;AAAf,GAAnC,EACJN,KAAK,CAACwB,aAAN,CAAoBq0B,oBAApB,EAA0C;AAAEC,IAAAA,YAAY,EAAEA;AAAhB,GAA1C,EACI91B,KAAK,CAACwB,aAAN,CAAoBuzB,cAApB,EAAoC;AAAE9Y,IAAAA,IAAI,EAAEA,IAAI,CAAChB,IAAb;AAAmB7I,IAAAA,MAAM,EAAEmkB,SAAS,CAACI,eAAD;AAApC,GAApC,CADJ,CADI,CAAR;AAGH,CA3BD;;AA6BA,IAAIE,MAAM,GAAG,UAAU71B,EAAV,EAAc;AACvB,MAAIE,QAAQ,GAAGF,EAAE,CAACE,QAAlB;AAAA,MAA4B41B,SAAS,GAAG91B,EAAE,CAAC81B,SAA3C;AACA32B,EAAAA,KAAK,CAAC42B,mBAAN,CAA0BC,SAA1B,GAAsCF,SAAtC;AACA,SAAO92B,KAAK,CAACwB,aAAN,CAAoBxB,KAAK,CAACsI,QAA1B,EAAoC,IAApC,EAA0CpH,QAA1C,CAAP;AACH,CAJD;;AAMAtB,OAAO,CAACmB,MAAR,GAAiBA,MAAjB;AACAnB,OAAO,CAAC+B,IAAR,GAAeA,IAAf;AACA/B,OAAO,CAAC8B,WAAR,GAAsBA,WAAtB;AACA9B,OAAO,CAACsC,QAAR,GAAmBA,QAAnB;AACAtC,OAAO,CAAC4I,KAAR,GAAgBA,KAAhB;AACA5I,OAAO,CAACgL,OAAR,GAAkBA,OAAlB;AACAhL,OAAO,CAAC8I,QAAR,GAAmBC,UAAnB;AACA/I,OAAO,CAACyC,aAAR,GAAwBA,aAAxB;AACAzC,OAAO,CAAC0C,WAAR,GAAsBA,WAAtB;AACA1C,OAAO,CAACwL,UAAR,GAAqBC,YAArB;AACAzL,OAAO,CAAC0L,aAAR,GAAwBC,eAAxB;AACA3L,OAAO,CAAC6C,SAAR,GAAoBA,SAApB;AACA7C,OAAO,CAAC4L,gBAAR,GAA2BC,kBAA3B;AACA7L,OAAO,CAAC8C,OAAR,GAAkBA,OAAlB;AACA9C,OAAO,CAACmL,OAAR,GAAkBA,OAAlB;AACAnL,OAAO,CAACi3B,MAAR,GAAiBA,MAAjB;AACAj3B,OAAO,CAACq3B,OAAR,GAAkBf,MAAlB;AACAt2B,OAAO,CAAC2E,aAAR,GAAwBA,aAAxB;AACA3E,OAAO,CAACkF,cAAR,GAAyBA,cAAzB","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar React = _interopDefault(require('react'));\nvar ReactDOM = _interopDefault(require('react-dom'));\nvar PdfJs = require('pdfjs-dist');\n\nvar ThemeContext = React.createContext({\n    prefixClass: 'viewer',\n});\n\nvar classNames = function (classes) {\n    var result = [];\n    Object.keys(classes).forEach(function (clazz) {\n        if (clazz && classes[clazz]) {\n            result.push(clazz);\n        }\n    });\n    return result.join(' ');\n};\n\nvar Button = function (_a) {\n    var _b;\n    var children = _a.children, _c = _a.isSelected, isSelected = _c === void 0 ? false : _c, onClick = _a.onClick;\n    var theme = React.useContext(ThemeContext);\n    return (React.createElement(\"button\", { className: classNames((_b = {},\n            _b[theme.prefixClass + \"-button\"] = true,\n            _b[theme.prefixClass + \"-button-selected\"] = isSelected,\n            _b)), onClick: onClick }, children));\n};\n\nvar MenuDivider = function () {\n    var theme = React.useContext(ThemeContext);\n    return (React.createElement(\"li\", { className: theme.prefixClass + \"-menu-divider\" }));\n};\n\nvar Icon = function (_a) {\n    var children = _a.children, _b = _a.size, size = _b === void 0 ? 24 : _b;\n    var theme = React.useContext(ThemeContext);\n    var width = (size || 24) + \"px\";\n    return (React.createElement(\"svg\", { className: theme.prefixClass + \"-icon\", height: width, viewBox: \"0 0 24 24\", width: width }, children));\n};\n\nvar CheckIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M23.5,0.499l-16.5,23l-6.5-6.5\" })));\n};\n\nvar MenuItem = function (_a) {\n    var _b = _a.checked, checked = _b === void 0 ? false : _b, children = _a.children, _c = _a.icon, icon = _c === void 0 ? null : _c, onClick = _a.onClick;\n    var theme = React.useContext(ThemeContext);\n    return (React.createElement(\"li\", { className: theme.prefixClass + \"-menu-item\", onClick: onClick },\n        React.createElement(\"div\", { className: theme.prefixClass + \"-menu-item-icon\" }, icon),\n        React.createElement(\"div\", { className: theme.prefixClass + \"-menu-item-label\" }, children),\n        React.createElement(\"div\", { className: theme.prefixClass + \"-menu-item-check\" }, checked && React.createElement(CheckIcon, null))));\n};\n\nvar PrimaryButton = function (_a) {\n    var children = _a.children, onClick = _a.onClick;\n    var theme = React.useContext(ThemeContext);\n    return (React.createElement(\"button\", { className: theme.prefixClass + \"-primary-button\", onClick: onClick }, children));\n};\n\nvar ProgressBar = function (_a) {\n    var progress = _a.progress;\n    var theme = React.useContext(ThemeContext);\n    return (React.createElement(\"div\", { className: theme.prefixClass + \"-progress-bar\" },\n        React.createElement(\"div\", { className: theme.prefixClass + \"-progress-bar-inner\", style: { width: progress + \"%\" } },\n            progress,\n            \"%\")));\n};\n\nvar Separator = function () {\n    var theme = React.useContext(ThemeContext);\n    return (React.createElement(\"div\", { className: theme.prefixClass + \"-separator\" }));\n};\n\nvar Spinner = function () {\n    var theme = React.useContext(ThemeContext);\n    return (React.createElement(\"svg\", { className: theme.prefixClass + \"-spinner\", width: \"64px\", height: \"64px\", viewBox: \"0 0 32 32\" },\n        React.createElement(\"circle\", { className: theme.prefixClass + \"-spinner-circle\", cx: \"16\", cy: \"16\", r: \"12\", strokeDasharray: Math.PI * 2 * 9 })));\n};\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar defaultLayout = function (isSidebarOpened, container, main, toolbar, sidebar) {\n    var _a;\n    var theme = React.useContext(ThemeContext);\n    return (React.createElement(\"div\", __assign({}, container.attrs, { className: classNames((_a = {},\n            _a[theme.prefixClass + \"-layout-container\"] = true,\n            _a[theme.prefixClass + \"-layout-with-sidebar\"] = isSidebarOpened,\n            _a)), style: container.attrs.style }),\n        container.children,\n        React.createElement(\"div\", { className: theme.prefixClass + \"-layout-toolbar\" }, toolbar),\n        React.createElement(\"div\", { className: theme.prefixClass + \"-layout-sidebar\" }, sidebar.children),\n        React.createElement(\"div\", __assign({}, main.attrs, { className: theme.prefixClass + \"-layout-main\", style: main.attrs.style }), main.children)));\n};\n\nvar defaultToolbar = function (toolbarSlot) {\n    var theme = React.useContext(ThemeContext);\n    return (React.createElement(\"div\", { className: theme.prefixClass + \"-toolbar\" },\n        React.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-left\" },\n            React.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.toggleSidebarButton),\n            React.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.searchPopover),\n            React.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.previousPageButton),\n            React.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" },\n                toolbarSlot.currentPageInput,\n                \" / \",\n                toolbarSlot.numPages),\n            React.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.nextPageButton)),\n        React.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-center\" },\n            React.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.zoomOutButton),\n            React.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.zoomPopover),\n            React.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.zoomInButton)),\n        React.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-right\" },\n            React.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.fullScreenButton),\n            React.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.openFileButton),\n            React.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.downloadButton),\n            React.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.printButton),\n            React.createElement(\"div\", { className: theme.prefixClass + \"-toolbar-item\" }, toolbarSlot.moreActionsPopover))));\n};\n\nvar useKeyUp = function (targetKeyCode, handler) {\n    var keyUpHandler = function (e) {\n        (e.keyCode === targetKeyCode) && handler();\n    };\n    React.useEffect(function () {\n        document.addEventListener('keyup', keyUpHandler);\n        return function () { return document.removeEventListener('keyup', keyUpHandler); };\n    }, []);\n};\n\nvar useLockScroll = function () {\n    React.useEffect(function () {\n        var originalStyle = window.getComputedStyle(document.body).overflow;\n        document.body.style.overflow = 'hidden';\n        return function () {\n            document.body.style.overflow = originalStyle;\n        };\n    }, []);\n};\n\nvar ModalBody = function (_a) {\n    var children = _a.children, closeOnEscape = _a.closeOnEscape, onToggle = _a.onToggle;\n    var theme = React.useContext(ThemeContext);\n    var contentRef = React.createRef();\n    useLockScroll();\n    useKeyUp(27, function () { return closeOnEscape && onToggle(); });\n    return (React.createElement(\"div\", { className: theme.prefixClass + \"-modal-body\", ref: contentRef }, children));\n};\n\nvar ModalOverlay = function (_a) {\n    var children = _a.children, closeOnClickOutside = _a.closeOnClickOutside, onClose = _a.onClose;\n    var theme = React.useContext(ThemeContext);\n    var onClick = function (e) {\n        if (e.target === e.currentTarget && closeOnClickOutside) {\n            onClose();\n        }\n    };\n    return (React.createElement(\"div\", { className: theme.prefixClass + \"-modal-overlay\", onClick: onClick }, children));\n};\n\nvar ToggleStatus;\n(function (ToggleStatus) {\n    ToggleStatus[\"Close\"] = \"Close\";\n    ToggleStatus[\"Open\"] = \"Open\";\n    ToggleStatus[\"Toggle\"] = \"Toggle\";\n})(ToggleStatus || (ToggleStatus = {}));\nvar useToggle = function () {\n    var _a = React.useState(false), opened = _a[0], setOpened = _a[1];\n    var toggle = function (status) {\n        switch (status) {\n            case ToggleStatus.Close:\n                setOpened(false);\n                break;\n            case ToggleStatus.Open:\n                setOpened(true);\n                break;\n            case ToggleStatus.Toggle:\n            default:\n                setOpened(function (isOpened) { return !isOpened; });\n                break;\n        }\n    };\n    return { opened: opened, toggle: toggle };\n};\n\nvar Portal = function (_a) {\n    var content = _a.content, target = _a.target;\n    var _b = useToggle(), opened = _b.opened, toggle = _b.toggle;\n    return (React.createElement(React.Fragment, null,\n        target(toggle, opened),\n        opened && ReactDOM.createPortal(content(toggle), document.body)));\n};\n\nvar Modal = function (_a) {\n    var closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, content = _a.content, target = _a.target;\n    var renderContent = function (toggle) { return (React.createElement(ModalOverlay, { closeOnClickOutside: closeOnClickOutside, onClose: toggle },\n        React.createElement(ModalBody, { closeOnEscape: closeOnEscape, onToggle: toggle }, content(toggle)))); };\n    return (React.createElement(Portal, { target: target, content: renderContent }));\n};\n\nvar Position;\n(function (Position) {\n    Position[\"TopLeft\"] = \"TOP_LEFT\";\n    Position[\"TopCenter\"] = \"TOP_CENTER\";\n    Position[\"TopRight\"] = \"TOP_RIGHT\";\n    Position[\"RightTop\"] = \"RIGHT_TOP\";\n    Position[\"RightCenter\"] = \"RIGHT_CENTER\";\n    Position[\"RightBottom\"] = \"RIGHT_BOTTOM\";\n    Position[\"BottomLeft\"] = \"BOTTOM_LEFT\";\n    Position[\"BottomCenter\"] = \"BOTTOM_CENTER\";\n    Position[\"BottomRight\"] = \"BOTTOM_RIGHT\";\n    Position[\"LeftTop\"] = \"LEFT_TOP\";\n    Position[\"LeftCenter\"] = \"LEFT_CENTER\";\n    Position[\"LeftBottom\"] = \"LEFT_BOTTOM\";\n})(Position || (Position = {}));\nvar Position$1 = Position;\n\nvar calculatePosition = function (content, target, position, offset) {\n    var targetRect = target.getBoundingClientRect();\n    var contentRect = content.getBoundingClientRect();\n    var height = contentRect.height, width = contentRect.width;\n    var top = 0;\n    var left = 0;\n    switch (position) {\n        case Position$1.TopLeft:\n            top = targetRect.top - height;\n            left = targetRect.left;\n            break;\n        case Position$1.TopCenter:\n            top = targetRect.top - height;\n            left = targetRect.left + targetRect.width / 2 - width / 2;\n            break;\n        case Position$1.TopRight:\n            top = targetRect.top - height;\n            left = targetRect.left + targetRect.width - width;\n            break;\n        case Position$1.RightTop:\n            top = targetRect.top;\n            left = targetRect.left + targetRect.width;\n            break;\n        case Position$1.RightCenter:\n            top = targetRect.top + targetRect.height / 2 - height / 2;\n            left = targetRect.left + targetRect.width;\n            break;\n        case Position$1.RightBottom:\n            top = targetRect.top + targetRect.height - height;\n            left = targetRect.left + targetRect.width;\n            break;\n        case Position$1.BottomLeft:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left;\n            break;\n        case Position$1.BottomCenter:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left + targetRect.width / 2 - width / 2;\n            break;\n        case Position$1.BottomRight:\n            top = targetRect.top + targetRect.height;\n            left = targetRect.left + targetRect.width - width;\n            break;\n        case Position$1.LeftTop:\n            top = targetRect.top;\n            left = targetRect.left - width;\n            break;\n        case Position$1.LeftCenter:\n            top = targetRect.top + targetRect.height / 2 - height / 2;\n            left = targetRect.left - width;\n            break;\n        case Position$1.LeftBottom:\n            top = targetRect.top + targetRect.height - height;\n            left = targetRect.left - width;\n            break;\n    }\n    return {\n        left: left + document.body.scrollLeft + (offset.left || 0),\n        top: top + document.body.scrollTop + (offset.top || 0),\n    };\n};\n\nvar usePosition = function (contentRef, targetRef, position, offset) {\n    React.useEffect(function () {\n        var targetEle = targetRef.current;\n        var contentEle = contentRef.current;\n        if (!contentEle || !targetEle) {\n            return;\n        }\n        var _a = calculatePosition(contentEle, targetEle, position, offset), top = _a.top, left = _a.left;\n        contentEle.style.top = top + \"px\";\n        contentEle.style.left = left + \"px\";\n    }, []);\n};\n\nvar Arrow = function (_a) {\n    var _b;\n    var customClassName = _a.customClassName, position = _a.position;\n    var theme = React.useContext(ThemeContext);\n    return (React.createElement(\"div\", { className: classNames((_b = {},\n            _b[theme.prefixClass + \"-arrow\"] = true,\n            _b[theme.prefixClass + \"-arrow-tl\"] = position === Position$1.TopLeft,\n            _b[theme.prefixClass + \"-arrow-tc\"] = position === Position$1.TopCenter,\n            _b[theme.prefixClass + \"-arrow-tr\"] = position === Position$1.TopRight,\n            _b[theme.prefixClass + \"-arrow-rt\"] = position === Position$1.RightTop,\n            _b[theme.prefixClass + \"-arrow-rc\"] = position === Position$1.RightCenter,\n            _b[theme.prefixClass + \"-arrow-rb\"] = position === Position$1.RightBottom,\n            _b[theme.prefixClass + \"-arrow-bl\"] = position === Position$1.BottomLeft,\n            _b[theme.prefixClass + \"-arrow-bc\"] = position === Position$1.BottomCenter,\n            _b[theme.prefixClass + \"-arrow-br\"] = position === Position$1.BottomRight,\n            _b[theme.prefixClass + \"-arrow-lt\"] = position === Position$1.LeftTop,\n            _b[theme.prefixClass + \"-arrow-lc\"] = position === Position$1.LeftCenter,\n            _b[theme.prefixClass + \"-arrow-lb\"] = position === Position$1.LeftBottom,\n            _b[\"\" + customClassName] = customClassName !== '',\n            _b)) }));\n};\n\nvar PopoverBody = function (_a) {\n    var children = _a.children, closeOnEscape = _a.closeOnEscape, offset = _a.offset, position = _a.position, targetRef = _a.targetRef, onToggle = _a.onToggle;\n    var theme = React.useContext(ThemeContext);\n    var contentRef = React.createRef();\n    useKeyUp(27, function () { return closeOnEscape && onToggle(); });\n    usePosition(contentRef, targetRef, position, offset);\n    return (React.createElement(\"div\", { className: theme.prefixClass + \"-popover-body\", ref: contentRef },\n        React.createElement(Arrow, { customClassName: theme.prefixClass + \"-popover-body-arrow\", position: position }),\n        children));\n};\n\nvar PopoverOverlay = function (_a) {\n    var children = _a.children, closeOnClickOutside = _a.closeOnClickOutside, onClose = _a.onClose;\n    var theme = React.useContext(ThemeContext);\n    var onClick = function (e) {\n        if (e.target === e.currentTarget && closeOnClickOutside) {\n            onClose();\n        }\n    };\n    React.useEffect(function () {\n        var originalStyle = window.getComputedStyle(document.body).position;\n        if (closeOnClickOutside) {\n            document.body.style.position = 'relative';\n        }\n        return function () {\n            document.body.style.setProperty('overflow', originalStyle);\n        };\n    }, [closeOnClickOutside]);\n    return (closeOnClickOutside\n        ? (React.createElement(\"div\", { className: theme.prefixClass + \"-popover-overlay\", onClick: onClick }, children))\n        : React.createElement(React.Fragment, null, children));\n};\n\nvar Popover = function (_a) {\n    var closeOnClickOutside = _a.closeOnClickOutside, closeOnEscape = _a.closeOnEscape, content = _a.content, offset = _a.offset, position = _a.position, target = _a.target;\n    var targetRef = React.createRef();\n    var renderTarget = function (toggle, opened) { return (React.createElement(\"div\", { ref: targetRef }, target(toggle, opened))); };\n    var renderContent = function (toggle) { return (React.createElement(PopoverOverlay, { closeOnClickOutside: closeOnClickOutside, onClose: toggle },\n        React.createElement(PopoverBody, { closeOnEscape: closeOnEscape, offset: offset, position: position, targetRef: targetRef, onToggle: toggle }, content(toggle)))); };\n    return (React.createElement(Portal, { content: renderContent, target: renderTarget }));\n};\n\nvar TooltipBody = function (_a) {\n    var children = _a.children, offset = _a.offset, position = _a.position, targetRef = _a.targetRef;\n    var theme = React.useContext(ThemeContext);\n    var contentRef = React.createRef();\n    usePosition(contentRef, targetRef, position, offset);\n    return (React.createElement(\"div\", { className: theme.prefixClass + \"-tooltip-body\", ref: contentRef },\n        React.createElement(Arrow, { customClassName: theme.prefixClass + \"-tooltip-body-arrow\", position: position }),\n        React.createElement(\"div\", { className: theme.prefixClass + \"-tooltip-body-content\" }, children)));\n};\n\nvar Tooltip = function (_a) {\n    var content = _a.content, offset = _a.offset, position = _a.position, target = _a.target;\n    var targetRef = React.createRef();\n    var renderTarget = function (toggle) {\n        var show = function () { toggle(ToggleStatus.Open); };\n        var hide = function () { toggle(ToggleStatus.Close); };\n        return (React.createElement(\"div\", { ref: targetRef, onMouseEnter: show, onMouseLeave: hide }, target));\n    };\n    var renderContent = function () { return (React.createElement(TooltipBody, { offset: offset, position: position, targetRef: targetRef }, content())); };\n    return (React.createElement(Portal, { target: renderTarget, content: renderContent }));\n};\n\nvar ScrollMode;\n(function (ScrollMode) {\n    ScrollMode[\"Horizontal\"] = \"Horizontal\";\n    ScrollMode[\"Vertical\"] = \"Vertical\";\n    ScrollMode[\"Wrapped\"] = \"Wrapped\";\n})(ScrollMode || (ScrollMode = {}));\nvar ScrollMode$1 = ScrollMode;\n\nvar SelectionMode;\n(function (SelectionMode) {\n    SelectionMode[SelectionMode[\"Hand\"] = 0] = \"Hand\";\n    SelectionMode[SelectionMode[\"Text\"] = 1] = \"Text\";\n})(SelectionMode || (SelectionMode = {}));\nvar SelectionMode$1 = SelectionMode;\n\nvar SpecialZoomLevel;\n(function (SpecialZoomLevel) {\n    SpecialZoomLevel[\"ActualSize\"] = \"ActualSize\";\n    SpecialZoomLevel[\"PageFit\"] = \"PageFit\";\n    SpecialZoomLevel[\"PageWidth\"] = \"PageWidth\";\n})(SpecialZoomLevel || (SpecialZoomLevel = {}));\nvar SpecialZoomLevel$1 = SpecialZoomLevel;\n\nvar useDragScroll = function (ref) {\n    var theme = React.useContext(ThemeContext);\n    var _a = React.useState(false), enabled = _a[0], setEnabled = _a[1];\n    var pos = React.useRef({ top: 0, left: 0, x: 0, y: 0 });\n    var onMouseMoveHandler = function (e) {\n        var ele = ref.current;\n        if (!ele) {\n            return;\n        }\n        ele.scrollTop = pos.current.top - (e.clientY - pos.current.y);\n        ele.scrollLeft = pos.current.left - (e.clientX - pos.current.x);\n    };\n    var onMouseUpHandler = function () {\n        var ele = ref.current;\n        if (!ele) {\n            return;\n        }\n        ele.classList.add(theme.prefixClass + \"-grab\");\n        ele.classList.remove(theme.prefixClass + \"-grabbing\");\n        document.removeEventListener('mousemove', onMouseMoveHandler);\n        document.removeEventListener('mouseup', onMouseUpHandler);\n    };\n    var onMouseDownHandler = function (e) {\n        var ele = ref.current;\n        if (!enabled || !ele) {\n            return;\n        }\n        ele.classList.remove(theme.prefixClass + \"-grab\");\n        ele.classList.add(theme.prefixClass + \"-grabbing\");\n        e.preventDefault();\n        e.stopPropagation();\n        pos.current = {\n            left: ele.scrollLeft,\n            top: ele.scrollTop,\n            x: e.clientX,\n            y: e.clientY,\n        };\n        document.addEventListener('mousemove', onMouseMoveHandler);\n        document.addEventListener('mouseup', onMouseUpHandler);\n    };\n    React.useEffect(function () {\n        var ele = ref.current;\n        if (!ele) {\n            return;\n        }\n        enabled\n            ? ele.classList.add(theme.prefixClass + \"-grab\")\n            : ele.classList.remove(theme.prefixClass + \"-grab\");\n        ele.addEventListener('mousedown', onMouseDownHandler);\n        return function () {\n            ele.removeEventListener('mousedown', onMouseDownHandler);\n        };\n    }, [enabled]);\n    return {\n        toggleDragScroll: setEnabled,\n    };\n};\n\nvar useDrop = function (ref, onDrop) {\n    var dragCount = React.useRef(0);\n    var _a = React.useState(false), isDragging = _a[0], setDragging = _a[1];\n    var onDropHandler = function (e) {\n        e.preventDefault();\n        setDragging(false);\n        dragCount.current = 0;\n        if (e.dataTransfer) {\n            onDrop(e.dataTransfer.files);\n        }\n    };\n    var onDragOverHandler = function (e) {\n        e.preventDefault();\n    };\n    var onDragEnterHandler = function (e) {\n        e.preventDefault();\n        dragCount.current += 1;\n        if (dragCount.current <= 1) {\n            setDragging(true);\n        }\n    };\n    var onDragLeaveHandler = function (e) {\n        e.preventDefault();\n        dragCount.current -= 1;\n        if (dragCount.current <= 0) {\n            setDragging(false);\n        }\n    };\n    React.useEffect(function () {\n        var ele = ref.current;\n        if (!ele) {\n            return;\n        }\n        ele.addEventListener('drop', onDropHandler);\n        ele.addEventListener('dragover', onDragOverHandler);\n        ele.addEventListener('dragenter', onDragEnterHandler);\n        ele.addEventListener('dragleave', onDragLeaveHandler);\n        return function () {\n            ele.removeEventListener('drop', onDropHandler);\n            ele.removeEventListener('dragover', onDragOverHandler);\n            ele.removeEventListener('dragenter', onDragEnterHandler);\n            ele.removeEventListener('dragleave', onDragLeaveHandler);\n        };\n    }, [ref.current]);\n    return { isDragging: isDragging };\n};\n\nvar Api;\n(function (Api) {\n    Api[Api[\"ExitFullScreen\"] = 0] = \"ExitFullScreen\";\n    Api[Api[\"FullScreenChange\"] = 1] = \"FullScreenChange\";\n    Api[Api[\"FullScreenElement\"] = 2] = \"FullScreenElement\";\n    Api[Api[\"FullScreenEnabled\"] = 3] = \"FullScreenEnabled\";\n    Api[Api[\"RequestFullScreen\"] = 4] = \"RequestFullScreen\";\n})(Api || (Api = {}));\nvar defaultVendor = {\n    ExitFullScreen: 'exitFullscreen',\n    FullScreenChange: 'fullscreenchange',\n    FullScreenElement: 'fullscreenElement',\n    FullScreenEnabled: 'fullscreenEnabled',\n    RequestFullScreen: 'requestFullscreen',\n};\nvar webkitVendor = {\n    ExitFullScreen: 'webkitExitFullscreen',\n    FullScreenChange: 'webkitfullscreenchange',\n    FullScreenElement: 'webkitFullscreenElement',\n    FullScreenEnabled: 'webkitFullscreenEnabled',\n    RequestFullScreen: 'webkitRequestFullscreen',\n};\nvar msVendor = {\n    ExitFullScreen: 'msExitFullscreen',\n    FullScreenChange: 'MSFullscreenChange',\n    FullScreenElement: 'msFullscreenElement',\n    FullScreenEnabled: 'msFullscreenEnabled',\n    RequestFullScreen: 'msRequestFullscreen',\n};\nvar isBrowser = (typeof window !== 'undefined');\nvar vendor = isBrowser ? ((Api.FullScreenEnabled in document && defaultVendor) ||\n    (webkitVendor.FullScreenEnabled in document && webkitVendor) ||\n    (msVendor.FullScreenEnabled in document && msVendor) ||\n    defaultVendor) : defaultVendor;\nvar addFullScreenChangeListener = function (handler) {\n    if (isBrowser) {\n        document.addEventListener(vendor.FullScreenChange, handler);\n    }\n};\nvar removeFullScreenChangeListener = function (handler) {\n    if (isBrowser) {\n        document.removeEventListener(vendor.FullScreenChange, handler);\n    }\n};\nvar exitFullScreen = function (element) {\n    return isBrowser\n        ? element[vendor.ExitFullScreen]()\n        : Promise.resolve({});\n};\nvar getFullScreenElement = function () {\n    return isBrowser ? document[vendor.FullScreenElement] : null;\n};\nvar requestFullScreen = function (element) {\n    if (isBrowser) {\n        element[vendor.RequestFullScreen]();\n    }\n};\n\nvar useFullScreen = function (ref) {\n    var _a = React.useState(false), isFullScreen = _a[0], setIsFullScreen = _a[1];\n    var closeOtherFullScreen = function () {\n        var ele = getFullScreenElement();\n        return (ele && ele !== ref.current)\n            ? exitFullScreen(ele)\n            : Promise.resolve();\n    };\n    var openFullScreen = function () {\n        closeOtherFullScreen().then(function () {\n            if (ref.current) {\n                requestFullScreen(ref.current);\n            }\n        });\n    };\n    var closeFullScreen = function () {\n        var ele = getFullScreenElement();\n        if (isFullScreen && ele && ele === ref.current) {\n            exitFullScreen(document);\n        }\n    };\n    var onFullScreenChange = function () {\n        var ele = getFullScreenElement();\n        setIsFullScreen(ele === ref.current);\n    };\n    React.useEffect(function () {\n        addFullScreenChangeListener(onFullScreenChange);\n        return function () {\n            removeFullScreenChangeListener(onFullScreenChange);\n        };\n    }, [ref.current]);\n    return {\n        closeFullScreen: closeFullScreen,\n        isFullScreen: isFullScreen,\n        openFullScreen: openFullScreen,\n    };\n};\n\nvar Observer = function (_a) {\n    var children = _a.children, threshold = _a.threshold, onVisibilityChanged = _a.onVisibilityChanged;\n    var containerRef = React.useRef(null);\n    React.useEffect(function () {\n        var io = new IntersectionObserver(function (entries) {\n            entries.forEach(function (entry) {\n                var isVisible = entry.isIntersecting;\n                var ratio = entry.intersectionRatio;\n                onVisibilityChanged({ isVisible: isVisible, ratio: ratio });\n            });\n        }, {\n            threshold: threshold || 0,\n        });\n        var container = containerRef.current;\n        if (!container) {\n            return;\n        }\n        io.observe(container);\n        return function () {\n            io.unobserve(container);\n        };\n    }, []);\n    return (React.createElement(\"div\", { ref: containerRef }, children));\n};\n\nvar parse = function (pageIndex, destArray) {\n    var bottomOffset;\n    var scale;\n    switch (destArray[1].name) {\n        case 'XYZ':\n            bottomOffset = destArray[3];\n            scale = destArray[4];\n            return {\n                bottomOffset: bottomOffset,\n                pageIndex: pageIndex - 1,\n                scaleTo: scale,\n            };\n        case 'Fit':\n            return {\n                bottomOffset: 0,\n                pageIndex: pageIndex - 1,\n                scaleTo: SpecialZoomLevel$1.PageFit,\n            };\n        default:\n            return {\n                bottomOffset: 0,\n                pageIndex: pageIndex - 1,\n                scaleTo: 1,\n            };\n    }\n};\nvar getDestination = function (doc, dest) {\n    return new Promise(function (res) {\n        new Promise(function (resolve) {\n            if (typeof dest === 'string') {\n                doc.getDestination(dest).then(function (destArray) {\n                    resolve(destArray);\n                });\n            }\n            else {\n                resolve(dest);\n            }\n        }).then(function (destArray) {\n            doc.getPageIndex(destArray[0]).then(function (pageIndex) {\n                var target = parse(pageIndex, destArray);\n                res(target);\n            });\n        });\n    });\n};\n\nvar WithScale = function (_a) {\n    var callback = _a.callback, children = _a.children, rotation = _a.rotation, scale = _a.scale;\n    React.useEffect(function () {\n        callback();\n    }, [rotation, scale]);\n    return (React.createElement(React.Fragment, null, children));\n};\n\nvar AnnotationLayer = function (_a) {\n    var doc = _a.doc, page = _a.page, rotation = _a.rotation, scale = _a.scale, onJumpToDest = _a.onJumpToDest;\n    var containerRef = React.createRef();\n    var theme = React.useContext(ThemeContext);\n    var renderAnnotation = function () {\n        var container = containerRef.current;\n        if (container) {\n            container.innerHTML = '';\n        }\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        page.getAnnotations({ intent: 'display' }).then(function (annotations) {\n            if (annotations.length === 0) {\n                return;\n            }\n            var linkService = {\n                getDestinationHash: function (dest) {\n                    return (typeof dest === 'string')\n                        ? \"#\" + escape(dest)\n                        : \"#\" + escape(JSON.stringify(dest));\n                },\n                navigateTo: function (dest) {\n                    getDestination(doc, dest).then(function (target) {\n                        var pageIndex = target.pageIndex, bottomOffset = target.bottomOffset, scaleTo = target.scaleTo;\n                        onJumpToDest(pageIndex + 1, bottomOffset, scaleTo);\n                    });\n                },\n            };\n            var clonedViewPort = viewport.clone({ dontFlip: true });\n            PdfJs.AnnotationLayer.render({\n                annotations: annotations,\n                div: container,\n                linkService: linkService,\n                page: page,\n                viewport: clonedViewPort,\n            });\n        });\n    };\n    return (React.createElement(WithScale, { callback: renderAnnotation, rotation: rotation, scale: scale },\n        React.createElement(\"div\", { className: theme.prefixClass + \"-annotation-layer\", ref: containerRef })));\n};\n\nvar CanvasLayer = function (_a) {\n    var height = _a.height, page = _a.page, rotation = _a.rotation, scale = _a.scale, width = _a.width;\n    var theme = React.useContext(ThemeContext);\n    var canvasRef = React.createRef();\n    var renderTask = React.useRef();\n    var renderCanvas = function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var canvasEle = canvasRef.current;\n        var canvasContext = canvasEle.getContext('2d');\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        renderTask.current = page.render({ canvasContext: canvasContext, viewport: viewport });\n        renderTask.current.promise.then(function () { }, function () { });\n    };\n    return (React.createElement(WithScale, { callback: renderCanvas, rotation: rotation, scale: scale },\n        React.createElement(\"canvas\", { className: theme.prefixClass + \"-canvas-layer\", height: height, ref: canvasRef, width: width })));\n};\n\nvar calculateOffset = function (children, parent) {\n    var top = children.offsetTop;\n    var left = children.offsetLeft;\n    var p = children.parentElement;\n    while (p && p !== parent) {\n        top += p.offsetTop;\n        left += p.offsetLeft;\n        p = p.parentElement;\n    }\n    return {\n        left: left,\n        top: top,\n    };\n};\n\nvar removeNode = function (ele) {\n    var parent = ele.parentNode;\n    if (parent) {\n        parent.removeChild(ele);\n    }\n};\nvar replaceNode = function (replacementNode, node) {\n    removeNode(replacementNode);\n    var parent = node.parentNode;\n    if (parent) {\n        parent.insertBefore(replacementNode, node);\n    }\n    removeNode(node);\n};\nvar unwrap = function (ele) {\n    var parent = ele.parentNode;\n    if (!parent) {\n        return;\n    }\n    var range = document.createRange();\n    range.selectNodeContents(ele);\n    replaceNode(range.extractContents(), ele);\n    parent.normalize();\n};\n\nvar wrap = function (ele, startOffset, endOffset) {\n    var range = new Range();\n    range.setStart(ele, startOffset);\n    range.setEnd(ele, endOffset);\n    var wrapper = document.createElement('span');\n    range.surroundContents(wrapper);\n    return wrapper;\n};\n\nvar TextLayer = function (_a) {\n    var keywordRegexp = _a.keywordRegexp, match = _a.match, page = _a.page, pageIndex = _a.pageIndex, rotation = _a.rotation, scale = _a.scale, onJumpToMatch = _a.onJumpToMatch;\n    var theme = React.useContext(ThemeContext);\n    var containerRef = React.createRef();\n    var renderTask = React.useRef();\n    var isRendered = React.useRef(false);\n    var empty = function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        var spans = containerEle.querySelectorAll(\"span.\" + theme.prefixClass + \"-text\");\n        var numSpans = spans.length;\n        for (var i = 0; i < numSpans; i++) {\n            var span = spans[i];\n            containerEle.removeChild(span);\n        }\n    };\n    var highlight = function (span) {\n        var text = span.textContent;\n        if (!keywordRegexp.source.trim() || !text) {\n            return;\n        }\n        var startOffset = text.search(keywordRegexp);\n        var firstChild = span.firstChild;\n        if (startOffset === -1 || !firstChild) {\n            return;\n        }\n        var endOffset = startOffset + keywordRegexp.source.length;\n        var wrapper = wrap(firstChild, startOffset, endOffset);\n        wrapper.classList.add(theme.prefixClass + \"-text-highlight\");\n    };\n    var unhighlightAll = function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        var highlightNodes = containerEle.querySelectorAll(\"span.\" + theme.prefixClass + \"-text-highlight\");\n        var total = highlightNodes.length;\n        for (var i = 0; i < total; i++) {\n            unwrap(highlightNodes[i]);\n        }\n    };\n    var scrollToMatch = function () {\n        var containerEle = containerRef.current;\n        if (match.pageIndex !== pageIndex || !containerEle) {\n            return;\n        }\n        var spans = containerEle.querySelectorAll(\"span.\" + theme.prefixClass + \"-text-highlight\");\n        if (match.matchIndex < spans.length) {\n            var span = spans[match.matchIndex];\n            var _a = calculateOffset(span, containerEle), top_1 = _a.top, left = _a.left;\n            onJumpToMatch(pageIndex, top_1 / scale, left / scale);\n        }\n    };\n    var renderText = function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        isRendered.current = false;\n        page.getTextContent().then(function (textContent) {\n            empty();\n            renderTask.current = PdfJs.renderTextLayer({\n                container: containerEle,\n                textContent: textContent,\n                viewport: viewport,\n            });\n            renderTask.current.promise.then(function () {\n                isRendered.current = true;\n                var spans = containerEle.childNodes;\n                var numSpans = spans.length;\n                if (keywordRegexp) {\n                    unhighlightAll();\n                }\n                for (var i = 0; i < numSpans; i++) {\n                    var span = spans[i];\n                    span.classList.add(theme.prefixClass + \"-text\");\n                    if (keywordRegexp) {\n                        highlight(span);\n                    }\n                }\n                scrollToMatch();\n            }, function () { });\n        });\n    };\n    React.useEffect(function () {\n        var containerEle = containerRef.current;\n        if (!keywordRegexp || !isRendered.current || !containerEle) {\n            return;\n        }\n        unhighlightAll();\n        if (keywordRegexp.source.trim()) {\n            var spans = containerEle.querySelectorAll(\"span.\" + theme.prefixClass + \"-text\");\n            var numSpans = spans.length;\n            for (var i = 0; i < numSpans; i++) {\n                highlight(spans[i]);\n            }\n        }\n    }, [keywordRegexp, isRendered.current]);\n    React.useEffect(function () {\n        if (isRendered.current) {\n            scrollToMatch();\n        }\n    }, [match]);\n    return (React.createElement(WithScale, { callback: renderText, rotation: rotation, scale: scale },\n        React.createElement(\"div\", { className: theme.prefixClass + \"-text-layer\", ref: containerRef })));\n};\n\nvar PageLayer = function (_a) {\n    var doc = _a.doc, height = _a.height, keywordRegexp = _a.keywordRegexp, match = _a.match, pageIndex = _a.pageIndex, rotation = _a.rotation, scale = _a.scale, width = _a.width, onJumpToDest = _a.onJumpToDest, onPageVisibilityChanged = _a.onPageVisibilityChanged;\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState({\n        isCalculated: false,\n        page: null,\n        pageHeight: height,\n        pageWidth: width,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    var isCalculated = pageSize.isCalculated, page = pageSize.page, pageHeight = pageSize.pageHeight, pageWidth = pageSize.pageWidth;\n    var intersectionThreshold = Array(10).fill(null).map(function (_, i) { return i / 10; });\n    var scaledWidth = pageWidth * scale;\n    var scaledHeight = pageHeight * scale;\n    var isVertical = Math.abs(rotation) % 180 === 0;\n    var w = isVertical ? scaledWidth : scaledHeight;\n    var h = isVertical ? scaledHeight : scaledWidth;\n    var visibilityChanged = function (params) {\n        var ratio = params.isVisible ? params.ratio : 0;\n        onPageVisibilityChanged(pageIndex, ratio);\n        if (params.isVisible && !isCalculated) {\n            doc.getPage(pageIndex + 1).then(function (pdfPage) {\n                var viewport = pdfPage.getViewport({ scale: 1 });\n                setPageSize({\n                    isCalculated: true,\n                    page: pdfPage,\n                    pageHeight: viewport.height,\n                    pageWidth: viewport.width,\n                });\n            });\n        }\n    };\n    var jumpToMatch = function (indexOfPage, top, left) {\n        onJumpToDest(indexOfPage, pageHeight - top, scale);\n    };\n    return (React.createElement(Observer, { onVisibilityChanged: visibilityChanged, threshold: intersectionThreshold },\n        React.createElement(\"div\", { className: theme.prefixClass + \"-page-layer\", style: {\n                height: h + \"px\",\n                width: w + \"px\",\n            } }, !page\n            ? React.createElement(Spinner, null)\n            : (React.createElement(React.Fragment, null,\n                React.createElement(CanvasLayer, { height: h, page: page, rotation: rotation, scale: scale, width: w }),\n                React.createElement(TextLayer, { keywordRegexp: keywordRegexp, match: match, page: page, pageIndex: pageIndex, rotation: rotation, scale: scale, onJumpToMatch: jumpToMatch }),\n                React.createElement(AnnotationLayer, { doc: doc, page: page, rotation: rotation, scale: scale, onJumpToDest: onJumpToDest }))))));\n};\n\nvar LocalizationContext = React.createContext({});\n\nvar DropArea = function () {\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    return (React.createElement(\"div\", { className: theme.prefixClass + \"-drop-area\" }, l10n.main.dragDropFile));\n};\n\nvar PrintProgress = function (_a) {\n    var numLoadedPages = _a.numLoadedPages, numPages = _a.numPages, onCancel = _a.onCancel, onStartPrinting = _a.onStartPrinting;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var progress = Math.floor(numLoadedPages * 100 / numPages);\n    React.useEffect(function () {\n        if (numLoadedPages === numPages) {\n            onStartPrinting();\n        }\n    }, [numLoadedPages]);\n    return (React.createElement(\"div\", { className: theme.prefixClass + \"-print-progress\" },\n        React.createElement(\"div\", { className: theme.prefixClass + \"-print-progress-inner\" },\n            React.createElement(\"div\", { className: theme.prefixClass + \"-print-progress-message\" }, l10n.printProgress.preparingDocument),\n            React.createElement(\"div\", { className: theme.prefixClass + \"-print-progress-bar\" },\n                React.createElement(ProgressBar, { progress: progress })),\n            React.createElement(PrimaryButton, { onClick: onCancel }, l10n.printProgress.cancel))));\n};\n\nvar PrintStatus;\n(function (PrintStatus) {\n    PrintStatus[\"Inactive\"] = \"Inactive\";\n    PrintStatus[\"Preparing\"] = \"Preparing\";\n    PrintStatus[\"Cancelled\"] = \"Cancelled\";\n    PrintStatus[\"Ready\"] = \"Ready\";\n})(PrintStatus || (PrintStatus = {}));\nvar PrintStatus$1 = PrintStatus;\n\nvar PageThumbnail = function (_a) {\n    var page = _a.page, pageHeight = _a.pageHeight, pageWidth = _a.pageWidth, rotation = _a.rotation, onLoad = _a.onLoad;\n    var theme = React.useContext(ThemeContext);\n    var renderTask = React.useRef();\n    var _b = React.useState(''), src = _b[0], setSrc = _b[1];\n    React.useEffect(function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var canvas = document.createElement('canvas');\n        var printUnit = 150 / 72;\n        canvas.height = Math.floor(pageHeight * printUnit);\n        canvas.width = Math.floor(pageWidth * printUnit);\n        var canvasContext = canvas.getContext('2d');\n        canvasContext.save();\n        canvasContext.fillStyle = 'rgb(255, 255, 255)';\n        canvasContext.fillRect(0, 0, canvas.width, canvas.height);\n        canvasContext.restore();\n        var viewport = page.getViewport({ rotation: rotation, scale: 1 });\n        renderTask.current = page.render({\n            canvasContext: canvasContext,\n            intent: 'print',\n            transform: [printUnit, 0, 0, printUnit, 0, 0],\n            viewport: viewport,\n        });\n        renderTask.current.promise.then(function () {\n            ('toBlob' in canvas)\n                ? canvas.toBlob(function (blob) {\n                    setSrc(URL.createObjectURL(blob));\n                })\n                : setSrc(canvas.toDataURL());\n        }, function () { });\n    }, []);\n    return (!src\n        ? React.createElement(Spinner, null)\n        : (React.createElement(\"div\", { className: theme.prefixClass + \"-print-page-thumbnail\", style: {\n                height: Math.floor(pageHeight * 96 / 72) + \"px\",\n                width: Math.floor(pageWidth * 96 / 72) + \"px\",\n            } },\n            React.createElement(\"img\", { src: src, style: {\n                    height: Math.floor(pageHeight * 96 / 72) + \"px\",\n                    width: Math.floor(pageWidth * 96 / 72) + \"px\",\n                }, onLoad: onLoad }))));\n};\n\nvar PageThumbnailContainer = function (_a) {\n    var doc = _a.doc, pageHeight = _a.pageHeight, pageIndex = _a.pageIndex, pageWidth = _a.pageWidth, rotation = _a.rotation, onLoad = _a.onLoad;\n    var _b = React.useState({\n        height: pageHeight,\n        page: null,\n        width: pageWidth,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    var page = pageSize.page, height = pageSize.height, width = pageSize.width;\n    var isVertical = Math.abs(rotation) % 180 === 0;\n    React.useEffect(function () {\n        doc.getPage(pageIndex + 1).then(function (pdfPage) {\n            var viewport = pdfPage.getViewport({ scale: 1 });\n            setPageSize({\n                height: viewport.height,\n                page: pdfPage,\n                width: viewport.width,\n            });\n        });\n    }, []);\n    return (!page\n        ? React.createElement(Spinner, null)\n        : (React.createElement(PageThumbnail, { page: page, pageHeight: isVertical ? height : width, pageWidth: isVertical ? width : height, rotation: rotation, onLoad: onLoad })));\n};\n\nvar PrintZone = function (_a) {\n    var doc = _a.doc, pageHeight = _a.pageHeight, pageWidth = _a.pageWidth, printStatus = _a.printStatus, rotation = _a.rotation, onCancel = _a.onCancel, onLoad = _a.onLoad;\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState(0), numLoadedPages = _b[0], setNumLoadedPages = _b[1];\n    React.useEffect(function () {\n        if (printStatus === PrintStatus$1.Ready) {\n            document.body.classList.add(theme.prefixClass + \"-body-printing\");\n            window.print();\n        }\n        var handler = function () {\n            if (printStatus === PrintStatus$1.Ready) {\n                document.body.classList.remove(theme.prefixClass + \"-body-printing\");\n                onCancel();\n            }\n        };\n        document.addEventListener('mousemove', handler);\n        return function () { return document.removeEventListener('mousemove', handler); };\n    }, [printStatus]);\n    var numPages = doc.numPages;\n    var loadPage = function () {\n        var total = numLoadedPages + 1;\n        setNumLoadedPages(total);\n        onLoad(total);\n    };\n    return (ReactDOM.createPortal((React.createElement(React.Fragment, null,\n        React.createElement(\"div\", { className: theme.prefixClass + \"-print-zone\" }, Array(numPages).fill(0).map(function (_, index) {\n            return (React.createElement(PageThumbnailContainer, { key: index, doc: doc, pageHeight: pageHeight, pageIndex: index, pageWidth: pageWidth, rotation: rotation, onLoad: loadPage }));\n        })),\n        React.createElement(\"style\", { dangerouslySetInnerHTML: {\n                __html: \"\\n                            @supports ((size:A4) and (size:1pt 1pt)) {\\n                                @page { size: \" + pageWidth + \"pt \" + pageHeight + \"pt }\\n                            }\\n                        \"\n            } }))), document.body));\n};\n\nvar PrintContainer = function (_a) {\n    var doc = _a.doc, pageHeight = _a.pageHeight, pageWidth = _a.pageWidth, printStatus = _a.printStatus, rotation = _a.rotation, onCancel = _a.onCancel, onStartPrinting = _a.onStartPrinting;\n    var _b = React.useState(0), numLoadedPagesForPrint = _b[0], setNumLoadedPagesForPrint = _b[1];\n    var cancelPrinting = function () {\n        setNumLoadedPagesForPrint(0);\n        onCancel();\n    };\n    var startPrinting = function () {\n        setNumLoadedPagesForPrint(0);\n        onStartPrinting();\n    };\n    return (React.createElement(React.Fragment, null,\n        printStatus === PrintStatus$1.Preparing && (React.createElement(PrintProgress, { numLoadedPages: numLoadedPagesForPrint, numPages: doc.numPages, onCancel: cancelPrinting, onStartPrinting: startPrinting })),\n        (printStatus === PrintStatus$1.Preparing || printStatus === PrintStatus$1.Ready) && (React.createElement(PrintZone, { doc: doc, pageHeight: pageHeight, pageWidth: pageWidth, printStatus: printStatus, rotation: rotation, onCancel: cancelPrinting, onLoad: setNumLoadedPagesForPrint }))));\n};\n\nvar fileName = function (url) {\n    var str = url.split('/').pop();\n    return str ? str.split('#')[0].split('?')[0] : url;\n};\n\nvar downloadFile = function (url, data) {\n    var blobUrl = (typeof data === 'string')\n        ? ''\n        : URL.createObjectURL(new Blob([data], { type: '' }));\n    var link = document.createElement('a');\n    link.style.display = 'none';\n    link.href = blobUrl || url;\n    link.setAttribute('download', fileName(url));\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    if (blobUrl) {\n        URL.revokeObjectURL(blobUrl);\n    }\n};\n\nvar getFileExt = function (url) {\n    var str = url.split(/\\./).pop();\n    return str ? str.toLowerCase() : '';\n};\n\nvar ExitFullScreenIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M10.515,9.514h3c0.552,0,1,0.448,1,1v3c0,0.552-0.448,1-1,1h-3c-0.552,0-1-0.448-1-1v-3\\n                C9.515,9.962,9.963,9.514,10.515,9.514z\\n                M0.531,23.499l6.984-6.985\\n                M16.515,7.514L23.5,0.529\\n                M21.515,7.514h-5v-5\\n                M7.515,21.514v-5 h-5\\n                M0.523,0.521l6.992,6.993\\n                M16.515,16.514l6.985,6.985\\n                M16.515,21.514v-5h5\\n                M2.515,7.514h5v-5\" })));\n};\n\nvar ExitFullScreen = function (_a) {\n    var onClick = _a.onClick;\n    var theme = React.useContext(ThemeContext);\n    return (React.createElement(\"div\", { className: theme.prefixClass + \"-exit-fullscreen\" },\n        React.createElement(\"div\", { className: theme.prefixClass + \"-exit-fullscreen-inner\" },\n            React.createElement(Button, { onClick: onClick },\n                React.createElement(ExitFullScreenIcon, null)))));\n};\n\nvar AttachmentList = function (_a) {\n    var files = _a.files;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var renderItem = function (file) {\n        var onClick = function () { return downloadFile(file.fileName, file.data); };\n        return (React.createElement(\"li\", { className: theme.prefixClass + \"-attachment-item\", key: \"attachment-\" + file.fileName, title: \"\" + l10n.attachment.clickToDownload, onClick: onClick }, file.fileName));\n    };\n    return (files.length === 0\n        ? React.createElement(\"div\", { className: theme.prefixClass + \"-attachment-list-empty\" }, l10n.attachment.noAttachment)\n        : (React.createElement(\"ul\", { className: theme.prefixClass + \"-attachment-list\" }, files.map(renderItem))));\n};\n\nvar AttachmentLoader = function (_a) {\n    var doc = _a.doc;\n    var _b = React.useState({\n        files: [],\n        isLoaded: false,\n    }), attachments = _b[0], setAttachments = _b[1];\n    React.useEffect(function () {\n        doc.getAttachments().then(function (response) {\n            var files = response\n                ? Object.keys(response).map(function (file) {\n                    return {\n                        data: response[file].content,\n                        fileName: response[file].filename,\n                    };\n                })\n                : [];\n            setAttachments({\n                files: files,\n                isLoaded: true,\n            });\n        });\n    }, []);\n    return (!attachments.isLoaded\n        ? React.createElement(Spinner, null)\n        : React.createElement(AttachmentList, { files: attachments.files }));\n};\n\nvar BookmarkItem = function (_a) {\n    var bookmark = _a.bookmark, depth = _a.depth, doc = _a.doc, onClick = _a.onClick, onJumpToDest = _a.onJumpToDest;\n    var theme = React.useContext(ThemeContext);\n    var toggleRef = React.createRef();\n    var subItemRef = React.createRef();\n    var subItemsDisplayed = React.useRef(true);\n    var hasSubItems = bookmark.items && bookmark.items.length > 0;\n    var toggleSubItems = function () {\n        subItemsDisplayed.current = !subItemsDisplayed.current;\n        var subItemsEle = subItemRef.current;\n        var toggleEle = toggleRef.current;\n        if (!subItemsEle || !toggleEle) {\n            return;\n        }\n        subItemsEle.style.display = subItemsDisplayed.current ? 'block' : 'none';\n        toggleEle.classList.toggle(theme.prefixClass + \"-bookmark-toggle-expanded\");\n    };\n    var clickBookmak = function () {\n        if (hasSubItems) {\n            onClick(bookmark.dest);\n        }\n    };\n    var clickItem = function () {\n        if (!hasSubItems) {\n            onClick(bookmark.dest);\n        }\n    };\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"div\", { className: theme.prefixClass + \"-bookmark-item\", style: {\n                paddingLeft: depth * 20 + 4 + \"px\",\n            }, onClick: clickItem },\n            hasSubItems && (React.createElement(\"span\", { ref: toggleRef, className: theme.prefixClass + \"-bookmark-toggle\", onClick: toggleSubItems }, \"\\u25BA\")),\n            React.createElement(\"div\", { className: theme.prefixClass + \"-bookmark-title\", onClick: clickBookmak }, bookmark.title)),\n        hasSubItems && (React.createElement(\"div\", { ref: subItemRef },\n            React.createElement(BookmarkList, { bookmarks: bookmark.items, depth: depth + 1, doc: doc, onJumpToDest: onJumpToDest })))));\n};\n\nvar BookmarkList = function (_a) {\n    var bookmarks = _a.bookmarks, _b = _a.depth, depth = _b === void 0 ? 0 : _b, doc = _a.doc, onJumpToDest = _a.onJumpToDest;\n    var theme = React.useContext(ThemeContext);\n    var jumpToDest = function (dest) {\n        getDestination(doc, dest).then(function (target) {\n            var pageIndex = target.pageIndex, bottomOffset = target.bottomOffset, scaleTo = target.scaleTo;\n            onJumpToDest(pageIndex + 1, bottomOffset, scaleTo);\n        });\n    };\n    return (React.createElement(\"ul\", { className: theme.prefixClass + \"-bookmark-list\" }, bookmarks.map(function (bookmark, index) {\n        return (React.createElement(\"li\", { key: index },\n            React.createElement(BookmarkItem, { bookmark: bookmark, depth: depth, doc: doc, onClick: jumpToDest, onJumpToDest: onJumpToDest })));\n    })));\n};\n\nvar BookmarkLoader = function (_a) {\n    var doc = _a.doc, onJumpToDest = _a.onJumpToDest;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState({\n        isLoaded: false,\n        items: [],\n    }), bookmarks = _b[0], setBookmarks = _b[1];\n    React.useEffect(function () {\n        doc.getOutline().then(function (outline) {\n            setBookmarks({\n                isLoaded: true,\n                items: outline || [],\n            });\n        });\n    }, []);\n    return (!bookmarks.isLoaded\n        ? React.createElement(Spinner, null)\n        : (bookmarks.items.length === 0\n            ? React.createElement(\"div\", { className: theme.prefixClass + \"-bookmark-empty\" }, l10n.bookmark.noBookmark)\n            : (React.createElement(BookmarkList, { bookmarks: bookmarks.items, depth: 0, doc: doc, onJumpToDest: onJumpToDest }))));\n};\n\nvar BookmarkIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M11.5,1.5h11c0.552,0,1,0.448,1,1v20c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h3\\n                M11.5,10.5c0,0.55-0.3,0.661-0.659,0.248L8,7.5l-2.844,3.246c-0.363,0.414-0.659,0.3-0.659-0.247v-9c0-0.552,0.448-1,1-1h5\\n                c0.552,0,1,0.448,1,1L11.5,10.5z\\n                M14.5,6.499h6\\n                M14.5,10.499h6\\n                M3.5,14.499h17\\n                M3.5,18.499h16.497\" })));\n};\n\nvar FileIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M7.618,15.345l8.666-8.666c0.78-0.812,2.071-0.838,2.883-0.058s0.838,2.071,0.058,2.883\\n                c-0.019,0.02-0.038,0.039-0.058,0.058L7.461,21.305c-1.593,1.593-4.175,1.592-5.767,0s-1.592-4.175,0-5.767c0,0,0,0,0,0\\n                L13.928,3.305c2.189-2.19,5.739-2.19,7.929-0.001s2.19,5.739,0,7.929l0,0L13.192,19.9\" })));\n};\n\nvar WrappedScrollingIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M10.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\\n                M23.5,9.5c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V9.5z\\n                M10.5,22.5 c0,0.552-0.448,1-1,1h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z\\n                M23.5,22.5c0,0.552-0.448,1-1,1 h-8c-0.552,0-1-0.448-1-1v-8c0-0.552,0.448-1,1-1h8c0.552,0,1,0.448,1,1V22.5z\" })));\n};\n\nvar ThumbnailItem = function (_a) {\n    var page = _a.page, pageHeight = _a.pageHeight, pageWidth = _a.pageWidth, rotation = _a.rotation, thumbnailHeight = _a.thumbnailHeight, thumbnailWidth = _a.thumbnailWidth;\n    var renderTask = React.useRef();\n    var _b = React.useState(''), src = _b[0], setSrc = _b[1];\n    React.useEffect(function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var canvas = document.createElement('canvas');\n        var canvasContext = canvas.getContext('2d', { alpha: false });\n        var w = thumbnailWidth;\n        var h = w / (pageWidth / pageHeight);\n        var scale = w / pageWidth;\n        canvas.height = h;\n        canvas.width = w;\n        canvas.style.height = h + \"px\";\n        canvas.style.width = w + \"px\";\n        var viewport = page.getViewport({ rotation: rotation, scale: scale });\n        renderTask.current = page.render({ canvasContext: canvasContext, viewport: viewport });\n        renderTask.current.promise.then(function () { return setSrc(canvas.toDataURL()); }, function () { });\n    }, [rotation]);\n    return (!src\n        ? React.createElement(Spinner, null)\n        : React.createElement(\"img\", { src: src, height: thumbnailHeight + \"px\", width: thumbnailWidth + \"px\" }));\n};\n\nvar THUMBNAIL_WIDTH = 100;\nvar ThumbnailContainer = function (_a) {\n    var doc = _a.doc, pageHeight = _a.pageHeight, pageIndex = _a.pageIndex, pageWidth = _a.pageWidth, rotation = _a.rotation;\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState({\n        height: pageHeight,\n        isCalculated: false,\n        page: null,\n        width: pageWidth,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    var isCalculated = pageSize.isCalculated, page = pageSize.page, height = pageSize.height, width = pageSize.width;\n    var scale = width / height;\n    var isVertical = Math.abs(rotation) % 180 === 0;\n    var w = isVertical ? THUMBNAIL_WIDTH : (THUMBNAIL_WIDTH / scale);\n    var h = isVertical ? (THUMBNAIL_WIDTH / scale) : THUMBNAIL_WIDTH;\n    var onVisibilityChanged = function (params) {\n        if (params.isVisible && !isCalculated) {\n            doc.getPage(pageIndex + 1).then(function (pdfPage) {\n                var viewport = pdfPage.getViewport({ scale: 1 });\n                setPageSize({\n                    height: viewport.height,\n                    isCalculated: true,\n                    page: pdfPage,\n                    width: viewport.width,\n                });\n            });\n        }\n    };\n    return (React.createElement(Observer, { onVisibilityChanged: onVisibilityChanged },\n        React.createElement(\"div\", { className: theme.prefixClass + \"-thumbnail-container\", style: {\n                height: h + \"px\",\n                width: w + \"px\",\n            } }, !page\n            ? React.createElement(Spinner, null)\n            : (React.createElement(ThumbnailItem, { page: page, pageHeight: isVertical ? height : width, pageWidth: isVertical ? width : height, rotation: rotation, thumbnailHeight: h, thumbnailWidth: w })))));\n};\n\nvar ThumbnailList = function (_a) {\n    var currentPage = _a.currentPage, doc = _a.doc, pageHeight = _a.pageHeight, pageWidth = _a.pageWidth, rotation = _a.rotation, onJumpToPage = _a.onJumpToPage;\n    var theme = React.useContext(ThemeContext);\n    var numPages = doc.numPages;\n    return (React.createElement(React.Fragment, null, Array(numPages).fill(0).map(function (_, index) {\n        var _a;\n        var onClick = function () { return onJumpToPage(index); };\n        return (React.createElement(\"div\", { key: \"thumbnail-\" + index },\n            React.createElement(\"div\", { className: classNames((_a = {},\n                    _a[theme.prefixClass + \"-thumbnail\"] = true,\n                    _a[theme.prefixClass + \"-thumbnail-selected\"] = currentPage === index,\n                    _a)), onClick: onClick },\n                React.createElement(ThumbnailContainer, { doc: doc, pageHeight: pageHeight, pageIndex: index, pageWidth: pageWidth, rotation: rotation }))));\n    })));\n};\n\nvar Tab;\n(function (Tab) {\n    Tab[\"Attachment\"] = \"Attachment\";\n    Tab[\"Bookmark\"] = \"Bookmark\";\n    Tab[\"Thumbnail\"] = \"Thumbnail\";\n})(Tab || (Tab = {}));\nvar TOOLTIP_OFFSET = { left: 0, top: 8 };\nvar Sidebar = function (_a) {\n    var _b;\n    var currentPage = _a.currentPage, doc = _a.doc, height = _a.height, rotation = _a.rotation, width = _a.width, onJumpToDest = _a.onJumpToDest, onJumpToPage = _a.onJumpToPage;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var _c = React.useState(Tab.Thumbnail), tab = _c[0], setTab = _c[1];\n    var clickThumbnailTab = function () { return setTab(Tab.Thumbnail); };\n    var clickBookmarkTab = function () { return setTab(Tab.Bookmark); };\n    var clickAttachmentTab = function () { return setTab(Tab.Attachment); };\n    var renderAttachmentTip = function () { return l10n.sidebar.attachment; };\n    var renderBookmarkTip = function () { return l10n.sidebar.bookmark; };\n    var renderThumbnailTip = function () { return l10n.sidebar.thumbnail; };\n    return (React.createElement(\"div\", { className: theme.prefixClass + \"-sidebar\" },\n        React.createElement(\"div\", { className: theme.prefixClass + \"-sidebar-tabs\" },\n            React.createElement(\"div\", { className: theme.prefixClass + \"-sidebar-tab\" },\n                React.createElement(Tooltip, { position: Position$1.BottomCenter, target: (React.createElement(Button, { onClick: clickThumbnailTab, isSelected: tab === Tab.Thumbnail },\n                        React.createElement(WrappedScrollingIcon, null))), content: renderThumbnailTip, offset: TOOLTIP_OFFSET })),\n            React.createElement(\"div\", { className: theme.prefixClass + \"-sidebar-tab\" },\n                React.createElement(Tooltip, { position: Position$1.BottomCenter, target: (React.createElement(Button, { onClick: clickBookmarkTab, isSelected: tab === Tab.Bookmark },\n                        React.createElement(BookmarkIcon, null))), content: renderBookmarkTip, offset: TOOLTIP_OFFSET })),\n            React.createElement(\"div\", { className: theme.prefixClass + \"-sidebar-tab\" },\n                React.createElement(Tooltip, { position: Position$1.BottomCenter, target: (React.createElement(Button, { onClick: clickAttachmentTab, isSelected: tab === Tab.Attachment },\n                        React.createElement(FileIcon, null))), content: renderAttachmentTip, offset: TOOLTIP_OFFSET }))),\n        React.createElement(\"div\", { className: classNames((_b = {},\n                _b[theme.prefixClass + \"-sidebar-content\"] = true,\n                _b[theme.prefixClass + \"-sidebar-thumbnails\"] = tab === Tab.Thumbnail,\n                _b)) },\n            tab === Tab.Thumbnail && (React.createElement(ThumbnailList, { currentPage: currentPage, doc: doc, pageHeight: height, pageWidth: width, rotation: rotation, onJumpToPage: onJumpToPage })),\n            tab === Tab.Bookmark && React.createElement(BookmarkLoader, { doc: doc, onJumpToDest: onJumpToDest }),\n            tab === Tab.Attachment && React.createElement(AttachmentLoader, { doc: doc }))));\n};\n\nvar DownArrowIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M2.32,2.966h19.452c0.552,0.001,1,0.449,0.999,1.001c0,0.182-0.05,0.36-0.144,0.516L12.9,20.552\\n                c-0.286,0.472-0.901,0.624-1.373,0.338c-0.138-0.084-0.254-0.2-0.338-0.338L1.465,4.483C1.179,4.01,1.331,3.396,1.804,3.11\\n                C1.96,3.016,2.138,2.966,2.32,2.966z\" })));\n};\n\nvar DownloadIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M17.5,11.5c3.314,0,6,2.686,6,6s-2.686,6-6,6s-6-2.686-6-6S14.186,11.5,17.5,11.5z\\n                M17.5,14.5v6\\n                M17.5,20.5\\n                l-2.25-2.25\\n                M17.5,20.5l2.25-2.25\\n                M10.5,23.5h-9c-0.552,0-1-0.448-1-1v-21c0-0.552,0.448-1,1-1h13.293\\n                c0.265,0,0.52,0.105,0.707,0.293L19.207,4.5C19.395,4.687,19.5,4.942,19.5,5.207V8.5\" })));\n};\n\nvar FullScreenIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M15.5,8.499l8-8\\n                M0.5,23.499l8-8\\n                M5.5,23.499h-5v-5\\n                M23.5,5.499v-5h-5\\n                M15.5,15.499l8,8\\n                M0.5,0.499l8,8\\n                M0.5,5.499v-5h5\\n                M18.5,23.499h5v-5\" })));\n};\n\nvar HandToolIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M11.5,5.5v-2C11.5,2.672,12.172,2,13,2s1.5,0.672,1.5,1.5v2 M14.5,11.5v-6C14.5,4.672,15.172,4,16,4\\n                c0.828,0,1.5,0.672,1.5,1.5v3 M17.5,13V8.5C17.5,7.672,18.172,7,19,7s1.5,0.672,1.5,1.5v10c0,2.761-2.239,5-5,5h-3.335\\n                c-1.712-0.001-3.305-0.876-4.223-2.321C6.22,18.467,4.083,14,4.083,14c-0.378-0.545-0.242-1.292,0.303-1.67\\n                c0.446-0.309,1.044-0.281,1.458,0.07L8.5,15.5v-10C8.5,4.672,9.172,4,10,4s1.5,0.672,1.5,1.5v6\" })));\n};\n\nvar HorizontalScrollingIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M6.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z\\n                M14.5,21.5c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z\\n                M22.5,21.5 c0,0.552-0.448,1-1,1h-4c-0.552,0-1-0.448-1-1v-20c0-0.552,0.448-1,1-1h4c0.552,0,1,0.448,1,1V21.5z\" })));\n};\n\nvar InfoIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M12,1.001c6.075,0,11,4.925,11,11s-4.925,11-11,11s-11-4.925-11-11S5.925,1.001,12,1.001z\\n                M14.5,17.005H13\\n                c-0.552,0-1-0.448-1-1v-6.5c0-0.276-0.224-0.5-0.5-0.5H10\\n                M11.745,6.504L11.745,6.504\\n                M11.745,6.5c-0.138,0-0.25,0.112-0.25,0.25\\n                S11.607,7,11.745,7s0.25-0.112,0.25-0.25S11.883,6.5,11.745,6.5\" })));\n};\n\nvar LeftSidebarIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M1.5,0.497h20c0.552,0,1,0.448,1,1v20c0,0.552-0.448,1-1,1h-20c-0.552,0-1-0.448-1-1v-20\\n                C0.5,0.945,0.948,0.497,1.5,0.497z\\n                M7.5,0.497v22\" })));\n};\n\nvar NextIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M0.541,5.627L11.666,18.2c0.183,0.207,0.499,0.226,0.706,0.043c0.015-0.014,0.03-0.028,0.043-0.043\\n                L23.541,5.627\" })));\n};\n\nvar PreviousIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M23.535,18.373L12.409,5.8c-0.183-0.207-0.499-0.226-0.706-0.043C11.688,5.77,11.674,5.785,11.66,5.8\\n                L0.535,18.373\" })));\n};\n\nvar PrintIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M7.5,19.499h9 M7.5,16.499h9 M5.5,16.5h-3c-1.103-0.003-1.997-0.897-2-2v-6c0.003-1.103,0.897-1.997,2-2h19\\n                c1.103,0.003,1.997,0.897,2,2v6c-0.003,1.103-0.897,1.997-2,2h-3\\n                M5.5,4.5v-4h9.586c0.265,0,0.52,0.105,0.707,0.293l2.414,2.414\\n                C18.395,3.394,18.5,3.649,18.5,3.914V4.5\\n                M18.5,22.5c0,0.552-0.448,1-1,1h-11c-0.552,0-1-0.448-1-1v-9h13V22.5z\\n                M3.5,8.499\\n                c0.552,0,1,0.448,1,1s-0.448,1-1,1s-1-0.448-1-1S2.948,8.499,3.5,8.499z\\n                M14.5,0.499v4h4\" })));\n};\n\nvar RotateBackwardIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M3.434,10.537c0.141-0.438,0.316-0.864,0.523-1.274\\n                M3.069,14.425C3.023,14.053,3,13.679,3,13.305 c0-0.291,0.014-0.579,0.041-0.863\\n                M4.389,18.111c-0.341-0.539-0.623-1.112-0.843-1.711\\n                M7.163,20.9 c-0.543-0.345-1.048-0.747-1.506-1.2\\n                M10.98,22.248c-0.65-0.074-1.29-0.218-1.909-0.431\\n                M10,4.25h2 c4.987,0.015,9.017,4.069,9.003,9.055c-0.013,4.581-3.456,8.426-8.008,8.945\\n                M13.5,1.75L10,4.25l3.5,2.5\" })));\n};\n\nvar RotateForwardIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M20.566,10.537c-0.141-0.438-0.316-0.864-0.523-1.274\\n                M20.931,14.425C20.977,14.053,21,13.679,21,13.305 c0-0.291-0.014-0.579-0.041-0.863\\n                M19.611,18.111c0.341-0.539,0.624-1.114,0.843-1.713\\n                M16.837,20.9 c0.543-0.345,1.048-0.747,1.506-1.2\\n                M13.02,22.248c0.65-0.074,1.29-0.218,1.909-0.431\\n                M14,4.25h-2 c-4.987,0.015-9.017,4.069-9.003,9.055c0.013,4.581,3.456,8.426,8.008,8.945\\n                M10.5,1.75l3.5,2.5l-3.5,2.5\" })));\n};\n\nvar TextSelectionIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M13.675,11.671l2.941-2.941c0.195-0.196,0.195-0.512-0.001-0.707C16.563,7.971,16.5,7.931,16.43,7.906\\n                L4.168,3.527C3.908,3.434,3.622,3.57,3.529,3.83c-0.039,0.109-0.039,0.228,0,0.336l4.379,12.262\\n                c0.093,0.26,0.379,0.396,0.639,0.303c0.07-0.025,0.133-0.065,0.185-0.117l2.943-2.943l6.146,6.146c0.195,0.195,0.512,0.195,0.707,0\\n                l1.293-1.293c0.195-0.195,0.195-0.512,0-0.707L13.675,11.671z\" })));\n};\n\nvar UpArrowIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M21.783,21.034H2.332c-0.552,0-1-0.448-1-1c0-0.182,0.05-0.361,0.144-0.517L11.2,3.448\\n                c0.286-0.472,0.901-0.624,1.373-0.338c0.138,0.084,0.254,0.2,0.338,0.338l9.726,16.069c0.286,0.473,0.134,1.087-0.339,1.373\\n                C22.143,20.984,21.965,21.034,21.783,21.034z\" })));\n};\n\nvar VerticalScrollingIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M23.5,5.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V5.5z\\n                M23.5,13.5c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V13.5z\\n                M23.5,21.5 c0,0.552-0.448,1-1,1h-21c-0.552,0-1-0.448-1-1v-3c0-0.552,0.448-1,1-1h21c0.552,0,1,0.448,1,1V21.5z\" })));\n};\n\nvar ZoomInIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z\\n                M23.5,23.499\\n                l-5.929-5.929\\n                M5.5,10.499h10\\n                M10.5,5.499v10\" })));\n};\n\nvar ZoomOutIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z\\n                M23.5,23.499\\n                l-5.929-5.929\\n                M5.5,10.499h10\" })));\n};\n\nvar OpenFileIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M4.5,8.5H14\\n                M4.5,11.5h6\\n                M4.5,5.5h7\\n                M4.5,14.5h4\\n                M4.5,17.5h4\\n                M10.5,23.5h-9c-0.552,0-1-0.448-1-1v-21\\n                c0-0.552,0.448-1,1-1h13.293c0.265,0,0.52,0.105,0.707,0.293L19.207,4.5C19.395,4.687,19.5,4.942,19.5,5.207V8.5\\n                M17.5,11.5\\n                c3.314,0,6,2.686,6,6s-2.686,6-6,6s-6-2.686-6-6S14.186,11.5,17.5,11.5z\\n                M17.5,20.5v-6\\n                M17.5,14.5l-2.25,2.25\\n                M17.5,14.5l2.25,2.25\" })));\n};\n\nvar TOOLTIP_OFFSET$1 = { left: 0, top: 8 };\nvar OpenFileButton = function (_a) {\n    var onOpenFiles = _a.onOpenFiles;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var openFiles = function (e) {\n        var files = e.target.files;\n        if (files) {\n            onOpenFiles(files);\n        }\n    };\n    var renderContent = function () { return l10n.toolbar.openFile; };\n    return (React.createElement(Tooltip, { position: Position$1.BottomCenter, target: (React.createElement(\"div\", { className: theme.prefixClass + \"-open-file\" },\n            React.createElement(\"input\", { className: theme.prefixClass + \"-open-file-input\", multiple: false, type: 'file', title: '', onChange: openFiles }),\n            React.createElement(OpenFileIcon, null))), content: renderContent, offset: TOOLTIP_OFFSET$1 }));\n};\n\nvar dateRegex = new RegExp('^D:' +\n    '(\\\\d{4})' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '(\\\\d{2})?' +\n    '([Z|+|-])?' +\n    '(\\\\d{2})?' +\n    '\\'?' +\n    '(\\\\d{2})?' +\n    '\\'?');\nvar parse$1 = function (value, min, max, defaultValue) {\n    var parsed = parseInt(value, 10);\n    return (parsed >= min && parsed <= max) ? parsed : defaultValue;\n};\nvar convertDate = function (input) {\n    var matches = dateRegex.exec(input);\n    if (!matches) {\n        return null;\n    }\n    var year = parseInt(matches[1], 10);\n    var month = parse$1(matches[2], 1, 12, 1) - 1;\n    var day = parse$1(matches[3], 1, 31, 1);\n    var hour = parse$1(matches[4], 0, 23, 0);\n    var minute = parse$1(matches[5], 0, 59, 0);\n    var second = parse$1(matches[6], 0, 59, 0);\n    var universalTimeRelation = matches[7] || 'Z';\n    var offsetHour = parse$1(matches[8], 0, 23, 0);\n    var offsetMinute = parse$1(matches[9], 0, 59, 0);\n    switch (universalTimeRelation) {\n        case '-':\n            hour += offsetHour;\n            minute += offsetMinute;\n            break;\n        case '+':\n            hour -= offsetHour;\n            minute -= offsetMinute;\n            break;\n    }\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n};\n\nvar fileSize = function (bytes) {\n    var sufixes = ['B', 'kB', 'MB', 'GB', 'TB'];\n    var i = Math.floor(Math.log(bytes) / Math.log(1024));\n    return (bytes / Math.pow(1024, i)).toFixed(2) + \" \" + sufixes[i];\n};\n\nvar PropertiesLoader = function (_a) {\n    var doc = _a.doc, render = _a.render;\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState(), data = _b[0], setData = _b[1];\n    React.useEffect(function () {\n        doc.getMetadata().then(function (meta) {\n            return Promise.resolve(meta);\n        }).then(function (meta) {\n            return doc.getDownloadInfo().then(function (d) {\n                return Promise.resolve({\n                    fileName: meta.contentDispositionFilename || '',\n                    info: meta.info,\n                    length: d.length,\n                });\n            });\n        }).then(function (response) {\n            setData(response);\n        });\n    }, []);\n    return (data ? render(data) : React.createElement(\"div\", { className: theme.prefixClass + \"-properties-loader\" },\n        React.createElement(Spinner, null)));\n};\n\nvar PropertyItem = function (_a) {\n    var label = _a.label, value = _a.value;\n    var theme = React.useContext(ThemeContext);\n    return (React.createElement(\"dl\", { className: theme.prefixClass + \"-property-item\" },\n        React.createElement(\"dt\", { className: theme.prefixClass + \"-property-item-label\" },\n            label,\n            \":\"),\n        React.createElement(\"dd\", { className: theme.prefixClass + \"-property-item-value\" }, value || '-')));\n};\n\nvar PropertiesModal = function (_a) {\n    var doc = _a.doc, fileName$1 = _a.fileName, onToggle = _a.onToggle;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var formatDate = function (input) {\n        var date = convertDate(input);\n        return date ? date.toLocaleDateString() + \", \" + date.toLocaleTimeString() : '';\n    };\n    var renderData = function (data) { return (React.createElement(React.Fragment, null,\n        React.createElement(\"div\", { className: theme.prefixClass + \"-properties-modal-group\" },\n            React.createElement(PropertyItem, { label: \"\" + l10n.property.fileName, value: data.fileName || fileName(fileName$1) }),\n            React.createElement(PropertyItem, { label: \"\" + l10n.property.fileSize, value: fileSize(data.length) })),\n        React.createElement(Separator, null),\n        React.createElement(\"div\", { className: theme.prefixClass + \"-properties-modal-group\" },\n            React.createElement(PropertyItem, { label: \"\" + l10n.property.title, value: data.info.Title }),\n            React.createElement(PropertyItem, { label: \"\" + l10n.property.author, value: data.info.Author }),\n            React.createElement(PropertyItem, { label: \"\" + l10n.property.subject, value: data.info.Subject }),\n            React.createElement(PropertyItem, { label: \"\" + l10n.property.keywords, value: data.info.Keywords }),\n            React.createElement(PropertyItem, { label: \"\" + l10n.property.creator, value: data.info.Creator }),\n            React.createElement(PropertyItem, { label: \"\" + l10n.property.creationDate, value: formatDate(data.info.CreationDate) }),\n            React.createElement(PropertyItem, { label: \"\" + l10n.property.modificationDate, value: formatDate(data.info.ModDate) })),\n        React.createElement(Separator, null),\n        React.createElement(\"div\", { className: theme.prefixClass + \"-properties-modal-group\" },\n            React.createElement(PropertyItem, { label: \"\" + l10n.property.pdfProducer, value: data.info.Producer }),\n            React.createElement(PropertyItem, { label: \"\" + l10n.property.pdfVersion, value: data.info.PDFFormatVersion }),\n            React.createElement(PropertyItem, { label: \"\" + l10n.property.pageCount, value: \"\" + doc.numPages })))); };\n    return (React.createElement(\"div\", { className: theme.prefixClass + \"-properties-modal\" },\n        React.createElement(PropertiesLoader, { doc: doc, render: renderData }),\n        React.createElement(\"div\", { className: theme.prefixClass + \"-properties-modal-footer\" },\n            React.createElement(PrimaryButton, { onClick: onToggle }, l10n.property.close))));\n};\n\nvar SearchIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M10.5,0.5c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.5,10.5,0.5z\\n                M23.5,23.5\\n                l-5.929-5.929\" })));\n};\n\nvar EMPTY_KEYWORD_REGEXP = new RegExp(' ');\nvar PORTAL_OFFSET = { left: 0, top: 8 };\nvar SearchPopover = function (_a) {\n    var doc = _a.doc, onJumpToMatch = _a.onJumpToMatch, onSearchFor = _a.onSearchFor;\n    var theme = React.useContext(ThemeContext);\n    var numPages = doc.numPages;\n    var indexArr = Array(numPages).fill(0).map(function (_, i) { return i; });\n    var l10n = React.useContext(LocalizationContext);\n    var _b = React.useState(''), keyword = _b[0], setKeyword = _b[1];\n    var _c = React.useState([]), found = _c[0], setFound = _c[1];\n    var _d = React.useState(0), currentMatch = _d[0], setCurrentMatch = _d[1];\n    var _e = React.useState(false), matchCase = _e[0], setMatchCase = _e[1];\n    var _f = React.useState(false), wholeWords = _f[0], setWholeWords = _f[1];\n    var textContents = React.useRef([]);\n    var changeKeyword = function (e) {\n        setKeyword(e.target.value);\n    };\n    var getTextContents = function () {\n        var promises = indexArr.map(function (pageIndex) {\n            return doc.getPage(pageIndex + 1).then(function (page) {\n                return page.getTextContent();\n            }).then(function (content) {\n                var pageContent = content.items.map(function (item) { return item.str || ''; }).join('');\n                return Promise.resolve({\n                    pageContent: pageContent,\n                    pageIndex: pageIndex,\n                });\n            });\n        });\n        return Promise.all(promises).then(function (data) {\n            data.sort(function (a, b) { return a.pageIndex - b.pageIndex; });\n            return Promise.resolve(data.map(function (item) { return item.pageContent; }));\n        });\n    };\n    var buildKeywordRegex = function (keywordParam, matchCaseParam, wholeWordsParam) {\n        var source = wholeWordsParam ? \" \" + keywordParam + \" \" : keywordParam;\n        var flags = matchCaseParam ? 'g' : 'gi';\n        return new RegExp(source, flags);\n    };\n    var search = function (keywordParam, matchCaseParam, wholeWordsParam) {\n        var regexp = buildKeywordRegex(keywordParam, matchCaseParam, wholeWordsParam);\n        onSearchFor(regexp);\n        setCurrentMatch(0);\n        setFound([]);\n        var promise = (textContents.current.length === 0)\n            ? getTextContents().then(function (response) {\n                textContents.current = response;\n                return Promise.resolve(response);\n            })\n            : Promise.resolve(textContents.current);\n        promise.then(function (response) {\n            var arr = [];\n            response.forEach(function (item, pageIndex) {\n                var numMatches = (item.match(regexp) || []).length;\n                for (var matchIndex = 0; matchIndex < numMatches; matchIndex++) {\n                    arr.push({\n                        matchIndex: matchIndex,\n                        pageIndex: pageIndex,\n                    });\n                }\n            });\n            setFound(arr);\n            if (arr.length > 0) {\n                setCurrentMatch(1);\n                onJumpToMatch(arr[0]);\n            }\n        });\n    };\n    var keydownSearch = function (e) {\n        if (e.keyCode !== 13 || !keyword) {\n            return;\n        }\n        search(keyword, matchCase, wholeWords);\n    };\n    var jumpToPreviousMatch = function () {\n        var prev = currentMatch - 1;\n        var updated = prev > 0 ? prev : found.length;\n        setCurrentMatch(updated);\n        onJumpToMatch(found[updated - 1]);\n    };\n    var jumpToNextMatch = function () {\n        var next = currentMatch + 1;\n        var updated = next <= found.length ? next : 1;\n        setCurrentMatch(updated);\n        onJumpToMatch(found[updated - 1]);\n    };\n    var changeMatchCase = function (e) {\n        var isChecked = e.target.checked;\n        setMatchCase(isChecked);\n        if (keyword) {\n            search(keyword, isChecked, wholeWords);\n        }\n    };\n    var changeWholeWords = function (e) {\n        var isChecked = e.target.checked;\n        setWholeWords(isChecked);\n        if (keyword) {\n            search(keyword, matchCase, isChecked);\n        }\n    };\n    var clearKeyword = function () {\n        onSearchFor(EMPTY_KEYWORD_REGEXP);\n        setKeyword('');\n        setCurrentMatch(0);\n        setFound([]);\n        setMatchCase(false);\n        setWholeWords(false);\n    };\n    var renderSearch = function () { return l10n.toolbar.search; };\n    var renderTarget = function (toggle, opened) { return (React.createElement(Tooltip, { position: Position$1.BottomCenter, target: React.createElement(Button, { onClick: toggle, isSelected: opened },\n            React.createElement(SearchIcon, null)), content: renderSearch, offset: PORTAL_OFFSET })); };\n    var renderPreviousMatch = function () { return l10n.search.previousMatch; };\n    var renderNextMatch = function () { return l10n.search.nextMatch; };\n    var renderContent = function (toggle) {\n        var close = function () {\n            toggle();\n            clearKeyword();\n        };\n        return (React.createElement(\"div\", { className: theme.prefixClass + \"-search-popover\" },\n            React.createElement(\"div\", { className: theme.prefixClass + \"-search-popover-input-counter\" },\n                React.createElement(\"input\", { className: theme.prefixClass + \"-search-popover-input\", placeholder: \"\" + l10n.search.enterToSearch, type: \"text\", value: keyword, onChange: changeKeyword, onKeyDown: keydownSearch }),\n                React.createElement(\"div\", { className: theme.prefixClass + \"-search-popover-counter\" },\n                    currentMatch,\n                    \"/\",\n                    found.length)),\n            React.createElement(\"label\", { className: theme.prefixClass + \"-search-popover-label\" },\n                React.createElement(\"input\", { className: theme.prefixClass + \"-search-popover-label-checkbox\", checked: matchCase, type: \"checkbox\", onChange: changeMatchCase }),\n                \" \",\n                l10n.search.matchCase),\n            React.createElement(\"label\", { className: theme.prefixClass + \"-search-popover-label\" },\n                React.createElement(\"input\", { className: theme.prefixClass + \"-search-popover-label-checkbox\", checked: wholeWords, type: \"checkbox\", onChange: changeWholeWords }),\n                \" \",\n                l10n.search.wholeWords),\n            React.createElement(\"div\", { className: theme.prefixClass + \"-search-popover-footer\" },\n                React.createElement(\"div\", { className: theme.prefixClass + \"-search-popover-footer-item\" },\n                    React.createElement(Tooltip, { position: Position$1.BottomCenter, target: React.createElement(Button, { onClick: jumpToPreviousMatch },\n                            React.createElement(PreviousIcon, null)), content: renderPreviousMatch, offset: PORTAL_OFFSET })),\n                React.createElement(\"div\", { className: theme.prefixClass + \"-search-popover-footer-item\" },\n                    React.createElement(Tooltip, { position: Position$1.BottomCenter, target: React.createElement(Button, { onClick: jumpToNextMatch },\n                            React.createElement(NextIcon, null)), content: renderNextMatch, offset: PORTAL_OFFSET })),\n                React.createElement(\"div\", { className: theme.prefixClass + \"-search-popover-footer-button\" },\n                    React.createElement(PrimaryButton, { onClick: close }, l10n.search.close)))));\n    };\n    return (React.createElement(Popover, { position: Position$1.BottomLeft, target: renderTarget, content: renderContent, offset: PORTAL_OFFSET, closeOnClickOutside: false, closeOnEscape: true }));\n};\n\nvar LEVELS = [\n    0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9,\n    1, 1.1, 1.3, 1.5, 1.7, 1.9,\n    2.1, 2.4, 2.7,\n    3.0, 3.3, 3.7,\n    4.1, 4.6,\n    5.1, 5.7,\n    6.3,\n    7.0, 7.7,\n    8.5,\n    9.4,\n    10,\n];\nvar increase = function (currentLevel) {\n    var found = LEVELS.find(function (item) { return item > currentLevel; });\n    return found || currentLevel;\n};\nvar decrease = function (currentLevel) {\n    var found = LEVELS.findIndex(function (item) { return item >= currentLevel; });\n    return found === -1 || found === 0 ? currentLevel : LEVELS[found - 1];\n};\n\nvar Menu = function (_a) {\n    var children = _a.children;\n    var theme = React.useContext(ThemeContext);\n    return (React.createElement(\"ul\", { className: theme.prefixClass + \"-menu\" }, children));\n};\n\nvar LEVELS$1 = [0.5, 0.75, 1, 1.25, 1.5, 2, 3, 4];\nvar PORTAL_OFFSET$1 = { left: 0, top: 8 };\nvar ZoomPopover = function (_a) {\n    var scale = _a.scale, onZoom = _a.onZoom;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var getSpcialLevelLabel = function (level) {\n        switch (level) {\n            case SpecialZoomLevel$1.ActualSize: return l10n.zoom.actualSize;\n            case SpecialZoomLevel$1.PageFit: return l10n.zoom.pageFit;\n            case SpecialZoomLevel$1.PageWidth: return l10n.zoom.pageWidth;\n        }\n    };\n    var renderTarget = function (toggle) {\n        var click = function () { toggle(); };\n        return (React.createElement(\"span\", { className: theme.prefixClass + \"-zoom-popover-target\", onClick: click },\n            React.createElement(\"span\", { className: theme.prefixClass + \"-zoom-popover-target-scale\" },\n                Math.round(scale * 100),\n                \"%\"),\n            React.createElement(\"span\", { className: theme.prefixClass + \"-zoom-popover-target-arrow\" })));\n    };\n    var renderContent = function (toggle) { return (React.createElement(Menu, null,\n        Object.keys(SpecialZoomLevel$1).map(function (k) {\n            var level = k;\n            var clickMenuItem = function () { toggle(); onZoom(level); };\n            return (React.createElement(MenuItem, { key: level, onClick: clickMenuItem }, getSpcialLevelLabel(level)));\n        }),\n        React.createElement(MenuDivider, null),\n        LEVELS$1.map(function (level) {\n            var clickMenuItem = function () { toggle(); onZoom(level); };\n            return (React.createElement(MenuItem, { key: level, onClick: clickMenuItem }, Math.round(level * 100) + \"%\"));\n        }))); };\n    return (React.createElement(Popover, { position: Position$1.BottomCenter, target: renderTarget, content: renderContent, offset: PORTAL_OFFSET$1, closeOnClickOutside: true, closeOnEscape: true }));\n};\n\nvar MoreIcon = function () {\n    return (React.createElement(Icon, { size: 16 },\n        React.createElement(\"path\", { d: \"M12,0.5c1.381,0,2.5,1.119,2.5,2.5S13.381,5.5,12,5.5S9.5,4.381,9.5,3S10.619,0.5,12,0.5z\\n                M12,9.5\\n                c1.381,0,2.5,1.119,2.5,2.5s-1.119,2.5-2.5,2.5S9.5,13.381,9.5,12S10.619,9.5,12,9.5z\\n                M12,18.5c1.381,0,2.5,1.119,2.5,2.5\\n                s-1.119,2.5-2.5,2.5S9.5,22.381,9.5,21S10.619,18.5,12,18.5z\" })));\n};\n\nvar PORTAL_OFFSET$2 = { left: 0, top: 8 };\nvar MoreActionsPopover = function (_a) {\n    var doc = _a.doc, fileName = _a.fileName, scrollMode = _a.scrollMode, selectionMode = _a.selectionMode, onChangeScrollMode = _a.onChangeScrollMode, onChangeSelectionMode = _a.onChangeSelectionMode, onJumpToFirstPage = _a.onJumpToFirstPage, onJumpToLastPage = _a.onJumpToLastPage, onRotate = _a.onRotate;\n    var l10n = React.useContext(LocalizationContext);\n    var renderMoreActions = function () { return l10n.toolbar.moreActions; };\n    var renderTarget = function (toggle, opened) { return (React.createElement(Tooltip, { position: Position$1.BottomRight, target: React.createElement(Button, { onClick: toggle, isSelected: opened },\n            React.createElement(MoreIcon, null)), content: renderMoreActions, offset: PORTAL_OFFSET$2 })); };\n    var renderPropertyMenu = function (toggle) { return (React.createElement(MenuItem, { icon: React.createElement(InfoIcon, null), onClick: toggle }, l10n.toolbar.documentProperties)); };\n    var renderPropertiesModal = function (toggle) { return (React.createElement(PropertiesModal, { doc: doc, fileName: fileName, onToggle: toggle })); };\n    var renderContent = function (toggle) {\n        var jumpToFirstPage = function () {\n            toggle();\n            onJumpToFirstPage();\n        };\n        var jumpToLastPage = function () {\n            toggle();\n            onJumpToLastPage();\n        };\n        var rotateForward = function () {\n            toggle();\n            onRotate(90);\n        };\n        var rotateBackward = function () {\n            toggle();\n            onRotate(-90);\n        };\n        var activateTextSelectionMode = function () {\n            toggle();\n            onChangeSelectionMode(SelectionMode$1.Text);\n        };\n        var activateHandMode = function () {\n            toggle();\n            onChangeSelectionMode(SelectionMode$1.Hand);\n        };\n        var activateScrollMode = function (mode) {\n            toggle();\n            onChangeScrollMode(mode);\n        };\n        var setVerticalScrollMode = function () { return activateScrollMode(ScrollMode$1.Vertical); };\n        var setHorizontalScrollMode = function () { return activateScrollMode(ScrollMode$1.Horizontal); };\n        var setWrappedScrollMode = function () { return activateScrollMode(ScrollMode$1.Wrapped); };\n        return (React.createElement(Menu, null,\n            React.createElement(MenuItem, { icon: React.createElement(UpArrowIcon, null), onClick: jumpToFirstPage }, l10n.toolbar.goToFirstPage),\n            React.createElement(MenuItem, { icon: React.createElement(DownArrowIcon, null), onClick: jumpToLastPage }, l10n.toolbar.goToLastPage),\n            React.createElement(MenuDivider, null),\n            React.createElement(MenuItem, { icon: React.createElement(RotateForwardIcon, null), onClick: rotateForward }, l10n.toolbar.rotateForward),\n            React.createElement(MenuItem, { icon: React.createElement(RotateBackwardIcon, null), onClick: rotateBackward }, l10n.toolbar.rotateBackward),\n            React.createElement(MenuDivider, null),\n            React.createElement(MenuItem, { checked: selectionMode === SelectionMode$1.Text, icon: React.createElement(TextSelectionIcon, null), onClick: activateTextSelectionMode }, l10n.toolbar.textSelectionTool),\n            React.createElement(MenuItem, { checked: selectionMode === SelectionMode$1.Hand, icon: React.createElement(HandToolIcon, null), onClick: activateHandMode }, l10n.toolbar.handTool),\n            React.createElement(MenuDivider, null),\n            React.createElement(MenuItem, { checked: scrollMode === ScrollMode$1.Vertical, icon: React.createElement(VerticalScrollingIcon, null), onClick: setVerticalScrollMode }, l10n.toolbar.verticalScrolling),\n            React.createElement(MenuItem, { checked: scrollMode === ScrollMode$1.Horizontal, icon: React.createElement(HorizontalScrollingIcon, null), onClick: setHorizontalScrollMode }, l10n.toolbar.horizontalScrolling),\n            React.createElement(MenuItem, { checked: scrollMode === ScrollMode$1.Wrapped, icon: React.createElement(WrappedScrollingIcon, null), onClick: setWrappedScrollMode }, l10n.toolbar.wrappedScrolling),\n            React.createElement(MenuDivider, null),\n            React.createElement(Modal, { target: renderPropertyMenu, content: renderPropertiesModal, closeOnClickOutside: true, closeOnEscape: true })));\n    };\n    return (React.createElement(Popover, { position: Position$1.BottomRight, target: renderTarget, content: renderContent, offset: PORTAL_OFFSET$2, closeOnClickOutside: true, closeOnEscape: true }));\n};\n\nvar TOOLTIP_OFFSET$2 = { left: 0, top: 8 };\nvar Toolbar = function (_a) {\n    var currentPage = _a.currentPage, doc = _a.doc, fileName = _a.fileName, scale = _a.scale, scrollMode = _a.scrollMode, selectionMode = _a.selectionMode, onChangeScrollMode = _a.onChangeScrollMode, onChangeSelectionMode = _a.onChangeSelectionMode, onDownload = _a.onDownload, onFullScreen = _a.onFullScreen, onJumpTo = _a.onJumpTo, onJumpToMatch = _a.onJumpToMatch, onOpenFiles = _a.onOpenFiles, onPrint = _a.onPrint, onRotate = _a.onRotate, onSearchFor = _a.onSearchFor, onToggleSidebar = _a.onToggleSidebar, onZoom = _a.onZoom, renderToolbar = _a.renderToolbar;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState(false), pageTextboxFocused = _b[0], setPageTextboxFocused = _b[1];\n    var _c = React.useState(currentPage), editingPage = _c[0], setEditingPage = _c[1];\n    var _d = React.useState(false), isSidebarOpened = _d[0], setSidebarOpened = _d[1];\n    var numPages = doc.numPages;\n    var zoomOut = function () {\n        var newLevel = decrease(scale);\n        onZoom(newLevel);\n    };\n    var zoomIn = function () {\n        var newLevel = increase(scale);\n        onZoom(newLevel);\n    };\n    var gotoNextPage = function () {\n        var nextPage = currentPage + 1;\n        if (nextPage < numPages) {\n            setEditingPage(nextPage);\n            onJumpTo(nextPage);\n        }\n    };\n    var gotoPreviousPage = function () {\n        var previousPage = currentPage - 1;\n        if (previousPage >= 0) {\n            setEditingPage(previousPage);\n            onJumpTo(previousPage);\n        }\n    };\n    var changePage = function (e) {\n        var newPage = parseInt(e.target.value, 10);\n        if (newPage > 0 && newPage <= numPages) {\n            setEditingPage(newPage - 1);\n        }\n    };\n    var focusPageTextbox = function () {\n        setPageTextboxFocused(true);\n        setEditingPage(currentPage);\n    };\n    var blurPageTextbox = function () {\n        setPageTextboxFocused(false);\n    };\n    var keydownPage = function (e) {\n        switch (e.keyCode) {\n            case 38:\n                gotoPreviousPage();\n                break;\n            case 40:\n                gotoNextPage();\n                break;\n            case 13:\n                onJumpTo(editingPage);\n                break;\n        }\n    };\n    var jumpToFirstPage = function () { return onJumpTo(0); };\n    var jumpToLastPage = function () { return onJumpTo(numPages - 1); };\n    var toggleSidebar = function () {\n        setSidebarOpened(!isSidebarOpened);\n        onToggleSidebar();\n    };\n    var rotateForward = function () { return onRotate(90); };\n    var rotateBackward = function () { return onRotate(-90); };\n    var activateTextSelectionMode = function () { return onChangeSelectionMode(SelectionMode$1.Text); };\n    var activateHandMode = function () { return onChangeSelectionMode(SelectionMode$1.Hand); };\n    var setVerticalScrollMode = function () { return onChangeScrollMode(ScrollMode$1.Vertical); };\n    var setHorizontalScrollMode = function () { return onChangeScrollMode(ScrollMode$1.Horizontal); };\n    var setWrappedScrollMode = function () { return onChangeScrollMode(ScrollMode$1.Wrapped); };\n    var renderToggle = function () { return l10n.toolbar.toggleSidebar; };\n    var renderPreviousPage = function () { return l10n.toolbar.previousPage; };\n    var renderNextPage = function () { return l10n.toolbar.nextPage; };\n    var renderZoomOut = function () { return l10n.toolbar.zoomOut; };\n    var renderZoomIn = function () { return l10n.toolbar.zoomIn; };\n    var renderFullScreen = function () { return l10n.toolbar.fullScreen; };\n    var renderDownload = function () { return l10n.toolbar.download; };\n    var renderPrint = function () { return l10n.toolbar.print; };\n    var renderGoToFirstPage = function () { return l10n.toolbar.goToFirstPage; };\n    var renderGoToLastPage = function () { return l10n.toolbar.goToLastPage; };\n    var renderRotateClockwise = function () { return l10n.toolbar.rotateForward; };\n    var renderRotateCounterclockwise = function () { return l10n.toolbar.rotateBackward; };\n    var renderTextSelection = function () { return l10n.toolbar.textSelectionTool; };\n    var renderHandTool = function () { return l10n.toolbar.handTool; };\n    var renderVerticalScrolling = function () { return l10n.toolbar.verticalScrolling; };\n    var renderHorizontalScrolling = function () { return l10n.toolbar.horizontalScrolling; };\n    var renderDocumentProperties = function () { return l10n.toolbar.documentProperties; };\n    var renderWrappedScrolling = function () { return l10n.toolbar.wrappedScrolling; };\n    var renderPropertyButton = function (toggle) { return (React.createElement(Tooltip, { position: Position$1.BottomCenter, target: React.createElement(Button, { onClick: toggle },\n            React.createElement(InfoIcon, null)), content: renderDocumentProperties, offset: TOOLTIP_OFFSET$2 })); };\n    var renderPropertiesModal = function (toggle) { return (React.createElement(PropertiesModal, { doc: doc, fileName: fileName, onToggle: toggle })); };\n    return renderToolbar({\n        currentPage: currentPage,\n        currentPageInput: (React.createElement(\"input\", { className: theme.prefixClass + \"-toolbar-current-page-input\", type: \"text\", value: pageTextboxFocused ? (editingPage + 1) : (currentPage + 1), onChange: changePage, onFocus: focusPageTextbox, onBlur: blurPageTextbox, onKeyDown: keydownPage })),\n        documentPropertiesButton: (React.createElement(Modal, { target: renderPropertyButton, content: renderPropertiesModal, closeOnClickOutside: true, closeOnEscape: true })),\n        downloadButton: (React.createElement(Tooltip, { position: Position$1.BottomCenter, target: React.createElement(Button, { onClick: onDownload },\n                React.createElement(DownloadIcon, null)), content: renderDownload, offset: TOOLTIP_OFFSET$2 })),\n        fullScreenButton: (React.createElement(Tooltip, { position: Position$1.BottomCenter, target: React.createElement(Button, { onClick: onFullScreen },\n                React.createElement(FullScreenIcon, null)), content: renderFullScreen, offset: TOOLTIP_OFFSET$2 })),\n        goToFirstPageButton: (React.createElement(Tooltip, { position: Position$1.BottomCenter, target: React.createElement(Button, { onClick: jumpToFirstPage },\n                React.createElement(UpArrowIcon, null)), content: renderGoToFirstPage, offset: TOOLTIP_OFFSET$2 })),\n        goToLastPageButton: (React.createElement(Tooltip, { position: Position$1.BottomCenter, target: React.createElement(Button, { onClick: jumpToLastPage },\n                React.createElement(DownArrowIcon, null)), content: renderGoToLastPage, offset: TOOLTIP_OFFSET$2 })),\n        handToolButton: (React.createElement(Tooltip, { position: Position$1.BottomCenter, target: React.createElement(Button, { onClick: activateHandMode, isSelected: selectionMode === SelectionMode$1.Hand },\n                React.createElement(HandToolIcon, null)), content: renderHandTool, offset: TOOLTIP_OFFSET$2 })),\n        horizontalScrollingButton: (React.createElement(Tooltip, { position: Position$1.BottomCenter, target: React.createElement(Button, { onClick: setHorizontalScrollMode, isSelected: scrollMode === ScrollMode$1.Horizontal },\n                React.createElement(HorizontalScrollingIcon, null)), content: renderHorizontalScrolling, offset: TOOLTIP_OFFSET$2 })),\n        moreActionsPopover: (React.createElement(MoreActionsPopover, { doc: doc, fileName: fileName, scrollMode: scrollMode, selectionMode: selectionMode, onChangeScrollMode: onChangeScrollMode, onChangeSelectionMode: onChangeSelectionMode, onJumpToFirstPage: jumpToFirstPage, onJumpToLastPage: jumpToLastPage, onRotate: onRotate })),\n        nextPageButton: (React.createElement(Tooltip, { position: Position$1.BottomCenter, target: React.createElement(Button, { onClick: gotoNextPage },\n                React.createElement(NextIcon, null)), content: renderNextPage, offset: TOOLTIP_OFFSET$2 })),\n        numPages: numPages,\n        openFileButton: (React.createElement(OpenFileButton, { onOpenFiles: onOpenFiles })),\n        previousPageButton: (React.createElement(Tooltip, { position: Position$1.BottomCenter, target: React.createElement(Button, { onClick: gotoPreviousPage },\n                React.createElement(PreviousIcon, null)), content: renderPreviousPage, offset: TOOLTIP_OFFSET$2 })),\n        printButton: (React.createElement(Tooltip, { position: Position$1.BottomCenter, target: React.createElement(Button, { onClick: onPrint },\n                React.createElement(PrintIcon, null)), content: renderPrint, offset: TOOLTIP_OFFSET$2 })),\n        rotateClockwiseButton: (React.createElement(Tooltip, { position: Position$1.BottomCenter, target: React.createElement(Button, { onClick: rotateForward },\n                React.createElement(RotateForwardIcon, null)), content: renderRotateClockwise, offset: TOOLTIP_OFFSET$2 })),\n        rotateCounterclockwiseButton: (React.createElement(Tooltip, { position: Position$1.BottomCenter, target: React.createElement(Button, { onClick: rotateBackward },\n                React.createElement(RotateBackwardIcon, null)), content: renderRotateCounterclockwise, offset: TOOLTIP_OFFSET$2 })),\n        searchPopover: (React.createElement(SearchPopover, { doc: doc, onJumpToMatch: onJumpToMatch, onSearchFor: onSearchFor })),\n        textSelectionButton: (React.createElement(Tooltip, { position: Position$1.BottomCenter, target: React.createElement(Button, { onClick: activateTextSelectionMode, isSelected: selectionMode === SelectionMode$1.Text },\n                React.createElement(TextSelectionIcon, null)), content: renderTextSelection, offset: TOOLTIP_OFFSET$2 })),\n        toggleSidebarButton: (React.createElement(Tooltip, { position: Position$1.BottomLeft, target: (React.createElement(Button, { onClick: toggleSidebar, isSelected: isSidebarOpened },\n                React.createElement(LeftSidebarIcon, null))), content: renderToggle, offset: TOOLTIP_OFFSET$2 })),\n        verticalScrollingButton: (React.createElement(Tooltip, { position: Position$1.BottomCenter, target: React.createElement(Button, { onClick: setVerticalScrollMode, isSelected: scrollMode === ScrollMode$1.Vertical },\n                React.createElement(VerticalScrollingIcon, null)), content: renderVerticalScrolling, offset: TOOLTIP_OFFSET$2 })),\n        zoomInButton: (React.createElement(Tooltip, { position: Position$1.BottomCenter, target: React.createElement(Button, { onClick: zoomIn },\n                React.createElement(ZoomInIcon, null)), content: renderZoomIn, offset: TOOLTIP_OFFSET$2 })),\n        zoomOutButton: (React.createElement(Tooltip, { position: Position$1.BottomCenter, target: React.createElement(Button, { onClick: zoomOut },\n                React.createElement(ZoomOutIcon, null)), content: renderZoomOut, offset: TOOLTIP_OFFSET$2 })),\n        zoomPopover: (React.createElement(ZoomPopover, { scale: scale, onZoom: onZoom })),\n        wrappedScrollingButton: (React.createElement(Tooltip, { position: Position$1.BottomCenter, target: React.createElement(Button, { onClick: setWrappedScrollMode, isSelected: scrollMode === ScrollMode$1.Wrapped },\n                React.createElement(WrappedScrollingIcon, null)), content: renderWrappedScrolling, offset: TOOLTIP_OFFSET$2 })),\n    });\n};\n\nvar EMPTY_KEYWORD_REGEXP$1 = new RegExp(' ');\nvar SCROLL_BAR_WIDTH = 17;\nvar PAGE_PADDING = 8;\nvar Inner = function (_a) {\n    var doc = _a.doc, file = _a.file, initialPage = _a.initialPage, layout = _a.layout, pageSize = _a.pageSize, render = _a.render, selectionMode = _a.selectionMode, onDocumentLoad = _a.onDocumentLoad, onOpenFile = _a.onOpenFile, onZoom = _a.onZoom;\n    var theme = React.useContext(ThemeContext);\n    var pagesRef = React.useRef(null);\n    var _b = React.useState(pageSize.scale), scale = _b[0], setScale = _b[1];\n    var _c = React.useState(0), currentPage = _c[0], setCurrentPage = _c[1];\n    var _d = React.useState(0), rotation = _d[0], setRotation = _d[1];\n    var _e = React.useState(EMPTY_KEYWORD_REGEXP$1), keywordRegexp = _e[0], setKeywordRegexp = _e[1];\n    var _f = React.useState({\n        matchIndex: -1,\n        pageIndex: -1,\n    }), match = _f[0], setMatch = _f[1];\n    var _g = React.useState(ScrollMode$1.Vertical), scrollMode = _g[0], setScrollMode = _g[1];\n    var _h = React.useState(selectionMode), currentMode = _h[0], setCurrentMode = _h[1];\n    var toggleDragScroll = useDragScroll(pagesRef).toggleDragScroll;\n    var _j = useFullScreen(pagesRef), isFullScreen = _j.isFullScreen, openFullScreen = _j.openFullScreen, closeFullScreen = _j.closeFullScreen;\n    var toggleSidebar = useToggle();\n    var numPages = doc.numPages;\n    var pageWidth = pageSize.pageWidth, pageHeight = pageSize.pageHeight;\n    var arr = Array(numPages).fill(null);\n    var pageVisibility = arr.map(function () { return 0; });\n    var pageRefs = arr.map(function () { return React.useRef(); });\n    var openFiles = function (files) {\n        if (files.length === 0) {\n            return;\n        }\n        var selectedFile = files[0];\n        if (getFileExt(file.name).toLowerCase() !== 'pdf') {\n            return;\n        }\n        new Promise(function (resolve) {\n            var reader = new FileReader();\n            reader.readAsArrayBuffer(selectedFile);\n            reader.onload = function () {\n                var bytes = new Uint8Array(reader.result);\n                resolve(bytes);\n            };\n        }).then(function (data) {\n            onOpenFile(selectedFile.name, data);\n        });\n    };\n    var isDragging = useDrop(pagesRef, function (files) { return openFiles(files); }).isDragging;\n    var _k = React.useState(PrintStatus$1.Inactive), printStatus = _k[0], setPrintStatus = _k[1];\n    var jumpToPage = function (pageIndex) {\n        if (pageIndex < 0 || pageIndex >= numPages) {\n            return;\n        }\n        setCurrentPage(pageIndex);\n        var pagesContainer = pagesRef.current;\n        var targetPage = pageRefs[pageIndex].current;\n        if (pagesContainer && targetPage) {\n            pagesContainer.scrollTop = targetPage.offsetTop;\n        }\n    };\n    React.useEffect(function () {\n        onDocumentLoad(doc);\n        if (initialPage) {\n            jumpToPage(initialPage);\n        }\n    }, []);\n    var changeSelectionMode = function (mode) {\n        toggleDragScroll(mode === SelectionMode$1.Hand);\n        setCurrentMode(mode);\n    };\n    React.useEffect(function () {\n        if (selectionMode === SelectionMode$1.Hand) {\n            toggleDragScroll(true);\n        }\n    }, []);\n    var download = function () {\n        downloadFile(file.name, file.data);\n    };\n    var zoom = function (newScale) {\n        var pagesEle = pagesRef.current;\n        if (!pagesEle) {\n            return;\n        }\n        var scaled = 1;\n        switch (newScale) {\n            case SpecialZoomLevel$1.ActualSize:\n                scaled = 1;\n                break;\n            case SpecialZoomLevel$1.PageFit:\n                scaled = Math.min((pagesEle.offsetWidth - SCROLL_BAR_WIDTH) / pageWidth, (pagesEle.offsetHeight - 2 * PAGE_PADDING) / pageHeight);\n                break;\n            case SpecialZoomLevel$1.PageWidth:\n                scaled = (pagesEle.offsetWidth - SCROLL_BAR_WIDTH) / pageWidth;\n                break;\n            default:\n                scaled = newScale;\n                break;\n        }\n        setScale(scaled);\n        onZoom(doc, scaled);\n    };\n    var pageVisibilityChanged = function (pageIndex, ratio) {\n        pageVisibility[pageIndex] = ratio;\n        var maxRatioPage = pageVisibility.reduce(function (maxIndex, item, index, array) {\n            return item > array[maxIndex] ? index : maxIndex;\n        }, 0);\n        setCurrentPage(maxRatioPage);\n    };\n    var rotate = function (degree) {\n        var updateRotation = (rotation === 360 || rotation === -360) ? degree : rotation + degree;\n        setRotation(updateRotation);\n    };\n    var changeScrollMode = function (mode) {\n        var pagesContainer = pagesRef.current;\n        if (!pagesContainer) {\n            return;\n        }\n        switch (mode) {\n            case ScrollMode$1.Vertical:\n                pagesContainer.classList.add(theme.prefixClass + \"-inner-pages-vertical\");\n                pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-horizontal\");\n                pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-wrapped\");\n                break;\n            case ScrollMode$1.Horizontal:\n                pagesContainer.classList.add(theme.prefixClass + \"-inner-pages-horizontal\");\n                pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-vertical\");\n                pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-wrapped\");\n                break;\n            case ScrollMode$1.Wrapped:\n                pagesContainer.classList.add(theme.prefixClass + \"-inner-pages-wrapped\");\n                pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-vertical\");\n                pagesContainer.classList.remove(theme.prefixClass + \"-inner-pages-horizontal\");\n                break;\n        }\n        setScrollMode(mode);\n    };\n    var jumpToMatch = function (target) {\n        jumpToPage(target.pageIndex);\n        setMatch(target);\n    };\n    var jumpToDest = function (pageIndex, bottomOffset, scaleTo) {\n        var pagesContainer = pagesRef.current;\n        if (!pagesContainer) {\n            return;\n        }\n        var newPageIndex = pageIndex + 1;\n        doc.getPage(newPageIndex).then(function (page) {\n            var viewport = page.getViewport({ scale: 1 });\n            var top = 0;\n            var bottom = bottomOffset || 0;\n            switch (scaleTo) {\n                case SpecialZoomLevel$1.PageFit:\n                    top = 0;\n                    zoom(SpecialZoomLevel$1.PageFit);\n                    break;\n                default:\n                    top = (viewport.height - bottom) * scale;\n                    break;\n            }\n            var targetPageEle = pageRefs[pageIndex].current;\n            if (targetPageEle) {\n                pagesContainer.scrollTop = targetPageEle.offsetTop + top;\n            }\n        });\n    };\n    var print = function () { return setPrintStatus(PrintStatus$1.Preparing); };\n    var cancelPrinting = function () { return setPrintStatus(PrintStatus$1.Inactive); };\n    var startPrinting = function () { return setPrintStatus(PrintStatus$1.Ready); };\n    return render({\n        viewer: layout(toggleSidebar.opened, {\n            attrs: {\n                style: {\n                    position: 'relative',\n                }\n            },\n            children: (React.createElement(PrintContainer, { doc: doc, pageHeight: pageHeight, pageWidth: pageWidth, printStatus: printStatus, rotation: rotation, onCancel: cancelPrinting, onStartPrinting: startPrinting }))\n        }, {\n            attrs: {\n                ref: pagesRef,\n                style: {\n                    position: 'relative',\n                },\n            },\n            children: (React.createElement(React.Fragment, null,\n                isDragging && React.createElement(DropArea, null),\n                isFullScreen && React.createElement(ExitFullScreen, { onClick: closeFullScreen }),\n                Array(numPages).fill(0).map(function (_, index) {\n                    return (React.createElement(\"div\", { className: theme.prefixClass + \"-inner-page\", key: \"pagelayer-\" + index, ref: function (ref) {\n                            pageRefs[index].current = ref;\n                        } },\n                        React.createElement(PageLayer, { doc: doc, keywordRegexp: keywordRegexp, height: pageHeight, match: match, pageIndex: index, rotation: rotation, scale: scale, width: pageWidth, onJumpToDest: jumpToDest, onPageVisibilityChanged: pageVisibilityChanged })));\n                }))),\n        }, function (renderToolbar) { return (React.createElement(Toolbar, { currentPage: currentPage, doc: doc, fileName: file.name, scale: scale, scrollMode: scrollMode, selectionMode: currentMode, onChangeScrollMode: changeScrollMode, onChangeSelectionMode: changeSelectionMode, onDownload: download, onFullScreen: openFullScreen, onJumpTo: jumpToPage, onJumpToMatch: jumpToMatch, onOpenFiles: openFiles, onPrint: print, onRotate: rotate, onSearchFor: setKeywordRegexp, onToggleSidebar: toggleSidebar.toggle, onZoom: zoom, renderToolbar: renderToolbar })); }, {\n            attrs: {},\n            children: (React.createElement(Sidebar, { currentPage: currentPage, doc: doc, height: pageHeight, rotation: rotation, width: pageWidth, onJumpToDest: jumpToDest, onJumpToPage: jumpToPage })),\n        }),\n        doc: doc,\n        download: download,\n        changeScrollMode: changeScrollMode,\n        changeSelectionMode: changeSelectionMode,\n        jumpToPage: jumpToPage,\n        print: print,\n        rotate: rotate,\n        zoom: zoom,\n    });\n};\n\nvar PageSizeCalculator = function (_a) {\n    var doc = _a.doc, render = _a.render;\n    var theme = React.useContext(ThemeContext);\n    var pagesRef = React.useRef(null);\n    var _b = React.useState({\n        pageHeight: 0,\n        pageWidth: 0,\n        scale: 1,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    React.useEffect(function () {\n        doc.getPage(1).then(function (pdfPage) {\n            var viewport = pdfPage.getViewport({ scale: 1 });\n            var w = viewport.width;\n            var h = viewport.height;\n            var pagesEle = pagesRef.current;\n            if (!pagesEle) {\n                return;\n            }\n            var scaled = pagesEle.offsetWidth / w;\n            var scale = decrease(Math.max(1, scaled));\n            setPageSize({\n                pageHeight: h,\n                pageWidth: w,\n                scale: scale,\n            });\n        });\n    }, [doc]);\n    var pageWidth = pageSize.pageWidth;\n    return (pageWidth === 0\n        ? (React.createElement(\"div\", { className: theme.prefixClass + \"-page-size-calculator\", ref: pagesRef },\n            React.createElement(Spinner, null)))\n        : render(pageSize));\n};\n\nvar LoadingStatus = (function () {\n    function LoadingStatus() {\n    }\n    return LoadingStatus;\n}());\n\nvar AskForPasswordState = (function (_super) {\n    __extends(AskForPasswordState, _super);\n    function AskForPasswordState(verifyPasswordFn) {\n        var _this = _super.call(this) || this;\n        _this.verifyPasswordFn = verifyPasswordFn;\n        return _this;\n    }\n    return AskForPasswordState;\n}(LoadingStatus));\n\nvar AskingPassword = function (_a) {\n    var verifyPasswordFn = _a.verifyPasswordFn;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState(''), password = _b[0], setPassword = _b[1];\n    var changePassword = function (e) { return setPassword(e.target.value); };\n    var submit = function () { return verifyPasswordFn(password); };\n    return (React.createElement(\"div\", { className: theme.prefixClass + \"-asking-password\" },\n        React.createElement(\"div\", null,\n            React.createElement(\"div\", { className: theme.prefixClass + \"-asking-password-message\" },\n                l10n.askingPassword.requirePasswordToOpen,\n                \":\"),\n            React.createElement(\"div\", { className: theme.prefixClass + \"-asking-password-input-container\" },\n                React.createElement(\"input\", { className: theme.prefixClass + \"-asking-password-input\", type: \"password\", onChange: changePassword }),\n                React.createElement(\"button\", { className: theme.prefixClass + \"-asking-password-button\", onClick: submit }, l10n.askingPassword.submit)))));\n};\n\nvar CompletedState = (function (_super) {\n    __extends(CompletedState, _super);\n    function CompletedState(doc) {\n        var _this = _super.call(this) || this;\n        _this.doc = doc;\n        return _this;\n    }\n    return CompletedState;\n}(LoadingStatus));\n\nvar FailureState = (function (_super) {\n    __extends(FailureState, _super);\n    function FailureState(error) {\n        var _this = _super.call(this) || this;\n        _this.error = error;\n        return _this;\n    }\n    return FailureState;\n}(LoadingStatus));\n\nvar LoadingState = (function (_super) {\n    __extends(LoadingState, _super);\n    function LoadingState(percentages) {\n        var _this = _super.call(this) || this;\n        _this.percentages = percentages;\n        return _this;\n    }\n    return LoadingState;\n}(LoadingStatus));\n\nvar WrongPassword = function (_a) {\n    var verifyPasswordFn = _a.verifyPasswordFn;\n    var l10n = React.useContext(LocalizationContext);\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState(''), password = _b[0], setPassword = _b[1];\n    var changePassword = function (e) { return setPassword(e.target.value); };\n    var submit = function () { return verifyPasswordFn(password); };\n    return (React.createElement(\"div\", { className: theme.prefixClass + \"-asking-password\" },\n        React.createElement(\"div\", null,\n            React.createElement(\"div\", { className: theme.prefixClass + \"-asking-password-message\" },\n                l10n.wrongPassword.tryAgain,\n                \":\"),\n            React.createElement(\"div\", { className: theme.prefixClass + \"-asking-password-input-container\" },\n                React.createElement(\"input\", { className: theme.prefixClass + \"-asking-password-input\", type: \"password\", onChange: changePassword }),\n                React.createElement(\"button\", { className: theme.prefixClass + \"-asking-password-button\", onClick: submit }, l10n.wrongPassword.submit)))));\n};\n\nvar WrongPasswordState = (function (_super) {\n    __extends(WrongPasswordState, _super);\n    function WrongPasswordState(verifyPasswordFn) {\n        var _this = _super.call(this) || this;\n        _this.verifyPasswordFn = verifyPasswordFn;\n        return _this;\n    }\n    return WrongPasswordState;\n}(LoadingStatus));\n\nvar DocumentLoader = function (_a) {\n    var file = _a.file, render = _a.render;\n    var theme = React.useContext(ThemeContext);\n    var _b = React.useState(new LoadingState(0)), status = _b[0], setStatus = _b[1];\n    React.useEffect(function () {\n        setStatus(new LoadingState(0));\n        var loadingTask = PdfJs.getDocument(file);\n        loadingTask.onPassword = function (verifyPassword, reason) {\n            switch (reason) {\n                case PdfJs.PasswordResponses.NEED_PASSWORD:\n                    setStatus(new AskForPasswordState(verifyPassword));\n                    break;\n                case PdfJs.PasswordResponses.INCORRECT_PASSWORD:\n                    setStatus(new WrongPasswordState(verifyPassword));\n                    break;\n            }\n        };\n        loadingTask.promise.then(function (doc) { return setStatus(new CompletedState(doc)); }, function (err) { return setStatus(new FailureState(err.message || 'Cannot load document')); });\n        return function () {\n            loadingTask.destroy();\n        };\n    }, [file]);\n    switch (true) {\n        case (status instanceof AskForPasswordState):\n            return React.createElement(AskingPassword, { verifyPasswordFn: status.verifyPasswordFn });\n        case (status instanceof WrongPasswordState):\n            return React.createElement(WrongPassword, { verifyPasswordFn: status.verifyPasswordFn });\n        case (status instanceof CompletedState):\n            return render(status.doc);\n        case (status instanceof FailureState):\n            return (React.createElement(\"div\", { className: theme.prefixClass + \"-doc-error\" }, status.error));\n        case (status instanceof LoadingState):\n        default:\n            return (React.createElement(\"div\", { className: theme.prefixClass + \"-doc-loading\" },\n                React.createElement(Spinner, null)));\n    }\n};\n\nvar askingPassword = {\n\trequirePasswordToOpen: \"This document requires a password to open\",\n\tsubmit: \"Submit\"\n};\nvar attachment = {\n\tclickToDownload: \"Click to download\",\n\tnoAttachment: \"There is no attachment\"\n};\nvar bookmark = {\n\tnoBookmark: \"There is no bookmark\"\n};\nvar main = {\n\tdragDropFile: \"Drag and drop a PDF document here\"\n};\nvar printProgress = {\n\tcancel: \"Cancel\",\n\tpreparingDocument: \"Preparing document ...\"\n};\nvar property = {\n\tauthor: \"Author\",\n\tclose: \"Close\",\n\tcreationDate: \"Creation date\",\n\tcreator: \"Creator\",\n\tfileName: \"File name\",\n\tfileSize: \"File size\",\n\tkeywords: \"Keywords\",\n\tmodificationDate: \"Modification date\",\n\tpageCount: \"Page count\",\n\tpdfProducer: \"PDF producer\",\n\tpdfVersion: \"PDF Version\",\n\tsubject: \"Subject\",\n\ttitle: \"Title\"\n};\nvar search = {\n\tclose: \"Close\",\n\tenterToSearch: \"Enter to search\",\n\tmatchCase: \"Match case\",\n\tnextMatch: \"Next match\",\n\tpreviousMatch: \"Previous match\",\n\twholeWords: \"Whole words\"\n};\nvar sidebar = {\n\tattachment: \"Attachment\",\n\tbookmark: \"Bookmark\",\n\tthumbnail: \"Thumbnail\"\n};\nvar toolbar = {\n\tdocumentProperties: \"Document properties\",\n\tdownload: \"Download\",\n\tfullScreen: \"Full screen\",\n\tgoToFirstPage: \"Go to first page\",\n\tgoToLastPage: \"Go to last page\",\n\thandTool: \"Hand tool\",\n\thorizontalScrolling: \"Horizontal scrolling\",\n\tmoreActions: \"More actions\",\n\tnextPage: \"Next page\",\n\topenFile: \"Open file\",\n\tpreviousPage: \"Previous page\",\n\tprint: \"Print\",\n\trotateBackward: \"Rotate counterclockwise\",\n\trotateForward: \"Rotate clockwise\",\n\tsearch: \"Search\",\n\ttextSelectionTool: \"Text selection tool\",\n\ttoggleSidebar: \"Toggle sidebar\",\n\tverticalScrolling: \"Vertical scrolling\",\n\tzoomIn: \"Zoom in\",\n\tzoomOut: \"Zoom out\",\n\twrappedScrolling: \"Wrapped scrolling\"\n};\nvar wrongPassword = {\n\tsubmit: \"Submit\",\n\ttryAgain: \"The password is wrong. Please try again\"\n};\nvar zoom = {\n\tactualSize: \"Actual size\",\n\tpageFit: \"Page fit\",\n\tpageWidth: \"Page width\"\n};\nvar enUs = {\n\taskingPassword: askingPassword,\n\tattachment: attachment,\n\tbookmark: bookmark,\n\tmain: main,\n\tprintProgress: printProgress,\n\tproperty: property,\n\tsearch: search,\n\tsidebar: sidebar,\n\ttoolbar: toolbar,\n\twrongPassword: wrongPassword,\n\tzoom: zoom\n};\n\nvar LocalizationProvider = function (_a) {\n    var children = _a.children, localization = _a.localization;\n    var defaultL10n = enUs;\n    var l10n = localization || defaultL10n;\n    return (React.createElement(LocalizationContext.Provider, { value: l10n }, children));\n};\n\nvar ThemeProvider = function (_a) {\n    var children = _a.children, prefixClass = _a.prefixClass;\n    return (React.createElement(ThemeContext.Provider, { value: { prefixClass: prefixClass || 'viewer' } }, children));\n};\n\nvar Viewer = function (_a) {\n    var defaultScale = _a.defaultScale, fileUrl = _a.fileUrl, initialPage = _a.initialPage, layout = _a.layout, localization = _a.localization, prefixClass = _a.prefixClass, render = _a.render, _b = _a.selectionMode, selectionMode = _b === void 0 ? SelectionMode$1.Text : _b, _c = _a.onDocumentLoad, onDocumentLoad = _c === void 0 ? function () { } : _c, _d = _a.onZoom, onZoom = _d === void 0 ? function () { } : _d;\n    var _e = React.useState({\n        data: fileUrl,\n        name: fileUrl,\n    }), file = _e[0], setFile = _e[1];\n    var layoutOption = function (isSidebarOpened, container, main, toolbar, sidebar) {\n        return defaultLayout(isSidebarOpened, container, main, toolbar(defaultToolbar), sidebar);\n    };\n    var openFile = function (fileName, data) {\n        setFile({\n            data: data,\n            name: fileName,\n        });\n    };\n    var renderDoc = function (renderViewer) { return function (doc) {\n        var renderInner = function (ps) {\n            var pageSize = ps;\n            pageSize.scale = defaultScale || ps.scale;\n            return (React.createElement(Inner, { doc: doc, file: file, initialPage: initialPage, layout: layout || layoutOption, pageSize: pageSize, render: renderViewer, selectionMode: selectionMode, onDocumentLoad: onDocumentLoad, onOpenFile: openFile, onZoom: onZoom }));\n        };\n        return (React.createElement(PageSizeCalculator, { doc: doc, render: renderInner }));\n    }; };\n    var defaultRenderer = render || (function (props) { return props.viewer; });\n    return (React.createElement(ThemeProvider, { prefixClass: prefixClass },\n        React.createElement(LocalizationProvider, { localization: localization },\n            React.createElement(DocumentLoader, { file: file.data, render: renderDoc(defaultRenderer) }))));\n};\n\nvar Worker = function (_a) {\n    var children = _a.children, workerUrl = _a.workerUrl;\n    PdfJs.GlobalWorkerOptions.workerSrc = workerUrl;\n    return React.createElement(React.Fragment, null, children);\n};\n\nexports.Button = Button;\nexports.Icon = Icon;\nexports.MenuDivider = MenuDivider;\nexports.MenuItem = MenuItem;\nexports.Modal = Modal;\nexports.Popover = Popover;\nexports.Position = Position$1;\nexports.PrimaryButton = PrimaryButton;\nexports.ProgressBar = ProgressBar;\nexports.ScrollMode = ScrollMode$1;\nexports.SelectionMode = SelectionMode$1;\nexports.Separator = Separator;\nexports.SpecialZoomLevel = SpecialZoomLevel$1;\nexports.Spinner = Spinner;\nexports.Tooltip = Tooltip;\nexports.Worker = Worker;\nexports.default = Viewer;\nexports.defaultLayout = defaultLayout;\nexports.defaultToolbar = defaultToolbar;\n"]},"metadata":{},"sourceType":"script"}